<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>GoForGoldman</title>
    <link>https://goforgoldman.com</link>
    <description>A blog about mobile dev, .NET, VR, motorcycles, science, Superman and homebrewing</description>
    <lastBuildDate>Thu, 18 Dec 2025 22:16:14 GMT</lastBuildDate>
    <image>
      <url>https://goforgoldman.com/image/default.png</url>
      <title>GoForGoldman Home Page</title>
      <link>https://goforgoldman.com</link>
    </image>
<item>
        <title>AI wasn&#39;t supposed to make us 10x workers</title>
        <link>https://goforgoldman.com/posts/half-x</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/half-x</guid>
        <pubDate>Fri, 19 Dec 2025 01:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/halfx-banner.jpg" alt="AI wasn&#39;t supposed to make us 10x workers" />
          We need more time, not more productivity.]]>
        </description>
        <category>productivity</category>
        <category>health</category>
        <category>career</category>
        <category>culture</category>
        <content:encoded><![CDATA[<p>Today I was thinking about a minor injury I'm dealing with (just something very minor and inconsequential), and that there's a small lifestyle change I need to make to help prevent it happening again (specifically, taking up Vinyasa yoga), and I fell back to a familiar internal response:</p>
<blockquote class="blockquote">
<p>I'll add it to the list of things to do when I have time.</p>
</blockquote>
<p>And it stopped me cold. That moment of deferring my own health until some imaginary future wasn't just a personal quirk, it was a perfectly normalised response. And that's the problem.</p>
<p>I recently read a blog post arguing that the &quot;10x developer&quot; myth is now real, and that with AI we all need to &quot;get our heads in the game&quot; and become 10x workers.</p>
<p>I'm sure most of us feel this, even get a thrill out of it. I know I do. I'm way more productive now than I was 2 years ago, and I won't deny that I love it. But we're so caught up in the race to capitalise on this new technology that we rarely pause to ask whether we're even asking the right questions.</p>
<p>When I took a step back and thought about it, I realised this isn't what I want from AI.</p>
<p>AI wasn't supposed to make us 10x workers.
It was supposed to make us 0.1x workers.</p>
<p>Many of you will have seen this quote from Joanna Maciejewska:</p>
<img src="/images/posts/authorjmac-tweet.png" width="500" alt="You know what the biggest problem with pushing all-things-AI is? Wrong direction. I want AI to do my laundry and dishes so that I can do art and writing, not for AI to do my art and writing so that I can do my laundry and dishes.">
<p>And you know what? It's funny, but it's not a joke. Her other comments in the thread add some context, but the core point is simple: she's not advocating for creating robot slaves. She's asking why we're using AI to take over the things that bring us joy, instead of the things that make us miserable (and, frankly, the things most of us are bad at; her example was doing taxes).</p>
<p>And I have to wonder - if AI genuinely increases productivity, why is the default assumption that we must 10x output instead of maintaining output and reducing input?</p>
<p>I'm not saying everyone should do that, I'm just concerned that it barely even enters the conversation.</p>
<p>Maciejewska made a great point, but I'm talking about something even more fundamental. We already know this pattern well. We are culturally neglecting our health in the pursuit of profit, then acting surprised at the outcomes, talking about an &quot;obesity pandemic&quot; as if it appeared out of nowhere. We keep treating health as &quot;extra&quot;, something you do outside work, after work, when you're lucky enough to have time and energy, not just after work but after all the other necessary things that consume our daily lives.</p>
<p>But we need to stop treating it like an optional extra, because it's not. It's infrastructure. I don't think this position needs defending, but if you want to look at it through a business lens, consider this: healthy, happy, focused people are more productive. That's not an opinion, that's an empirically established fact.</p>
<p>But even setting business value aside for a second, there's a more basic question here about decency.</p>
<p>It's nearly 2026. We live in a world of unprecedented wealth and technological capability, yet in the wealthiest nation on Earth, more than a tenth of the population lives below the poverty line, and people  still die from preventable and treatable conditions because they cannot afford to live. Somehow this is normal.</p>
<p>Every major technological shift becomes an opportunity to squeeze more out of workers, not to give anything back. But this isn't the 19th century, it's the 21st. AI isn't the first industrial revolution, it's the fourth. People in the past didn't have the benefit of hindsight. We do.</p>
<p>I suspect many of you are still trying to figure out how to measure the productivity gains from AI. That's a whole other conversation (and I'm happy to help), so here's my suggestion heading into 2026: 
If you're seeing gains, give some of that time back.
Not as forced &quot;wellness culture&quot; (I won't pretend that phrase doesn't dredge up thoughts so cringe it's practically become a trope), not as performative initiatives. Just as a baseline assumption that work should not consume the very thing that makes people able to work in the first place.</p>
<p>Life, objectively, is better than it has ever been for those of us living in the West and above the poverty line. And yet many of us still move through our days exhausted, anxious, and not just short on time, but in the red.</p>
<p>So here's my final thought. When I say we should give some of that time back, I don't just mean as leaders or employers. I mean to ourselves as well. If AI lets you 10x your productivity, great. Consider 5x-ing it instead. Take the other half and invest it where it actually matters: your health, your family, your relationships, your sense of meaning.</p>
<p>We don't need permission to do this. We owe it to ourselves to stop treating our wellbeing as a deferred task, and start treating it as part of the work of living.</p>
<p><em>Banner image photo by <a href="https://unsplash.com/@@silverkblack?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Vitaly Gariev</a> on <a href="https://unsplash.com/photos/man-resting-head-on-steering-wheel-in-car-s43Z7WTTlMA?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a></em></p>
]]></content:encoded>
      </item>
<item>
        <title>It&#39;s time to let JavaScript Go</title>
        <link>https://goforgoldman.com/posts/its-time-javascript</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/its-time-javascript</guid>
        <pubDate>Fri, 12 Dec 2025 01:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/js-tired-boss.png" alt="It&#39;s time to let JavaScript Go" />
          JavaScript has served us well. It got us to where we are today and is the cornerstone of not just the internet, but most of the modern world. But it&#39;s old, it&#39;s tired. And it wants to rest. And we should let it.]]>
        </description>
        <category>javascript</category>
        <category>security</category>
        <category>web</category>
        <content:encoded><![CDATA[<p><a href="https://blog.checkpoint.com/research/shai-hulud-2-0-inside-the-second-coming-the-most-aggressive-npm-supply-chain-attack-of-2025/">Sha1-Hulud popped up again last month</a>. Another poisoned npm wave. Hundreds of packages compromised. Tens of thousands of repositories (potentially millions) affected. Another security blog cycle. Another industry-wide sigh.</p>
<p>There's nothing new in the news. It's the same story and same advice - audit your dependencies, enforce MFA, do all the things you're already doing - and the same chorus of &quot;we need stronger governance&quot; and &quot;supply chain hygiene matters,&quot; as though the problem is that we didn't wash our hands before dinner.</p>
<p>But when these attacks keep appearing in the same supply chain, it isn't hygiene, and it isn't governance. It's the structure.</p>
<p>At some point, you have to stop asking the same question and start accepting the answer.</p>
<p>It's time to take JavaScript out behind the shed, level the shotgun, wipe away the solitary tear, and let it go.</p>
<p>This isn't just about a rant, a personal distaste for JavaScript and the culture that glorifies its shortcomings. It's the silent horror at all the &quot;governance&quot; and &quot;risk management&quot; around the single greatest vulnerability we've ever known. And it's everywhere.</p>
<p>This is about the fact that modern civilisation runs on an ecosystem that cannot be secured, cannot be governed, and cannot be fixed.</p>
<h2 id="the-latest-reminder-that-were-out-of-time">The latest reminder that we're out of time</h2>
<p>Almost immediately afterward, we saw this <a href="https://nextjs.org/blog/CVE-2025-66478">critical vulnerability affecting NextJs</a> (technically in React, but it impacts NextJs in a meaningful way), arguably the most JavaScript based UI framework in use today. This wasn't a design flaw, or a coding error. This was an architectural level vulnerability, and it was of the highest severity and in the most widely used frontend frameowrk in existence.</p>
<h2 id="why-npm-is-uniquely-vulnerable">Why npm Is Uniquely Vulnerable</h2>
<p>Often, when an npm supply chain attack hits the news, people try to equate it to the proliferation of malware that targets Windows compared to other OSes (which is not really true any more - most attack vectors are via the browser). &quot;Well, npm is popular. Of course attackers target the biggest ecosystem.&quot;</p>
<p>That's part of the picture. A small part.</p>
<p>If Windows viruses are 80 percent prevalence and 20 percent architecture, npm supply chain attacks are closer to 40 percent prevalence and 60 percent architecture. It's not just popularity. npm is structurally easier to attack.</p>
<p>Here's why:</p>
<h3 id="npms-dependency-explosion-problem">npm's dependency explosion problem</h3>
<p>npm's model encourages micro-packages and extremely deep dependency trees. It's normal for a single project to transitively pull in hundreds to thousands of packages, many of them single-file utilities maintained by one person, not version-pinned, and unreviewed by anyone upstream.</p>
<p><figure><img src="https://imgs.xkcd.com/comics/dependency.png" alt="The famous XKCD cartoon (#2347). It's precisely because it's true that it's not funny."  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">The famous XKCD cartoon (#2347). It's precisely because it's true that it's not funny.</figcaption></figure></p>
<p>This makes npm uniquely fragile. A single compromised tiny package cascades into millions of downstream repos without anyone noticing. NuGet and other ecosystems simply don't have this extreme level of fragmentation.</p>
<h3 id="npm-install-executes-code">npm install executes code</h3>
<p>npm's lifecycle scripts (<code>preinstall</code>, <code>install</code>, <code>postinstall</code>) let packages run arbitrary code on the developer's machine at install time. This is the single biggest structural weakness in the JavaScript ecosystem.</p>
<p>In the light of other package distribution systems, this seems absurd. NuGet for example does not allow code execution at install time.</p>
<p>Yarn/PNPM don't solve the problem either. They inherit the same vulnerability because they use npm package manifests and respect lifecycle scripts unless explicitly disabled.</p>
<p>This one feature alone makes the attack surface wildly larger.</p>
<h3 id="npm-publishes-are-frictionless">npm publishes are frictionless</h3>
<p><code>npm publish</code> takes seconds. No signing, no approval, and until recently, no mandatory MFA (and historically, many maintainers didn't secure accounts with MFA).</p>
<p>Hijacked accounts are famously common.</p>
<h3 id="npm-versioning-culture-is-chaos">npm versioning culture is chaos</h3>
<p>The JavaScript community updates constantly, rarely pins exact versions, often uses <code>^</code> or <code>~</code> in production, and often auto-updates with bots like Dependabot or Renovate.</p>
<p>When a malicious version appears, the propagation window is measured in minutes.</p>
<p>.NET developers mostly pin versions manually and bump intentionally. Ruby/Bundler ecosystems often lock aggressively. Rust/Cargo uses locking by default. Go modules use immutable, cryptographic continuity. Python/pip is somewhere in the middle, but still less chaotic than npm.</p>
<h3 id="npm-rewrites-packages-on-install">npm rewrites packages on install</h3>
<p>npm performs dependency resolution and <code>node_modules</code> flattening in a way that provides no stable, verifiable dependency graph. Contrast this with Rust's Cargo.lock with reproducible builds, Go's sumdb with verified module proxy, or NuGet's deterministic restore where the same machine state produces identical outcomes.</p>
<p>The package lock system deserves its own special place in hell for manageability reasons alone, but that same nightmare exacerbates this problem beyond any reasonable expectations of management (we'll get to that later). npm's approach has historically made deterministic builds inconsistent, which is completely incompatible with any sense of control.</p>
<h3 id="npms-early-design-predated-modern-supply-chain-thinking">npm's early design predated modern supply chain thinking</h3>
<p>By the time people realised the risks, the ecosystem had scaled to millions of packages and billions of downloads per week. Retrofitting safety into that scale is extremely difficult. NuGet, Cargo, and Go Modules all came later and learned from what npm got wrong.</p>
<h2 id="other-ecosystems-arent-perfect-but-they-arent-this">Other Ecosystems Aren't Perfect, But They Aren't This</h2>
<p><a href="https://socket.dev/blog/category/research">No package ecosystem is flawless</a>, but many have structural safeguards that npm simply never had.</p>
<p><strong>NuGet</strong> has binary packages, deterministic restore, signing support, namespace ownership, and no arbitrary install scripts. It strongly encourages signing, enforces API key scopes, has much slower ecosystem turnover, and has fewer single-maintainer micro-packages.</p>
<p><strong>Cargo</strong> enforces crate ownership, reproducible builds, no install-time execution, and cultural bias towards fewer dependencies.</p>
<p><strong>Go Modules</strong> provide verifiable sums with transparency logs (sumdb), module paths tied to DNS ownership, and immutable versions.</p>
<p><strong>PyPI, RubyGems, and Maven</strong> all have weaknesses, but none operate on the premise that a text file with arbitrary lifecycle scripts from a stranger on the internet should run executable code on your machine.</p>
<p>npm is the only major ecosystem that grew without a hard ownership layer and with executable install scripts as a default feature.</p>
<p>npm is the outlier.</p>
<h2 id="the-sleeper-agent-in-every-system-we-rely-on">The Sleeper Agent in Every System We Rely On</h2>
<p>JavaScript is everywhere. It is all around us, even now, in this very room. You use it when you turn on your smart lights or open your blinds. When you check your bank balance. When your child logs in for school. When you watch television. When you pay your taxes. And it thrives in a world that has been pulled over your eyes to blind you from the truth: <strong>Modern civilisation runs on unsigned, unaudited code written by strangers and distributed through a system that was never designed to carry this weight.</strong></p>
<p>It has become the substrate of modern life, woven through systems so deeply that most people don't even realise they're touching it.</p>
<p>And lying there, quietly, is a devastating sleeper agent, completely unaware of its own catastrophic nature, unknowingly waiting for an activation signal.</p>
<h3 id="the-bigger-problem">The bigger problem</h3>
<p>Well, you can forget everything I said about npm being uniquely vulnerable.</p>
<p>Earlier I said that other package ecosystems are materially better-designed than npm. They are. Stronger signing models, stricter namespace ownership, no lifecycle scripts, deterministic restores. But there’s a catch.</p>
<p>The moment they touch npm, <em>even once</em>, they inherit all of npm’s problems. And they do. Constantly.</p>
<p>For example, a NuGet package can legally include:</p>
<ul>
<li>a <code>package.json</code></li>
<li>a targets file</li>
<li>an MSBuild hook that runs npm install</li>
</ul>
<p>And it won’t run on install, which is why NuGet feels safer. But that’s not protection. It just pushes execution back a few minutes. Because someone, somewhere, is going to run:</p>
<pre><code class="language-bash">dotnet build
</code></pre>
<p>And when they do, that MSBuild target fires, npm runs, lifecycle scripts run, and then we have exactly the same problems: unsigned code, deep transitive chains, abandoned authors, typosquatting, stale dependencies four thousand layers down.</p>
<p>This isn't hypothetical either, this <em>literally</em> happened, last month, with this very same exploit, and not by accident, nor by deliberate malicious intent. It happened via zoonotic spillover. In just a couple of days, <a href="https://thehackernews.com/2025/11/shai-hulud-v2-campaign-spreads-from-npm.html?m=1">Sha1-Hulud 2.0 made the jump from npm to Maven</a>.</p>
<h2 id="the-governance-illusion">The Governance Illusion</h2>
<p>Our financial institutions, government systems, defence agencies, and healthcare providers run software built on an ecosystem where:</p>
<ul>
<li>packages are unsigned</li>
<li>scripts run pre, during, and post install</li>
<li>anyone could originally publish a higher version of someone else's package (this <em>really</em> happened, and was <em>an actual vector for a real compromise</em>)</li>
<li>maintainers can be compromised silently</li>
<li>dependencies are unbounded in depth</li>
<li>and MFA is… &quot;encouraged&quot;</li>
</ul>
<p>Encouraged.</p>
<p>Not required. Not enforced. Not mandatory for publishing. Not mandatory for organisations who depend on the ecosystem.</p>
<p>Encouraged.</p>
<p>If you wanted to parody risk management, you couldn't write something better than that.</p>
<p>Can you tell at install time that a package is verified? Maybe. Sometimes. If the maintainer opted in.</p>
<p>Can you tell whether the package author is using MFA? Does your pipeline know? Should it?</p>
<p>Can you detect whether a dependency eleven layers down was published by a hijacked account by someone in a different continent?</p>
<p>No.</p>
<p>And here is the important part:</p>
<p><strong>This is not because JavaScript developers are careless. It is because the architecture makes enforcement impossible.</strong></p>
<p>npm was designed for frictionless innovation. Not enterprise security, or global infrastructure, or hyperscale workloads. And certainly not national defence, and not &quot;the entire world now depends on this&quot;.</p>
<p>It simply cannot meet the requirements now placed on it.</p>
<p>Governance isn't <em>failing</em>; it simply cannot exist here.</p>
<p>Trying to govern npm is like trying to lock Old Yeller in the corn pen. It isn't making him safer. It isn't making anyone safer. It's just delaying the moment when you admit what has to happen.</p>
<p>And it's not only the architecture. It's the culture that grew around it.</p>
<p>For more than a decade, JavaScript became the poster child for frictionless innovation. Move fast. Ship now. Patch later. Vibe your way into an MVP. Impress investors with a shiny prototype. Get traction before you get discipline. The ecosystem rewarded speed over rigour, convenience over safety, and novelty over reliability. That is not a criticism of developers. It is an observation of incentives.</p>
<p>Now add to that the explosion of no-code and low-code tooling, the rise of vibe-coded SaaS platforms making extravagant claims, and a startup culture built on hype cycles rather than engineering discipline. As someone responsible for governance, risk, or compliance, how do you meaningfully assess trust in a world where entire products can be assembled from unknown transitive dependencies and launched into production before anyone involved understands what is running under the hood?</p>
<p>It's true that cultures <em>can</em> evolve - Linux is proof, as is Python. Even C++ reinvented itself. But the web is the last ungoverned frontier. There are no gatekeepers, no zoning laws, no building codes. No borders. Its very identity is rooted in permissiveness. That is why it exploded. That is why it became ubiquitous. And that is why it cannot be tamed.</p>
<p>The Old West wasn't civilised. It was replaced. That is the only way frontier cultures change.</p>
<h2 id="why-this-cannot-be-fixed">Why This Cannot Be Fixed</h2>
<p>JavaScript is held together by the same rope it's hanging from.</p>
<p>Every modern feature that people praise — flexibility, dynamic typing, living in the browser, universality, massive ecosystem, npm's speed of iteration — is directly linked to the things that make it an operational hazard: impossible static guarantees, runtime type chaos, execution of arbitrary code on install, historically zero security posture, fragmentation, accidental complexity everywhere.</p>
<p>It's not despite its strengths that JavaScript is a mess. It's <em>because</em> of them.</p>
<SidenoteContainer title="You don't have to take my word for it">
<p>Sonatype’s annual <a href="https://www.sonatype.com/state-of-the-software-supply-chain/Introduction">State of the Software Supply Chain</a> report has been warning about JavaScript’s dependency bloat for years. In their latest edition, they found that the JavaScript ecosystem grows faster, forks faster, and abandons packages faster than any other ecosystem they measured. That’s the soil everything else grows in.</p>
<p>Snyk’s State of JavaScript Security research shows the same problem from another angle: most of the ecosystem is built on shallow ownership, deep transitive chains, and packages that have been unmaintained for years. That’s not moral failure. That’s architecture. (Their research is behind an authenticated call, you can see more <a href="https://snyk.io/platform/snyk-javascript-security/">here</a>)</p>
<p><a href="https://socket.dev/blog/category/research">Socket’s analysis</a> of npm install scripts shows that more than half of the high‑impact malware waves on npm involve install scripts. Why wouldn’t they? They’re arbitrary shell commands that run on your machine just because you typed <code>npm install</code>.</p>
<p><a href="https://www.reversinglabs.com/blog/malicious-npm-patch-delivers-reverse-shell">ReversingLabs has documented</a> wave after wave of npm malware, from dependency‑confusion attacks to hijacked maintainer accounts. None of it requires brilliance. None of it requires sophistication. It just requires that the ecosystem works exactly the way it was designed.</p>
<p>Even <a href="https://github.com/advisories">GitHub’s own advisory database</a> reads like a running commentary on structural weakness. Over and over, the root cause isn’t a bug. It’s the model.</p>
<p><a href="https://www.cisa.gov/resources-tools/resources/securing-software-supply-chain-recommended-practices-guide-suppliers-and">CISA</a> and <a href="https://www.nsa.gov/Press-Room/Press-Releases-Statements/Press-Release-View/Article/3617462/nsa-releases-recommendations-to-mitigate-software-supply-chain-risks/">the NSA</a> have both released guidance warning that modern software supply chains are brittle by design. We just don’t treat it like a crisis because JavaScript feels familiar.</p>
<p>While I was writing this, I realised I had designed a viable supply-chain attack in about thirty seconds without meaning to. Not because I am especially clever, but because the path is obvious. The ecosystem makes it obvious. If a tired engineer can sketch out an attack over coffee, imagine what a motivated attacker with time, money, and intent can do. I don’t need to implement it to make the point. The fact that it practically designs itself is the point.</p>
</SidenoteContainer>
<p>JavaScript is the internal combustion engine of the web. It changed everything, it powered an era, and it made the modern world possible. But just like the engine that defined the twentieth century, its success became its trap. We built our civilisation around it. We kept scaling it long after the warning lights were flashing. We convinced ourselves we could tune it, regulate it, govern it, bolt safety rails onto it.</p>
<p>But some technologies don't merely accumulate flaws. They accumulate <strong>risk</strong>. They grow into existential dependencies. They become too entrenched to fix and too dangerous to continue.</p>
<p>This is an honest assessment, not a dunk. It was the right tool in 1995. It was tolerable in 2005. It was survivable in 2015. By 2025, it became the weakest point in virtually every attack chain.</p>
<p>When language-level weaknesses endanger supply chains, developer machines, CI pipelines, package repositories, and global infrastructure, it's no longer a quirk. It's a liability.</p>
<p>And that is the tragedy here: we don't want to let go. Culturally, emotionally, historically, we are bound to JavaScript, in the same way that we're culturally bound to sitting in metal killing machines, propelled along by explosions. It feels unthinkable to imagine the web without it. But the scale of what now runs on this foundation makes the cost of sentimentality untenable.</p>
<p>Its greatest strength is <em>all</em> of its greatest weaknesses. In order for it to remain viable and modernise for the future, it would need such a huge overhaul that you'd be better off replacing it altogether. And I have no doubt that WASM <em>will</em> do that.</p>
<p>JavaScript's architecture, its ecosystem, and its culture are inseparable. And all three have reached a point where incremental modernisation is no longer viable.</p>
<p>You cannot break the web. You cannot remove features. You cannot repair early design mistakes. You cannot enforce typing. You cannot change semantics. You cannot force safe package practices. You cannot replace npm with something sane without breaking everything built on top of it. You cannot shift the culture because the culture is encouraged by the language and the ecosystem.</p>
<p>This is not a moral failure of the community. It's a structural failure of the platform.</p>
<p>npm's flexibility creates its fragility. JavaScript's expressiveness creates its unpredictability. &quot;No breaking changes ever&quot; creates permanent technical debt. The culture of freedom creates a culture of shortcuts. The scripting model creates the security footprint.</p>
<p>And this part needs to be said explicitly:</p>
<p><strong>JavaScript is a scripting language.</strong> A <em>scripting</em> language. And we are using it to build and run hyperscale enterprise systems. Critical infrastructure. Banking. Healthcare. Education. Defence.</p>
<p>And we treat that as normal.</p>
<p>I have <em>no doubt</em> that there will be a flood of people lining up to tell me why I'm wrong to point that out. But it's not something I should have to defend; the fact that <em>anyone</em> takes this ecosystem seriously, let alone <em>everyone</em>, is a triumph of normalcy bias.</p>
<p>Go grab a drink. I'll be right back, I'm off to write my new SAP competitor in batch scripts.</p>
<p><figure><img src="/images/posts/this-is-fine.jpg" alt="The modern world runs on a scripting engine designed for convenience. 'This is fine'."  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">The modern world runs on a scripting engine designed for convenience. 'This is fine'.</figcaption></figure></p>
<p>When we talked about this on Beer Driven Devs, I said JavaScript feels like Jeff Goldblum at the end of The Fly: the product of brilliance and accident merged into something that can't be unmerged, something suffering under its own design, something quietly asking to be put down.</p>
<p>JavaScript-as-Brundlefly is a creature born from genius and accident, the output of ambition meeting unintended consequences. An innovation that went further than its design parameters. A hybrid that survived long past the point where the merge made sense. Something that cannot be separated back into safe components. Something begging for mercy, not malice. Something whose tragedy is that it cannot continue.</p>
<p>The more I look at the state of our global software infrastructure, the more I think that wasn't an exaggeration.</p>
<h2 id="the-wasm-escape-hatch-and-why-necromancy-shouldnt-happen">The WASM Escape Hatch (And Why Necromancy Shouldn't Happen)</h2>
<p>I mentioned above that I believe WASM is what's next for the web. I do, and I'm not going to elaborate here on why because it's been covered a lot already. You can listen to <a href="https://www.beerdriven.dev/episodes/37/">Liam and I talking about it on the BDD podcast</a>, or look up any number of opinion articles and videos on the topic. It's clear that the consensus is not aligned with my view, and I'm fine with that. And to be clear, I don't think JavaScript will <em>ever</em> disappear completely, and to be even more clear, I don't think WASM will displace JavaScript as the dominant framework. Instead, it opens up the option of <em>no</em> dominant framework at all, because you can run literally anything on it (and that's not the risk you think it is - but, again, that's another discussion).</p>
<p>Most of the discussion at the moment tends to focus on the past, or at best, the present. Most opinions believe that JavaScript is here to stay, forever, and that WASM won't ever replace it. But the truth is, these opinions are not based on fact. WASM won't displace JavaScript overnight (JavaScript will die a slow, agonising death, rather than the dignified sendoff it deserves). Not because it <em>can't</em>, nor because it <em>shouldn't</em>, but because of the cultural inertia described above.</p>
<p>It will never be truly gone, even if something else does take over. And if that thing is WASM, people will say &quot;we'll just compile JavaScript to WASM and make it binary&quot;. And yes, someone will. That isn't a hypothetical. It is inevitable. Developers resurrect old tools all the time. You can still write AMOS programs in 2025. Someone will eventually paint a pentagram over WASM and summon JavaScript back from its well-deserved rest.</p>
<p>But this part needs to be framed honestly.</p>
<p>I'm not saying we <em>can't</em> necromance JavaScript into WASM. I'm saying we <em>shouldn't</em>; at least, not with serious intention of perpetuating it's use as a ubiquitous piece of all modern infrastructure. Not because the experiment itself is wrong, but because treating it as a way to preserve JavaScript's place in the web stack would drag every structural, systemic, institutional, and cultural problem along for the ride.</p>
<p>The security fatalism. The micro-dependency culture. The 'anything-goes' programming habits. The absence of boundaries. The normalisation of fragility. The idea that convenience outweighs cost. The belief that scripting languages scale because they <em>have</em> scaled, not because they were designed to.</p>
<p>Sure, you can resurrect JavaScript inside a WASM VM. Compile it. Sandboxed. Efficient. But all that does is exhume the corpse and strap it upright. It doesn't fix the rot in the bones. And it definitely doesn't fix the culture.</p>
<p>WASM is Rocky's pristine new physique. JavaScript is Eddie's decaying corpse. Stuffing one into the other doesn't produce a hero. It produces a monster.</p>
<p>And I say this with empathy, not contempt. If someone told me this about .NET, I'd be gutted. I've lived through the death of platforms I loved: the Amiga (and AMOS), Windows Phone. It hurts. But when something reaches the point where its existence endangers what's built on top of it, you have to let it go.</p>
<p>The web doesn't need JavaScript any more. It needs a safe, modern VM. WASM is already that. It's designed for the future rather than patched around the past.</p>
<p>WASM gives us a chance to start fresh. To build the web's future on foundations designed for modern realities. To avoid repeating the same mistakes under a different runtime.</p>
<p>We shouldn't squander that by dragging JavaScript's entire existential crisis into the new world.</p>
<h2 id="let-it-rest">Let It Rest</h2>
<p>JavaScript isn't the villain. It carried the web through adolescence. It did more than it was ever designed to do. It held the world together long after its structural cracks became impossible to ignore.</p>
<p>But it is tired. And the risks have outgrown the story we tell ourselves about how software is built.</p>
<p>The responsible thing is to let it rest. Gratefully. Honestly.</p>
<p>And then choose tools designed for the world we actually live in, not the one we left behind.</p>
<p>If JavaScript is Old Yeller, worn out and carrying wounds it can't come back from, then WASM is Young Yeller: capable, modern, and built for the future rather than the past.</p>
<p>It's time to let the old hero rest and raise the one that can carry us forward.</p>
<p>The web is ready to grow up. It's time we were too.</p>
]]></content:encoded>
      </item>
<item>
        <title>PageResolver becomes SmartNavigation</title>
        <link>https://goforgoldman.com/posts/smart-navigation</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/smart-navigation</guid>
        <pubDate>Sat, 08 Nov 2025 01:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/smart-navigation.png" alt="PageResolver becomes SmartNavigation" />
          PageResolver has been fully updated for .NET 10, and has a shiny new name to go along with some new functionality too.]]>
        </description>
        <category>mobile</category>
        <category>maui</category>
        <category>ui</category>
        <category>di</category>
        <content:encoded><![CDATA[<p>For the past couple of years, PageResolver has quietly become one of the most useful pieces of plumbing in the .NET MAUI ecosystem. It takes the ceremony out of navigation, resolves pages and view models through DI, supports Shell and non-Shell apps, and generally reduces the cognitive overhead of building a modern MAUI app.</p>
<p>With .NET 10, it was time to finish something I’ve been putting off for too long: giving the library a proper name, a consistent namespace, and a cleaner foundation for what comes next.</p>
<p>Today, I’m happy to announce the new home of the project:</p>
<p><strong>Plugin.Maui.SmartNavigation</strong></p>
<p>NuGet: <code>Plugin.Maui.SmartNavigation</code><br />
Repo: <a href="https://github.com/matt-goldman/Plugin.Maui.SmartNavigation">https://github.com/matt-goldman/Plugin.Maui.SmartNavigation</a></p>
<h2 id="why-the-rename">Why the rename?</h2>
<p>When I first published PageResolver, .NET MAUI wasn't released yet, the naming guidelines for plugins were unclear (ok, <em>I</em> was unclear about them), and NuGet’s namespace reservation system was still evolving. That’s how we ended up with the package effectively living under <code>Goldie.MauiPlugins.PageResolver</code>, even though the actual namespace was <code>Maui.Plugins.PageResolver</code>.</p>
<p>SmartNavigation fixes all of that:</p>
<ul>
<li>Correct naming aligned with MAUI plugin conventions</li>
<li>A clean namespace (<code>Plugin.Maui.SmartNavigation</code>)</li>
<li>A package name that reflects what the library actually does</li>
<li>A fresh repo without the historical namespace baggage</li>
</ul>
<p>It also positions the library for continued growth without carrying around its pre-MAUI origin story.</p>
<h2 id="whats-new-in-smartnavigation">What's new in SmartNavigation?</h2>
<p>If you've been using PageResolver 2.x, you’ll feel right at home. SmartNavigation is a drop-in conceptual upgrade with several improvements.</p>
<h2 id="unified-navigation-manager">Unified navigation manager</h2>
<p><code>INavigationManager</code> now gives you a single, predictable API surface for:</p>
<ul>
<li>Shell routing</li>
<li>Hierarchical navigation</li>
<li>Modal navigation</li>
<li>Automatic behaviour when going back</li>
</ul>
<h2 id="stronger-lifecycle-support">Stronger lifecycle support</h2>
<p>I've always wished we had something like Blazor's <code>OnInitializedAsync</code> and <code>OnAfterRenderAsync</code>, and now we do (well at least one of them). For apps that need structured, async initialisation in ViewModels, the <code>NavigatedInitBehaviour</code> and <code>IViewModelLifecycle</code> pattern has been added to take the guesswork out of where to initialise your ViewModels.</p>
<h2 id="cleaner-naming-and-structure">Cleaner naming and structure</h2>
<p>The core API hasn’t changed dramatically, but everything is now surfaced under a consistent, future-proof namespace.</p>
<h2 id="source-generator-is-now-opt-in">Source generator is now opt-in</h2>
<p>This was a requested change, and was a mistake in the original implementation. The source generator was enabled by default, and I later added an attribute to opt-out. Mow, hf you want automatic DI registration, enable it, and ff you don’t, you don't.</p>
<p>Definitely the way it <em>should</em> be.</p>
<h2 id="best-practices-patterns">Best Practices patterns</h2>
<p>As the community has grown, so have the architectural patterns. Strongly typed routes, modular navigation, and clean-MVVM setups will now be documented properly in the wiki rather than scattered across GitHub issues and replies.</p>
<p>I've also got some opinionated templates in the works that I intend to release in the next few weeks.</p>
<h2 id="what-about-the-old-pageresolver-repo">What about the old PageResolver repo?</h2>
<p>It has been archived and will remain available indefinitely.</p>
<p>If you’re using PageResolver today, your app won’t suddenly break, but all new work will happen in SmartNavigation.</p>
<p>The migration is straightforward:</p>
<pre><code class="language-xml">&lt;!-- Old --&gt;
&lt;PackageReference Include=&quot;Goldie.MauiPlugins.PageResolver&quot; Version=&quot;2.x&quot; /&gt;

&lt;!-- New --&gt;
&lt;PackageReference Include=&quot;Plugin.Maui.SmartNavigation&quot; Version=&quot;3.0&quot; /&gt;
</code></pre>
<p>Namespaces change accordingly.
There are no behavioural differences unless you're using the source generator.</p>
<p>A full migration guide is in the README.</p>
<h2 id="why-smartnavigation">Why &quot;SmartNavigation&quot;?</h2>
<p>Two reasons.</p>
<p>First, it’s discoverable. Nobody goes looking for “resolvers” when they want help with navigation.</p>
<p>Second, the library has grown far beyond simply resolving pages. Today it provides:</p>
<ul>
<li>Navigation</li>
<li>Lifecycle behaviour</li>
<li>Parameter binding</li>
<li>Dependency injection</li>
<li>Modal support</li>
<li>Type-safe routing</li>
<li>Extensibility points for Shell, MVU, Mopups, and anything else you throw at it</li>
</ul>
<p>I felt it needed a name that reflected its job, not its original proof-of-concept.</p>
<h2 id="availability-release-schedule">Availability &amp; Release Schedule</h2>
<p>SmartNavigation 3.0.0-rc.1 is available today on NuGet for anyone who wants to start testing the new package, namespaces, behaviours, and migration steps in their existing MAUI projects. I’d love feedback over the coming week so the launch version is as solid as possible.</p>
<p>The final release, <code>Plugin.Maui.SmartNavigation 3.0.0</code>, will go live on Friday, alongside the official .NET 10 release. This is the earliest point I can ship it without preview dependencies, and it will be the formal successor to PageResolver 2.x under the new name and namespace.</p>
<p>If you'd like your app to be ready for .NET 10 from day one, the RC is stable enough to drop into a branch and test with immediately.</p>
<h2 id="whats-next">What's next?</h2>
<p>Now that the rename is complete and the structure is clean, I can finally move on from the administrative debt and focus on features.</p>
<p>Coming soon:</p>
<ul>
<li>A brand new example project</li>
<li>Opinionated project templates</li>
<li>Documentation on modular routing</li>
<li>Updated video walkthrough</li>
<li>Additional behaviours (maybe)</li>
<li>More best practices patterns</li>
</ul>
<h2 id="thank-you">Thank you</h2>
<p>What started as an experiment in seeing whether .NET MAUI navigation could be work the way <em>I</em> thought it should has become something people build real apps with.</p>
<p>Thanks to everyone who has used the library, filed issues, contributed fixes, or quietly built projects on top of it.</p>
<p>SmartNavigation represents the next stage of its life, and I’m excited to build on a cleaner foundation with a proper name.</p>
<p>If you’d like to jump in, the new repo is open and ready.</p>
<p><em>Happy navigating!</em></p>
]]></content:encoded>
      </item>
<item>
        <title>The Specialist Myth: How We Gaslight Expertise</title>
        <link>https://goforgoldman.com/posts/not-a-techie</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/not-a-techie</guid>
        <pubDate>Tue, 04 Nov 2025 01:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/the-specialist-myth.jpg" alt="The Specialist Myth: How We Gaslight Expertise" />
          How the tech industry learned to glorify ignorance, why the myth of the &#39;incomplete specialist&#39; still lingers, and why real leadership means learning both sides of the craft.]]>
        </description>
        <category>leadership</category>
        <category>career</category>
        <category>culture</category>
        <category>software-engineering</category>
        <category>management</category>
        <content:encoded><![CDATA[<p>There's an old myth in the tech industry: deep technical expertise and effective leadership are mutually exclusive. It's a myth that until recently I thought we'd left behind, with only outdated characters in low-grade sitcoms giving it airtime. But recently I heard this myth regurgitated in the context of a conversation between two much-respected professionals, which made me realise that it's still alive and well.</p>
<p><strong>Myth #1: Highly specialised experts can't communicate in everyday language.</strong></p>
<p>During the conversation, one of them remarked that while some of his technical colleagues were exceptionally smart, they lacked the ability to communicate clearly with non-technical stakeholders.</p>
<p>He also went on to say he noticed that no matter what the problem – technical or otherwise – in most cases, his technical colleagues could only think in terms of technical solutions.</p>
<p><strong>Myth #2: Highly specialised experts are shackled by golden hammers.</strong></p>
<p>I've touched on this before, many times, both here and on the <a href="https://www.beerdriven.dev">Beer Driven Devs podcast</a>. It surprises me to see this particular myth persisting - after all, the existence of Domain-Driven Design (DDD) is a direct refutation of both myths.</p>
<p>I've toyed with talking about this myth but as I mentioned, until very recently I considered it a thing of the past. Hearing it mentioned again though, and by such highly respected people, made me realise it's time to call it out once more.</p>
<p>Let's examine why these myths so stubbornly resist their consignment to history. Is it because they describe reality, or is it because they provide comfort to those who feel threatened by that reality?</p>
<h2 id="im-not-a-techie">“I’m not a techie”</h2>
<p>About twenty years ago, I was acting IT manager at a small company. It was a hands-on role, a tiny team, limited resources, the usual chaos. I was young and relatively inexperienced, but capable, communicative, and ambitious.</p>
<p>When the permanent role was advertised, we received quite a few applicants, and despite being advertised as hands-on, a few of the candidates were not from technical backgrounds.</p>
<p>One in particular, who the HR manager had taken a liking to, proudly declared during her interview:</p>
<blockquote class="blockquote">
<p>I’m not a techie.</p>
</blockquote>
<p>I asked - reasonably, in my opinion - how she planned to make decisions about the department without understanding the technology. Her response was that she'd be relying on me for that information.</p>
<p>I'll admit I actually liked her, and in other circumstances would have been happy to work with her. But in that moment, two thoughts flashed:</p>
<p>The first - then why do we need you?
And the second - so  you're effectively saying that you’re going to take credit for my successes and blame me for your failures.</p>
<p>Perhaps that's unfair but it feels like a logical interpretation of the situation.</p>
<p>This isn't unique to tech, nor is it a new problem. We can see examples of this going back decades, if not centuries. But there <em>is</em> a modern twist to it that <em>is</em> unique to IT. (I'll cover this later, but to be fair, and to provide the right context, I <em>do</em> believe this problem is not as prevalent as it once was.)</p>
<p>In other professions, subject-matter expertise is a prerequisite for leadership. Would we appoint a non-medico to a Head of Surgery position? Would someone say &quot;I’m not an accountant but I can manage the heck out of a finance department&quot;?</p>
<p>Whilst in other fields we see expertise as the basis for leadership, in tech, we somehow decided it’s optional.</p>
<h2 id="i-dont-know-and-i-dont-want-to-know">“I don’t know, and I don’t want to know.”</h2>
<p>It seems hard to imagine someone working in any other field proudly declaring ignorance of their domain. But a project manager I once worked with literally employed this as his catchphrase.</p>
<blockquote class="blockquote">
<p>I don’t know, and I don’t want to know.</p>
</blockquote>
<p>He said it often and proudly. He wore it like a badge of honour, as if ignorance was a leadership style. The idea was that he “focused on delivery” while the rest of us worried about “details”.</p>
<p>But the reality is that the details <em>were</em> the work, and when delivery happened on his projects (which was rare), it was <em>in spite</em> of his approach. Just like everyone else in every other profession, the hands-on folks figured out how to work around their constraints.</p>
<p>It’s astonishing how many people mistake detachment for decisiveness. 'Getting things done' isn’t a substitute for understanding what you’re doing. 'Things' are not fungible; you have to actually deliver on your commitments, not the illusion of progress.</p>
<h2 id="the-hands-on-fallacy">The Hands-On Fallacy</h2>
<p>What these anecdotes share is a belief that leadership and expertise are mutually exclusive — that people with technical expertise can’t lead, and people who lead don’t need it.</p>
<p>This is what I call <em>the specialist myth</em> because it's not constrained to tech: the idea that deep technical (in the generic sense) skill comes at the expense of communication, empathy and strategic thinking.</p>
<p>It's bullshit, but for many, it's <em>convenient</em> bullshit.</p>
<p>Convenient because it lets insecure managers claw back relevance and flatters those who lack depth, and because it turns <em>competence</em> into a liability.</p>
<h2 id="the-dot-com-reversal">The Dot-Com Reversal</h2>
<p>You can trace the modern form of this back to the dot-com boom.</p>
<p>Before that, tech was niche. The 'nerds' built things quietly, largely ignored by the business aristocracy. Then the web happened, and suddenly the nerds <em>mattered</em>. Some of them even got rich.</p>
<p>This was a problem. The social hierarchy was out of balance, and that could not be tolerated.</p>
<p>Almost overnight, a new mythological figure formed: the visionary non-technical founder, the 'idea guy', the business mind who made the magic happen while the geeks tinkered in the basement.</p>
<SidenoteContainer >
<p>The most emblematic figurehead of this archetype is probably Steve Jobs.</p>
<p>People love to talk about the delicate balance between Jobs and Wozniak, but even those who acknowledge the importance of both sides often get it wrong. They fail to recognise that Steve Jobs <em>did</em> have <em>profound</em> technical understanding. Even though he wasn't the one writing the code, he understood the technology deeply enough to guide its development, challenge assumptions and push boundaries.</p>
<p>Yes, Jobs brought an aspect to Apple's leadership that it needed, but he wouldn't have been able to do that without understanding the technology at a fundamental level. I'll touch on this more at the end.</p>
</SidenoteContainer>
<p>I remember being in a computer shop 20 or so years ago, probably looking for an IDE cable or a new mouse or something. A well-dressed man (read: suit) in his late 50s walked in and was approached by a shaggy-looking IT nerd manning the floor. When asked if he needed help, the sui said:</p>
<blockquote class="blockquote">
<p>Yes, we’re starting an e-business. What software do I need?</p>
</blockquote>
<p>It seems innocent enough, but coded in that one sentence is a whole layer cake of assumptions we can unpack:</p>
<ul>
<li>He believed he could start an &quot;e-business&quot;, without any idea of what that means</li>
<li>He believed that the <em>technical capability</em> to deliver such a business was something he could walk into a shop and buy off the shelf</li>
<li>He believed that the ability to <em>execute</em> on this must be something that eludes the nerds working in such a shop, requiring a true leader, like himself, to capitalise on.</li>
</ul>
<p>Of course, the cherry on top of that layer cake is my own assumptions - I don't know if any of those things are true. Nevertheless, that line has lived rent-free in my head ever since.</p>
<p>I also remember being acutely impressed by the 'nerd's' handling of that situation. He calmly and professionally answered all of that man's questions, with grace, humility and most importantly, respect. Because odds are, he was a successful small business owner, doing what any half-decent businessperson would do in that situation: talking with a customer, speaking <em>their</em> language, helping them identify their needs and ultimately, if appropriate, selling them a solution.</p>
<p>But even if that's not the case, even if he was a hired employee, the myth still lays in tatters on the floor, well and truly busted. Arguably, more so.</p>
<h2 id="the-psychology-of-relevance">The Psychology of Relevance</h2>
<p>One is reminded of <a href="https://en.wikipedia.org/wiki/Hanlon%27s_razor">Hanlon's razor</a> here, or at least a variant thereof. At its core, this behaviour isn’t driven by malice, but rather insecurity.</p>
<p>When power shifts, when the people who <em>build</em> suddenly hold the leverage, those who previously held it need to reclaim their footing. The easiest way for them to do this is by redefining 'leadership':</p>
<ul>
<li>If you can’t compete on expertise, compete on perception.</li>
<li>If <em>you</em> can’t do the work, reframe the ability to do so as a hindrance.</li>
<li>Knowledge is power, so reframe that knowledge as a burden.</li>
</ul>
<p>Then repeat it until it becomes dogma. And that's what actually happened - this skewed narrative was so often repeated that we collectively accepted it as gospel. It took a long time to undo, which is why I find it so jarring to see it rear its head again, <em>especially</em> from within the technical space.</p>
<h2 id="have-we-grown-past-it">Have We Grown Past It?</h2>
<p>A week ago, I would have said yes. Now I'll hedge that a little and say <em>mostly</em>.</p>
<p>Today, engineers are, by and large, treated with much more respect, even in sales-first organisations. Ten years ago, sales teams were horrified by the idea of letting a tech anywhere near a customer before the ink was dry.</p>
<p>Boy, was that a mistake. I've seen first-hand how that mentality has cost companies, and individuals for that matter. Nowadays, they realise that credibility sells. My head isn't in the sand here - I'm well aware of the real people from whom the myth stems. I've worked with some very sharp people who absolutely <em>should</em> be kept at arm's length from customers, pre- and post-sales.</p>
<p>Not everyone can communicate clearly, and those who can don't necessarily grasp the tech. Not everyone can get to grips with the importance of the intersection between technology, people and business, but that's ok. The point is everyone is different. Skills are individual and are neither correlated nor mutually exclusive.</p>
<h2 id="the-real-cost">The Real Cost</h2>
<p>When organisations separate understanding from decision-making, everyone loses. No, you <em>can't</em> make decisions about deeply technical subjects without at least a fundamental understanding of them. And no, you <em>can't</em> communicate what you don't understand. And, most importantly, you can't build trust by declaring ignorance - and certainly not with pride.</p>
<p>Competence and communication aren’t opposites: they’re parts of the same whole. The best leaders I’ve known are translators - people who grasp the complexity then simplify it without diminishing it.</p>
<SidenoteContainer >
<p>This also works both ways, and I've had to learn this lesson myself. I remember one discussion with HR about a problematic employee, who I described at being good at his job but couldn't start his shifts reliably. She said to me, quite rightly, that this does not sound like the description of someone who is good at their job.</p>
</SidenoteContainer>
<p>The myth of the socially inept specialist has become an unconscious bias, and failure to recognise it is twofold. It can hold you back from using your best resources. Think back to the sales example I mentioned earlier: who is more likely to win a customer, the suave salesperson who thinks they're saying all the right things, or the humble salesperson who brings a technical expert to confidently answer the customer's questions - the questions that <em>matter?</em></p>
<p>Spoiler: that gap widens when those customers ask for references.</p>
<p>Secondly, it costs you at the top line too. Are service delivery managers still a thing? I don't know, I haven't worked in that space for a long time. But I <em>have</em> seen several (this is not an exaggeration) client relationships salvaged by taking them out of the picture.</p>
<p>Real results come from letting all the best people work together - technical experts, domain experts and stakeholders. This is how you deliver results. <em>This</em> is what DDD has been telling us for decades, and the evidence speaks for itself.</p>
<h2 id="the-balance">The Balance</h2>
<p>This isn't about selling technical skills over leadership skills. Because leadership and management <em>are</em> skills, just like coding, architecture or design. If you want to lead and you already have deep expertise in one, you need to learn the other, irrespective of which side you’re starting from.</p>
<p>I’ve seen technical experts fail at leadership. I’ve <em>been</em> one at times. And I’ve seen non-technical leaders succeed - not by glorifying ignorance but by putting in the hard yards to learn the fundamentals of the craft.</p>
<p>If you're a technical expert or a highly specialised <em>doer</em> and you want to lead, you have to fill in <em>that</em> skills gap. If you're a <em>leader</em> and you want to manage highly specialised individuals or technical experts, you've got some homework to do.</p>
<p>Respect cuts both ways. The best teams are built on humility not hierarchy, where those who <em>know</em> teach those who lead, and those who lead never stop learning.</p>
<p>But the specialist myth? Let's not revive that. It needs to stay dead and buried. At the risk of oversimplifying, whoever you are, you've probably got some incredible, unique and valuable skills. Let's focus on evangelising those, without disparaging the skills of others.</p>
<p><em>References and further reading:</em></p>
<ul>
<li><a href="https://www.goodreads.com/book/show/33369254-the-manager-s-path">Camille Fournier – <em>The Manager’s Path</em></a></li>
<li><a href="https://www.noidea.dog/glue">Tanya Reilly – <em>Being Glue</em></a></li>
<li><a href="https://resilient-management.com/">Lara Hogan – <em>Resilient Management</em></a></li>
</ul>
]]></content:encoded>
      </item>
<item>
        <title>Visual Studio’s Future: It’s Time to Move Beyond .NET Framework</title>
        <link>https://goforgoldman.com/posts/jurassic-studio</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/jurassic-studio</guid>
        <pubDate>Sun, 14 Sep 2025 00:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/jurassic-studio.png" alt="Visual Studio’s Future: It’s Time to Move Beyond .NET Framework" />
          Visual Studio is getting its first major update in four years - but it&#39;s still anchored to the past.]]>
        </description>
        <category>.NET</category>
        <category>dotnet</category>
        <category>Visual Studio</category>
        <category>Modernisation</category>
        <content:encoded><![CDATA[<h2 id="introduction">Introduction</h2>
<p>With the announcement of the new insiders build of Visual Studio 2026, I’ve been thinking a lot recently about a big question that's been bugging me for years: why is there <em>still</em> no macOS version?</p>
<p>Of course, I know the answer - it's because the shell is still running .NET Framework. It's built in WPF and tied to Windows - while much of the &quot;guts&quot; of the project have been modernised, <em>this</em> part remains on .NET Framework, and is likeley the thing that, even 10 years on from .NET Core, is keeping .NET Framework on life support.</p>
<p>The question is, why?</p>
<p>As it happens, I saw a post on LinkedIn this morning (which in turns shared a screenshot of a tweet) about this very question, and I started to write a comment. But, the comment turned into a long rant, and at that point I figured it probably deserved its own blog post.</p>
<p>Obviously there are much smarter people than me working on this, as well as reams of background and inside information that I have no clue about. But, as a fun thought experiment, here's what I would do, if I were running this show.</p>
<h2 id="context-whats-the-problem-exactly">Context - what's the problem exactly?</h2>
<p>The main thing holding Visual Studio back is the extension ecosystem. The IDE hosts decades of code and, more importantly, an enormous extension ecosystem. Thousands of extensions, from Microsoft’s own tooling to third-party add-ons, run in-process with the IDE. They rely on COM services, synchronous APIs, and UI thread affinity that only exist in the .NET Framework-based shell.</p>
<p>Moving the shell to modern .NET would break almost all of them. A wholesale rewrite would detonate the ecosystem, which is why Microsoft has focused on an out-of-proc extensibility model instead. That model runs on modern .NET but doesn’t yet cover every scenario. Until extension authors port their work (and until Microsoft closes the gaps) the IDE shell stays stuck on Framework.</p>
<p>This explains why the shell hasn’t moved. But it doesn’t mean it should stay that way forever.</p>
<h2 id="set-a-date">Set a Date</h2>
<p>If I were running it, I’d have announced a 5-year end-of-life for the .NET Framework VS shell. And I've have done it <em>at least</em> five years ago.</p>
<p>Don't go running for the pitchforks just yet! I'll come back to this.</p>
<h2 id="a-migration-tool-is-a-key-enabler">A Migration Tool is a Key Enabler</h2>
<p>Understandably, the question of how to move thousands of extensions forward without burning everything down is not one that can be considered lightly, but one thing that <em>could</em> help is a migration tool.</p>
<p>It wouldn’t solve every problem, but it could do a lot, e.g.:</p>
<ul>
<li>Analyse extensions and flag Framework-only APIs or UI-thread assumptions</li>
<li>Scaffold a new out-of-proc extension project on modern .NET</li>
<li>Provide shims and stubs for common patterns like tool windows, services, and MEF parts</li>
<li>Generate reports with effort estimates, blockers, and checklists</li>
</ul>
<p>Granted, this isn’t a silver bullet, but it's not about waving a magic wand, it’s about lowering the barrier so extension authors have a realistic path forward.</p>
<h2 id="microsofts-role">Microsoft’s Role</h2>
<p>With the right tooling in place, Microsoft could make the transition achievable:</p>
<ul>
<li>Publish an official compatibility matrix and sample extensions</li>
<li>Ship Analyzers and automated code-fixes to handle the common cases</li>
<li>Provide a brokered UI toolkit for building tool windows without depending on in-proc WPF/WinForms</li>
<li>Announce staged deprecations tied to specific VS versions, so everyone has a clear roadmap</li>
</ul>
<p>This combination of carrots and clear deadlines would send a strong signal that the future of Visual Studio is modern .NET.</p>
<h2 id="compatibility-options">Compatibility Options</h2>
<p>Perhaps something that could speed things along is a limited compatibility shim; a proxy host that runs legacy extensions out-of-proc with a restricted surface, plus telemetry and performance warnings.</p>
<p>Honestly, though, I don't know if this is even feasible. If it were trivial, it would certainly exist already. But even a partial shim for the most common patterns could smooth the transition for the ecosystem.</p>
<p>Again, I'm not sure how feasible this is, but it's something I would want on the table, and at least invest a spike or two into.</p>
<h2 id="the-elephant-in-the-room-the-blast-radius">The Elephant in the Room: The Blast Radius</h2>
<p>It's not just Visual Studio extensions, but tools built on top of it that would be impacted.</p>
<p>No doubt there are teams out there who depend on extensions - and not just extensions, or other tools built on top of Visual Studio - that may never be upgraded. Sometimes (often?) even running critical business processes. I know this represents a serious problem for them; but, to be honest, <em>good!</em></p>
<p>Yes, the blast radius would be huge. But let’s be honest: five years is an <em>eon</em> in software modernisation. The longer Microsoft avoids putting a date on it, the harder the transition will be. And the more painful it gets.</p>
<p>Here’s the thing - it's not a technology problem, it's a business problem, and it's one you <em>should</em> be losing sleep over. If you're one of those teams, desperate to modernise but held back by &quot;if it ain't broke, don't fix it&quot; purse-string holders or industry dinosaurs, go full Chicken Little. Tell your CFO you need funding to make your whole infrastructure not terrifying.</p>
<p>Because depending on unsupported tools, frankly, <em>is</em> teerrifying. And it’s leadership who should lose sleep over it, not engineers.</p>
<h2 id="legacy-isnt-going-anywhere">Legacy Isn’t Going Anywhere</h2>
<p>Look, I get it. No matter what, there's going to be legacy stuff that will never get upgraded. And even in a modernisation project, it still needs to be supported, some of it for a long time, while you filter out onto your newer platform.</p>
<p>But moving Visual Studio forward doesn’t mean ripping away support overnight. Nobody is forcing you to uninstall older versions of Visual Studio (well, maybe your CISO, but if that's the case they'll likely support this move).</p>
<p>Legacy workloads could stay on old versions of Visual Studio, but new workloads would move to a shell built on modern .NET.</p>
<p>That’s how the ecosystem evolves without leaving anyone completely stranded.</p>
<h2 id="closing">Closing</h2>
<p>It's time to rip the band-aid off.</p>
<p>I know MSDN isn't the cashcow it once was, but even so, Visual Studio is stuck in the past while VS Code and Rider are eating its lunch.</p>
<p>Set the date, ship the tooling, and let the ecosystem move.</p>
<p>Who'd have thought: centuries from now, when aliens start digging through the post-apocalyptic rubble, that the two surviving relics they'd find from the Anthropecene would be - Nokia phones, and .NET Framework Visual Studio 🤦</p>
]]></content:encoded>
      </item>
<item>
        <title>The world&#39;s most boring static site generator</title>
        <link>https://goforgoldman.com/posts/why-blake</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/why-blake</guid>
        <pubDate>Thu, 21 Aug 2025 00:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/blake.png" alt="The world&#39;s most boring static site generator" />
          The world didn&#39;t need a new static site generator, but I did. This post is a candid reflection on my frustrations and the motivation behind building Blake, a deliberately simple, boring, and personal Blazor-based SSG that just works. No arcane syntax, no wasted time, just Markdown and Razor.]]>
        </description>
        <category>web</category>
        <category>blogs</category>
        <category>blake</category>
        <category>static site generators</category>
        <category>ssg</category>
        <category>blazor</category>
        <category>.net</category>
        <content:encoded><![CDATA[<p>I love learning new things. Every day is a struggle to not dive deep into some cool new concept or technology, I've got so much to do and keeping my attention focused is a never ending battle.</p>
<p>And that's the problem. I have to be brutally honest with myself - I'm <em>never</em> going to get through my backlog of side projects. Not in one lifetime anyway (should I add fixing that to my backlog? Nah...) That means that my time is my most precious resource. It's the ultimate non-renewable, and that means I protect it more fiercely than any other.</p>
<p>This can often leave me feeling frustrated - while I do love learning new things, when having to learn something new becomes a barrier to accomplishing something else, that's often just part of life (and part of the fun). But at other times, it can become a source of rage inducing frustration, and a long term source of this, for me, has been static site generators.</p>
<h2 id="whats-your-problem-with-ssgs">What's your problem with SSGs?</h2>
<p>Look, I'm not bashing Ghost, or Jekyll, or Gatsby, or Hugo, or whatever. They're awesome. They are undeniably wonderful accomplishments and have justifiably devoted followers. But for me, they just get in my way.</p>
<p>Take this blog for example. It started out on one (honestly I forget which), then moved to another, and most recently, prior to my latest update, it was running on Jekyll. They've all been good and served me well, but if I'm honest, they have frankly prematurely aged me as well.</p>
<p>Take Jekyll. It's fine, honestly. For many people I'm sure it does the job. Actually, for me, too, it's been mostly problem free. But I have sunk hours into it over pointless problems. And admittedly these problems are not insurmountable, but they require commitment to learning things which have absolutely zero utility to me outside of maintaining my blog. That, for me, is not a valuable investment of my most precious resource. Let me walk you through a typical and recurring problem.</p>
<h2 id="writing-a-blog-post">Writing a blog post</h2>
<p>Writing a new blog post is a bread-and-butter, typical, standard affair that should be painless. Right? Here's how it usually goes for me. I open VS Code, switch to main if not already there, pull, create a new branch, add a markdown file, and start writing. Simple, right?</p>
<p>Yeah, no problem. Until I want to add a callout, or sidebar, or something like that. Ok this should be simple enough... it's something like this:</p>
<pre><code class="language-markdown">&gt; This is a callout
{: prompt-info }
</code></pre>
<p>Ok not too bad. I have to do a quote, then use that prompt thing underneath. Not the end of the world. Until I publish the page and it looks like this:</p>
<p><figure><img src="/images/posts/liquid-callout-screenshot.png" alt="Screenshot of how a callout renders when I get something wrong in the syntax"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">Screenshot of how a callout renders when I get something wrong in the syntax</figcaption></figure></p>
<p>So what went wrong here? Well, it depends. I get this wrong <em>every</em> time, one way or another. Did I do something wrong with the quote? Should it be an underscore and not a hyphen? Should it have a colon at both ends?</p>
<p>Who knows?</p>
<p>More importantly, who <em>cares</em>?</p>
<p>And, honestly, this is just scratching the surface. What if I want multi-line callouts? Or what if I want callouts partway through numbered lists? These are not hypotheticals, these are real things that have happened (among many more) that have broken my blog and cost me hours. <em>Hours</em>.</p>
<NoteContainer title="Why not just use snippets?">
<p>Yeah, yeah...</p>
</NoteContainer>
<p>Honestly, I'm sure people love liquid syntax, and I'm sure it's with good reason. But for something that requires so little of my time to use, the disproportionate frustration it causes me is mind boggling. And the amount of time and effort I would have to put in to mastering it may seem valuable in the face of the frustration it would resolve, but I would much rather just remove the frustration.</p>
<h2 id="previewing-content">Previewing content</h2>
<p>The small problem highlighted above is just one example. It's actually probably my most common issue, but it's not the only one. And given the unreliability of my own skill with the templating engine, it's critical that I spin up my blog locally to check through what a post looks like before publishing.</p>
<p>Yeah, I don't do that.</p>
<p>Seriously, look at this:</p>
<p><figure><img src="/images/posts/fix-prompts-commits.png" alt="Screenshots of multiple rapid pushes direct to main, fixing frustrating minor rendering problems"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">Screenshots of multiple rapid pushes direct to main, fixing frustrating minor rendering problems</figcaption></figure></p>
<p>I'm not kidding, the number of times I have rapidly fired off multiple commits directly to main, because I've had to let my workflow publish the site, then I frantically force refresh to make sure it's rendering properly now. Oh, it's not? Ok, pour a scotch, tweak that or whatever, push again, still not working...question life choices, pour another scotch, rinse and repeat ad nauseam... oh, wow, <em>finally!</em></p>
<p>There has to be a better way. In fact, it was while pushing those very commits you see above that I asked myself that same question. Why the heck am I not just running this locally before publishing it?</p>
<h2 id="running-locally">Running locally</h2>
<p>So I scoured the depths of my brain for how to run my blog. It had been a while, but I remembered that I have to basically just run <code>jekyll serve</code>. So I opened my terminal and navigated to my blog folder and ran it.</p>
<p><figure><img src="/images/posts/jekyll-serve-nope.png" alt="Running jekyll serve just errors and says the term 'jekyll' is not recognised"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">Running jekyll serve just errors and says the term 'jekyll' is not recognised</figcaption></figure></p>
<p>Uh, nope. I guess that's not it. A quick check of <a href="https://jekyllrb.com/docs/usage/">the docs</a> though tells me that, actually, that <em>is</em> correct. Well, better go back to the <a href="https://jekyllrb.com/docs/">quick start</a> and check I've got everything set up then...ah, wait, yeah that's right, I have to run <code>bundle exec jekyll serve</code> (whatever the heck that means). Ok let's try that...</p>
<p>...you know what? I'm not going to bore you with the details. But needless to say, after at least a couple of hours of crawling through Ruby rabbit holes (again, I'm sure people love Ruby, but I don't use it for anything else), gem version conflicts, and god knows what else, I eventually <em>finally</em> got it running in a container. Let me just say that again - I had to use docker to get my blog to run. So, back to my question:</p>
<blockquote class="blockquote">
<p>Why the heck am I not just running this locally before publishing it?</p>
</blockquote>
<p>Oh, yeah. That's why.</p>
<p>I knew there was something wrong about committing and pushing to main. I knew there was something wrong about not previewing before publishing. But I'd obviously forgotten about the hassle of literally just running the thing, and no doubt I'll file that memory away somewhere until I hit this problem again another year from now. (That won't happen now, thankfully, which is the point of this post).</p>
<h2 id="what-about-other-ssgs">What about other SSGs?</h2>
<p>I mentioned at the start that I'd tried others, and they all have similar problems. And not just this one - they <em>all</em> have their own templating syntax and logic, configuration, conventions...I'm not criticising, as I said these are impressive tools and I know people love them, and with good reason. But having to learn about <code>_layouts</code> and <code>_partials</code>, TOML files, site configuration...it's too much. Honestly, it's enough to make me want to go back to WordPress.</p>
<p>...but then of course I remember how that's its own set of problems. Switching between blogging platforms, I can't help but remembering Gabriel Byrne's classic line in <em>Stigmata</em>(1999)</p>
<blockquote class="blockquote">
<p>Basically, what I've done is I've exchanged one set of complications for another.</p>
</blockquote>
<p>Like I said, I've got other things to do. I'm tired. Honestly, most of the time I feel like Ynyr from <em>Krull</em> (1983), desperately scrambling to finish my urgent task as I feel the sands slipping through my fingers, counting down the infinitesimal speck of time I have left in this world.</p>
<p>Those other SSGs are awesome. Until they're not. And yes, that's not a problem with them, it's a problem with me. But it's a problem I don't have time for.</p>
<p>And that's not even counting the other major problem I have with static site generators, and that's timed releases.</p>
<p>One thing you have to accept with a static site, when compared to a served site with a CMS, is that, once you publish it, that's it. There it is. That's a trade-off, and a more than acceptable one, but it does mean you can't do things like schedule a post to go live. It's not really that big a deal, it's a minor inconvenience - a papercut - but it's one that, when it happens frequently, is annoying enough to matter. And it's a problem I no longer have.</p>
<h2 id="and-thats-why-i-built-the-worlds-most-boring-static-site-generator">And that's why I built the world's most boring static site generator</h2>
<p>Right now, you're reading a site that was built with <a href="https://github.com/matt-goldman/blake">Blake</a>, the world's most boring SSG. And, yes, I built it. And, yes, I spent a fair bit more time on it than I would have spent solving those other annoying issues.</p>
<p>But the value of building something new far outweighs the value of solving problems that have no intrinsic knowledge-gaining value. And non-reinforced skills are perishable, so I don't really learn anything anyway. I have to re-learn (most of) it every time.</p>
<p>Blake is built in .NET and is fundamentally a Blazor based tool. Is it better than other SSGs? That depends on your perspective. And the answer is, unquestionably, no. But also, unquestionably, yes.</p>
<p>But none of that matters. What matters is it's better for <em>me</em>. If &quot;better&quot; to you means a granular configuration capability then, no, Blake is not better. It's boring, it doesn't do anything like that. It works on the premise of one, simple, convention, and that's it.</p>
<p>But that's the point. Boring is a feature, and more than that, for me it's the <em>killer</em> feature. It's predictable, it &quot;just works&quot;.</p>
<p>Does it do a whole bunch of other stuff?</p>
<p>No.</p>
<p>Thankfully, beautifully, <em>mercifully</em>, no.</p>
<p>Blake is fundamentally nothing more than a Markdown to Razor parser (built around a <a href="https://github.com/xoofx/markdig">Markdig</a> pipeline).</p>
<h2 id="sounds-terrible.how-does-it-work-then">Sounds terrible. How does it work then?</h2>
<p>Ok, admittedly it doesn't do much. But, as I said, that's the point.</p>
<p>Thinking about the things that I got fed up with, I wanted something that didn't make any assumptions, that didn't make any demands, that seamlessly dovetailed into the tools and workflows I already use.</p>
<p>The simple explanation is this:</p>
<ol>
<li>You have a folder that contains a file called <code>template.razor</code>.</li>
<li>In that folder you have a Markdown file (or files).</li>
</ol>
<p>That's it. That's literally it.</p>
<p>There's a bit more nuance to it than that, but the nuance doesn't alter that, it just builds on it (and even then only slightly). I thought about all the frustrating things I get annoyed with and asked myself a bunch of stupid questions. Because stupid questions are the most powerful tool we have. Stupid questions are where innovation comes from.</p>
<p>Let's look at some of the questions I asked myself when pondering whether to build this:</p>
<h3 id="how-will-you-handle-templating">How will you handle templating?</h3>
<p>I won't. Why would I? Razor is already a templating engine. I already know Razor and HTML, why learn or invent something else?</p>
<h3 id="how-will-you-let-users-define-site-structure-and-navigation">How will you let users define site structure and navigation?</h3>
<p>I won't. Why would I? Directories are already a way of organising that kind of hierarchy. Why would I invent something else?</p>
<p>...I'm sure you can see the pattern emerging here. The point is I didn't want to invent solutions for things we already have solutions for. I just wanted to be able to write blog posts in Markdown and have them render reliably. And that's what Blake gives me.</p>
<p>Let's look at the example I started out with - callouts. Let's take a look at how I had to do that in my previous Jekyll &quot;theme&quot; (you can see why I put that in quotes <a href="https://blake-ssg.org/2%20using%20blake/sitetemplates">here</a>):</p>
<pre><code class="language-markdown">&gt; This is a callout
{: prompt-info }
</code></pre>
<p>Is this the &quot;official&quot; way to do this in Jekyll? Well, no. In Jekyll you define your <code>_includes</code> and can add them to your content using this Liquid syntax. The author of the template I was using just happened to call them prompts.</p>
<p>What about Hugo? Well that does have a slightly more standardised way.</p>
<pre><code class="language-markdown">{{&lt; alert info &gt;}}
This is a callout
{{&lt;/ alert &gt;}}
</code></pre>
<p>Actually this isn't <em>entirely</em> standard. I got this from the <a href="https://mafelp.github.io/hugo-bootstrap-shortcodes/">Hugo Bootstrap shortcodes</a>. But that's for the specifics; the <em>approach</em>, at least, of using these &quot;shortcodes&quot; is standard for Hugo. Looking at the Hugo docs you can actually get quite explicit. Look at <a href="https://gohugo.io/shortcodes/figure/">this example</a>:</p>
<pre><code class="language-markdown">{{&lt; figure
  src=&quot;/images/examples/zion-national-park.jpg&quot;
  alt=&quot;A photograph of Zion National Park&quot;
  link=&quot;https://www.nps.gov/zion/index.htm&quot;
  caption=&quot;Zion National Park&quot;
  class=&quot;ma0 w-75&quot;
&gt;}}
</code></pre>
<p>According to the above linked page this would get rendered into HTML as follows:</p>
<pre><code class="language-html">&lt;figure class=&quot;ma0 w-75&quot;&gt;
  &lt;a href=&quot;https://www.nps.gov/zion/index.htm&quot;&gt;
    &lt;img 
      src=&quot;/images/examples/zion-national-park.jpg&quot; 
      alt=&quot;A photograph of Zion National Park&quot;
    &gt;
  &lt;/a&gt;
  &lt;figcaption&gt;
    &lt;p&gt;Zion National Park&lt;/p&gt;
  &lt;/figcaption&gt;
&lt;/figure&gt;
</code></pre>
<p>Although that's so verbose it makes you wonder why you wouldn't just write the HTML in your Markdown directly. Which is fully supported.</p>
<h2 id="well-what-makes-blake-so-special">Well what makes Blake so special?</h2>
<p>You might be tempted to ask, &quot;ok well how do <em>you</em> handle callouts?&quot; (by the way 'callouts' is also not a standard term here; on the web they tend to be called 'alerts'). But if you think back to my earlier questions, I'll give you the same style of answer.</p>
<p>I won't. Markdown <em>already has an idiomatic convention for this</em>. Why would I invent something else?</p>
<p>Granted, Markdown is only a baseline standard, and there are different &quot;flavours&quot;. But most implementations support <em>custom containers</em>. These are not part of the official Markdown specification (in fact there isn't one per sé), but they are ubiquitous, and that makes them the <em>de facto</em> standard.</p>
<p>You've probably seen them, they look like this:</p>
<pre><code class="language-markdown">::: info
This is a callout
:::
</code></pre>
<p>In Blake, <em>that's</em> how you do it. Is it better? Arguably, but that's not the point. The point is, I'm writing Markdown, Markdown has a way of doing it, therefore, as a Markdown tool, Blake expects you to do it that way. Not a bespoke, custom, arcane syntax.</p>
<TipContainer title="Default Renderers">
<p>Granted, you still have to provide a way to render that in your template. That's no different in Blake than it is in other SSGs, but Blake <em>does</em> include &quot;default renderers&quot;. These are container renderers for the common &quot;callouts&quot; (as I've referred to them) that you might want to include (like <code>tip</code>, <code>info</code>, etc.). These use standard Bootstrap alerts, because Bootstrap is the default CSS framework that you get with the Blazor WASM template. But you can turn these off easily if you want to provide your own (that's what I do on this site). You can see more <a href="https://blake-ssg.org/2%20using%20blake/components#default-container-renderers">here</a> in the docs.</p>
</TipContainer>
<h2 id="but-wait-theres-more">But wait, there's more...</h2>
<p>...but I don't want to go through all that now. The point is, with Blake, you don't have to <em>do</em> anything. Of course, you can, but you don't have to. It's a CLI tool that generates Razor pages using Markdown content based on a template. And that's it.</p>
<p>There's no config, no special syntax, no domain specific language, in fact there's nothing outside the realm of what your content language (Markdown) and your <em>site's</em> templating language (Razor) already want.</p>
<p>If you want to do more with Blake, you can. I knew I would need to right from the start, so I made it <a href="https://blake-ssg.org/2%20using%20blake/usingplugins">extensible through plugins</a>. Plugins aren't unique to Blake, other SSGs support them too. In Blake they work the way you would expect them to in a Blazor site (as nuget packages or project references), but I suppose if there's one thing I did differently, it was the decision that the Blake core would non-negotiably do <em>nothing</em> other than baking Markdown into Razor. Granted, there is tooling wrapped around it, but that tooling is there purely to support that core functionality.</p>
<p>There <em>are</em> some cool features I have planned for Blake, things that <em>would</em> make it stand out as an attractive SSG compared to others. You can see them under the issues tab in the repo, but they're all based on the assumption that other people want to use it.</p>
<p>Right now, I don't know if anyone else ever will. And if it just ends up being me, it will <em>still</em> have been worth it. Because while I may not want to spend time learning things that are getting in my way, I'm a full-time .NET developer, so no .NET side project is wasted. And besides that, I now have a SSG that I can use and re-use, I can easily customise, I'll <em>never</em> have to churn through docs or old posts to see how to do some weird thing. I can drop in arbitrary Razor components if I want (this is something I can't do with <em>any</em> other SSG), I'll never have frustrating build chain issues.</p>
<p>It just works. Well, it works for <em>me</em>. And that's all that matters.</p>
<p>But, if you're curious, why not give it a try?</p>
<pre><code class="language-bash">dotnet tool install -g Blake.CLI
blake new --includeSampleContent
</code></pre>
<p>Have a poke around. It doesn't bite. But if you want it to, you could write a plugin for that.</p>
<h2 id="still-a-work-in-progress">Still a work in progress</h2>
<p>Blake isn’t finished, and I don’t know if it ever will be. There are rough edges, things I want to polish, and some cool stuff I'm keen to introduce - some for me, some for if anyone else ever decides to use it. So check it out and let me know what you think. And if you have comments, suggestions, general feedback, or even want to contribute in some way, well obviously I would love that.</p>
<p>But, most importantly, if you’re interested or curious, or even slightly annoyed by other SSGs, just take a look. It might be a fit for you, it might not. But, <em>please</em>, stop sinking your time into unimportant things. I won't lie and say I built Blake in a weekend. My days of having weekends free for working on something like that are far behind me. <em>Could</em> I have? Maybe. But that's not really the point. The point is, I wasn't happy with the options I had available, and I decided to not just accept what was out there already.</p>
<p>And you don't have to either.</p>
]]></content:encoded>
      </item>
<item>
        <title>First things first</title>
        <link>https://goforgoldman.com/posts/first-things-first</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/first-things-first</guid>
        <pubDate>Wed, 06 Aug 2025 00:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/ftf.png" alt="First things first" />
          Thoughts on optimizing morning productivity by rethinking meeting schedules and the timing of daily standups to protect deep work time.]]>
        </description>
        <category>productivity</category>
        <category>scrum</category>
        <category>agile</category>
        <category>meetings</category>
        <content:encoded><![CDATA[<p>I'm most productive in the mornings. Always have been. It seems counter to most people's habits, but that's when my brain is sharpest.</p>
<p>But this seems to be a problem. Why? Because all my meetings are in the mornings. And not just one big chunk - they're scattered. Two or three meetings with short gaps in between mean those gaps are effectively lost time. You can't sink your teeth into serious work in a 15-minute window between calls. You're in limbo, checking emails, responding to Teams messages. Circling but never landing.</p>
<InfoContainer >
<p>Some people think, “It's just 15 minutes.” But it's never just 15 minutes. Context switching has a cost. Those short gaps become mental sinkholes.</p>
</InfoContainer>
<h2 id="the-daily-standup-is-it-a-productivity-killer">The daily standup: is it a productivity killer?</h2>
<p>Funny thing: I treat those small gaps as rest time, not work. It's the only way to stay sane. And that's fine, but what I really wish is that I could spend mornings on deep, core output, and leave meetings for the afternoons.</p>
<p>Take the daily standup. In theory, it's meant to be quick alignment first thing, get blockers out of the way, and then everyone disappears to build value. But too often, I see teams push it to 10:30 or 11. This is a death blow to focus.</p>
<p>Worse, late dailies encourage “wait for tomorrow's standup” behaviour. If you have a question, send an email. I personally open Outlook twice a day now - once in the morning, and once after lunch. It's a new habit that's done wonders for my focus. If it's truly urgent, call me. We have tools for that.</p>
<p>But in my view, the standup should happen first thing or not at all. If it can't happen early, skip it. Period.</p>
<p>The daily isn't a ritual to be preserved at all costs. If you get to 10:30 and no one has anything urgent, just skip it. If someone <em>does</em> need something, tag the relevant people, and spin up a quick call. It's 2025, not 2005. We have tools to communicate asynchronously. We don't need to force everyone into a meeting just because it's on the calendar.</p>
<p>The meeting serves the team, <em>not</em> the other way around.</p>
<h2 id="scrum-isnt-the-problem">Scrum isn't the problem</h2>
<p>People love to blame Scrum for endless meetings and lost productivity. But when I hear “Scrum ruined my mornings,” I know they're not really doing Scrum.</p>
<p>In actual Scrum, you have:</p>
<ul>
<li>One daily standup, short and sharp.</li>
<li>Sprint planning, review, and retrospective once per sprint, scaled to the sprint length.</li>
</ul>
<p>That's it. No daily manager catch-ups. No status theatre. No mid-morning interruptions.</p>
<p>In a Scrum team, everyone is dedicated. The team is the atomic unit. You don't have external people drifting in and out, dictating when ceremonies happen. Yet so often, someone chimes in: “I can't do 9am, I have a conflict.”</p>
<p>Guess what? If you have a conflict, you're not dedicated. And if you're not dedicated, you shouldn't get to dictate the schedule for those who are.</p>
<p>First things first: the team needs the meeting out of the way, so that they can get on with the real work (yeah, I said it). The team is the priority, not the individual. If you can't make it, that's your problem, not the team's.</p>
<h2 id="makers-vs-managers-the-tug-of-war">Makers vs managers: the tug-of-war</h2>
<p>Paul Graham nailed it with the <a href="https://www.paulgraham.com/makersschedule.html">“maker's schedule, manager's schedule”</a> essay.</p>
<p>Managers slice their days into 30-minute or 1-hour blocks. Makers need long, uninterrupted stretches. When managers inject meetings into a maker's morning, or afternoon for that matter, they steal the highest-value focus hours, and it ripples through the rest of the day. Makers work in half-day blocks, not 30-minute chunks.</p>
<p>When managers don't understand this, they create an environment that feels like it devalues productivity. And while productivity to them is attending meetings, for makers, it's about creating value through deep work.</p>
<p>What happens? Makers push back. Managers tighten control. Makers pull further. Managers respond with more meetings and oversight. The result? People blame Scrum, Agile, or whatever framework is in place. But, with one very notable exception (which we'll see next), the framework isn't the problem. These issues arise from misuse of these frameworks, but more importantly, from a misalignment on what constitutes productivity, and what work creates value.</p>
<h2 id="the-great-safe-tragedy">The great SAFe tragedy</h2>
<p>Nowhere is this dysfunction clearer than in SAFe. SAFe is an unmitigated monstrosity that should be cast into the fires of Hades.</p>
<p>It's a framework designed to create complexity so it needs people to manage that complexity. It exists to justify the careers of middle managers and process jockeys, who don't actually do the work, but claim to ensure it happens.</p>
<p>SAFe is the very embodiment of “we don't trust you to work without oversight.” It standardises, instead of adapting. It solves a problem that shouldn't exist by adding a hierarchy that shouldn't exist.</p>
<p>It's the vestigial death cry of Waterfall, desperately trying to cling to relevance in an Agile world. SAFe is in fact the antithesis of Agile principles, which value individuals and interactions over processes and tools. And above all else, it's a self-fulfilling prophecy of dysfunction.</p>
<p>I will not work in a SAFe organisation. Full stop.</p>
<h2 id="even-great-teams-drift">Even great teams drift</h2>
<p>Here's the caveat: even the most disciplined teams can lose focus. Even the most driven developers (myself included) fall into traps.</p>
<p>This doesn't mean we need meetings for everything. It means we need sensible guardrails. Scrum provides those guardrails - not by adding more layers, but by enforcing transparency and accountability in a lightweight way.</p>
<h2 id="you-cant-be-a-scrum-master-of-multiple-teams">You can't be a Scrum Master of multiple teams</h2>
<p>I'm sorry, you just can't.</p>
<p>A true Scrum Master is dedicated to one team. They aren't a manager. They're a facilitator, protector, and coach.</p>
<p>When someone tries to “manage” multiple Scrum teams, they're no longer a Scrum Master. They become an overhead resource, floating between contexts, unable to serve any team properly.</p>
<p>Scrum solves this by design. But it requires maturity and discipline to uphold it.</p>
<h2 id="first-things-first">First things first</h2>
<p>First things first - dedicated teams need protected time. Don’t let someone else’s lack of focus dictate yours. If you can't run your daily first thing in the morning, question whether you need it at all. Protect your mornings. Defend your focus like it's your most precious resource. Because it is.</p>
]]></content:encoded>
      </item>
<item>
        <title>Beer-Driven Downloads &amp; Microinteractions in .NET MAUI</title>
        <link>https://goforgoldman.com/posts/bdd-app-downloads</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/bdd-app-downloads</guid>
        <pubDate>Sat, 12 Jul 2025 00:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/bdd-downloads-cover.png" alt="Beer-Driven Downloads &amp; Microinteractions in .NET MAUI" />
          Exploring creative download progress microinteractions in .NET MAUI, from basic modals to engaging beer-fill animations that enhance user experience.]]>
        </description>
        <category>mobile</category>
        <category>maui</category>
        <category>ui</category>
        <category>ux</category>
        <category>microinteractions</category>
        <content:encoded><![CDATA[<h2 id="intro">Intro</h2>
<NoteContainer >
<p>This post is part of the <a href="/posts/mauiuijuly-25">MAUI UI July</a> event, where community members share their passion for .NET MAUI UI. Check out the link for more great content!</p>
</NoteContainer>
<NoteContainer title="Note 2">
<p>I wouldn't normally suggest this, but just scroll to the end and watch the video (the last one). Then come back and read the post. It's a lot more fun that way, trust me!</p>
</NoteContainer>
<p>Microinteractions have become a huge UI trend in 2025, and for good reason. They're not just fancy visual flourishes; they enhance usability, communicate state, and make experiences more human. I recently encountered a scenario in a client project that needed exactly this: a way to show download progress for content in an expressive and meaningful way.</p>
<p>The app is a content library (podcasts and journals) that users can access online, but can also download content for offline use. Downloads happen silently in the background, which is problematic for a few reasons, so I've been thinking about better ways to handle this.</p>
<p>It's on the backlog for this particular app (we've got a prioritised roadmap), but this is actually something I've wanted to explore for a while. And, as it happens, I've got another app that also handles podcast episode downloads I've been wanting to build for a while: the <a href="https://www.beerdriven.dev">Beer Driven Devs</a> mobile app. So, despite <a href="https://www.beerdriven.dev/hosts#Liam%20Elliott">Liam</a>'s misgivings (he doesn't really approve of the app idea), I decided to take the idea beyond the drawing board. The Beer Driven Devs app offers the perfect playground for this exploration, as it has a fun, lighthearted theme that allows for some creative freedom in how we present download progress.</p>
<p>Let's take a look at how we can implement some fun and engaging download progress microinteractions in .NET MAUI, using the Beer Driven Devs app as our example.</p>
<h2 id="how-does-the-app-work">How does the app work?</h2>
<p>The full source code is available on GitHub - see the link at the bottom of this post. The app is built using .NET MAUI, and uses my go-to tools for any new .NET MAUI app:</p>
<ul>
<li>The <a href="https://learn.microsoft.com/dotnet/communitytoolkit/maui/">.NET MAUI Community Toolkit</a> for common UI controls and helpers</li>
<li>The <a href="https://learn.microsoft.com/dotnet/communitytoolkit/mvvm/">MVVM Community Toolkit</a> for MVVM support and source generators</li>
<li>My <a href="https://github.com/matt-goldman/Maui.Plugins.PageResolver">PageResolver library</a> for easy navigation and automatic dependency registration</li>
</ul>
<p>The Beer Driven Devs website has an RSS feed that's consumed by Apple and Spotify to host the episodes, so the app simply pulls that feed to get all the episode data. So no dedicated backend required - yet! (I'll need to add that later, as well as auth, for the community features, but that's another story.)</p>
<p>The app will allow streaming episodes (using the <code>MediaElement</code> control in the MAUI Community Toolkit), but I also want to allow users to download episodes for offline listening. This is where the download progress microinteractions come in. Let's explore how we can implement these in a fun and engaging way.</p>
<p>Throughout all levels, the core download state visuals remain: dimmed thumbnails and gray icons before download; full-color thumbnails, green icons, and a trash icon once downloaded. These small touches ensure users always know what’s ready offline.</p>
<h2 id="level-0-the-classic-modal">Level 0: The Classic Modal</h2>
<p>As a minimum, we need to include some visual cues that indicate the state of episodes to the user: thumbnails are dimmed and the download icon uses the app's secondary colour before download. Once downloaded, the thumbnail switches to full color, the download icon turns green, and a delete icon appears to let you remove the episode. The following screenshot shows what this looks like in the app:</p>
<p><figure><img src="/images/posts/bdd-level-0.png" alt="Episode Download State"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">Episode Download State</figcaption></figure>
<em>This is the most basic implementation, but it does the job of indicating the download state of each episode. The dimmed thumbnail and download icon provide a clear visual cue that the episode is not yet downloaded, while the full-color thumbnail and green icon, and the presence of the trashcan icon, indicate that the episode is ready for offline listening.</em></p>
<p>This establishes a decent UX language, so we can keep these indicators of downloaded state. But we also need a way to avoid the frustration of not knowing that a download is in progress, so, we need to add some kind of download progress indicator.</p>
<p>The most simple approach is something I'm sure we've all done in many apps: a blocking modal overlay with an activity indicator and a label that says &quot;Downloading...&quot;. This is achieved with a simple <code>BoxView</code> that covers the entire screen (with <code>Opacity</code> at <code>0.25</code>), with a <code>Border</code> in the middle (I didn't want to implement a popup just for this) surrounding an activity indicator in the center and a label below it. Here's what it looks like:</p>
<VideoContainer Source=SourceType.File FilePath='/images/posts/bdd-level-0.mp4' Width='400px' Caption='Modal overlay blcoks the UI during download'>
</VideoContainer>
<p><em>Showing a modal overlay with an activity indicator lets the user know that a download is in progress. The label below the activity indicator provides additional context, but it doesn't give any information about the download progress itself.</em></p>
<p>This is the most basic implementation, but it does the job of letting the user know that something is happening. However, it also blocks the UI and prevents any interaction until the download is complete, which can be frustrating if the download takes a while.</p>
<h2 id="level-1-individual-activity-indicators">Level 1: Individual Activity Indicators</h2>
<p>The first improvement we can make is to not block the whole UI just because one episode is downloading. Instead of a modal, we can change the download button to an <code>ActivityIndicator</code> that shows the download progress as a percentage. This way, the user can still interact with the app while the download is in progress.</p>
<VideoContainer Source=SourceType.File FilePath='/images/posts/bdd-level-1.mp4' Width='400px' Caption='Individual activity indicators show download progress'>
</VideoContainer>
<p><em>An <code>ActivityIndicator</code> replaces the download button while it's in progress, allowing the user to continue interacting with the app.</em></p>
<p>This is a bit better, as it doesn't block the whole app, but there are still a few problems. First, you may have noticed that <em>all</em> download buttons are disabled while a download is in progress. The <code>IsEnabled</code> property of the button is bound to the <code>IsDownloaded</code> property of the episode (using the <code>InvertedBoolConverter</code> from the MAUI Community Toolkit), so you may not expect this to happen. However, the <code>Command</code> is bound to a <code>DownloadEpisodeCommand</code> in the ViewModel. This is generated using the <code>[RelayCommand]</code> attribute from the MVVM Community Toolkit, which handily generates the command fro the method; but by default it doesn't allow concurrent execution of async methods, so the <code>CanExecute</code> method returns <code>false</code> while the command is executing, and this supersedes the <code>IsEnabled</code> property. This means that while one episode is downloading, all other download buttons are disabled, which is not ideal.</p>
<p>Additionally, the user still has no idea how long the download will take, or how much progress has been made. And no way to cancel the download if they change their mind. So, let's improve this further.</p>
<h2 id="level-2-concurrent-downloads-plus-cancel">Level 2: Concurrent Downloads plus Cancel</h2>
<p>The next step is to allow concurrent downloads, so that the user can start downloading multiple episodes at once. We can achieve this by adding the <code>AllowConcurrentExecutions</code> attribute to the <code>DownloadEpisodeCommand</code>, which allows the command to be executed multiple times concurrently. This means that each download button can be clicked independently, and the user can start downloading multiple episodes at once.</p>
<pre><code class="language-csharp"> [RelayCommand(AllowConcurrentExecutions = true)]
 private async Task DownloadEpisode(EpisodeViewModel episode)
 {
     // Download logic here
 }
</code></pre>
<p>Using <code>AllowConcurrentExecution</code> also gives us a <code>CancellationToken</code> parameter in the command method, which we can use to cancel the download if the user changes their mind. We can add a cancel button to the download overlay that allows the user to cancel the download if they choose to do so. The episode ViewModel has an <code>IsDownloading</code> property that indicates whether the episode is currently being downloaded, and we can simply show and hide the download and cancel buttons based on this property.</p>
<VideoContainer Source=SourceType.File FilePath='/images/posts/bdd-level-2.mp4' Width='400px' Caption='Download button shows an ActivityIndicator and a cancel button while downloading'>
</VideoContainer>
<p><em>The download button now shows an <code>ActivityIndicator</code> while the episode is downloading, and a cancel button that allows the user to stop the download if they change their mind. The user can now start downloading multiple episodes at once, and cancel any download in progress.</em></p>
<p>This is already a big step-up in UX, as it allows the user to see that a download is in progress, and gives them the option to cancel it if they choose to do so. But to take it to the next level, we need to show the user the current download progress. This is where the fun begins.</p>
<h2 id="level-3-growing-progress-bar-overlay">Level 3: Growing Progress Bar Overlay</h2>
<p>On the web, we refer to progress indicators as &quot;deterministic&quot; or &quot;indeterminate&quot;. A deterministic progress indicator shows the user how much of the task is complete, while an indeterminate progress indicator simply shows that a task is in progress without indicating how much has been completed. So far, we've been using an indeterminate progress indicator (the <code>ActivityIndicator</code>); .NET MAUI provides a <code>ProgressBar</code> control that we can use to show deterministic progress, but it doesn't really fit the theme of the Beer Driven Devs app. So, let's get creative!</p>
<InfoContainer >
<p>I actually could absolutely have used a <code>ProgressBar</code> here, but I wanted to explore some more creative options that fit the theme of the app.</p>
</InfoContainer>
<p>In order to show the progress, though, we need to know how much of the download has been completed. The <code>HttpClient</code> class in .NET allows us to download files asynchronously, and we can use the <code>HttpCompletionOption.ResponseHeadersRead</code> option to read the response headers and get the total size of the file before the download starts. It also lets you stream progressively, rather than buffering the whole response before you can write to disk (or access the stream). We can then continually check the <code>response.Content.Headers.ContentLength</code> to get the total size of the file, and use the <code>HttpContent.ReadAsStreamAsync()</code> method to read the content as a stream. This allows us to track the progress of the download and update the UI accordingly.</p>
<p>To handle this, I created a <code>FileDownloadService</code> class that takes care of downloading files and reporting progress. Here's a simplified version of the code:</p>
<pre><code class="language-csharp">public class FileDownloadService(HttpClient httpClient)
{
    public async Task DownloadFileAsync(string url, string destinationPath, IProgress&lt;double&gt; progress, CancellationToken cancellationToken)
    {
        using var response = await httpClient.GetAsync(url, HttpCompletionOption.ResponseHeadersRead, cancellationToken);
        response.EnsureSuccessStatusCode();

        var totalBytes = response.Content.Headers.ContentLength ?? -1L;
        var totalRead = 0L;
        var buffer = new byte[128 * 1024]; // 128 KB buffer
        var isMoreToRead = true;

        using var contentStream = await response.Content.ReadAsStreamAsync(cancellationToken);
        using var fileStream = File.OpenWrite(destinationPath);

        do
        {
            var read = await contentStream.ReadAsync(buffer.AsMemory(0, buffer.Length), cancellationToken);
            if (read == 0)
            {
                isMoreToRead = false;
                progress.Report(1.0);
                continue;
            }

            await fileStream.WriteAsync(buffer.AsMemory(0, read), cancellationToken);

            totalRead += read;

            if (totalBytes != -1)
            {
                var percent = (double)totalRead / totalBytes;
                progress.Report(percent);
            }

        } while (isMoreToRead);
    }

}
</code></pre>
<p>I'm still using <code>HttpClientFactory</code> for connection pooling and management, but this service handles the download logic and reports progress back to the UI. I define a buffer, and each time we read from the stream, we write to the file and report the progress as a percentage. The <code>IProgress&lt;double&gt;</code> parameter allows us to report the progress back to the UI, which we can then use to update the overlay.</p>
<p>Showing progress with only a visual representation isn't particularly a11y friendly, so I also added a label that shows the current download progress as a percentage. The label is positioned in the middle of the thumbnail, and the overlay fills the thumbnail based on the progress. Here's how I implemented this in XAML:</p>
<pre><code class="language-xml">&lt;Label HorizontalOptions=&quot;Center&quot;
       VerticalOptions=&quot;Center&quot;
       HorizontalTextAlignment=&quot;Center&quot;
       VerticalTextAlignment=&quot;Center&quot;
       FontFamily=&quot;Lucide&quot;
       TextColor=&quot;{StaticResource Amber900}&quot;
       FontSize=&quot;36&quot;
       IsVisible=&quot;{Binding IsDownloading}&quot;
       Text=&quot;{Binding DownloadProgress, StringFormat='{0:P0}'}&quot;/&gt;

&lt;BoxView HorizontalOptions=&quot;Start&quot;
         VerticalOptions=&quot;End&quot;
         IsVisible=&quot;{Binding IsDownloading}&quot;
         WidthRequest=&quot;{Binding DownloadProgress, Converter={StaticResource ProgressToWidth}}&quot;
         HeightRequest=&quot;4&quot;
         BackgroundColor=&quot;{StaticResource Amber900}&quot; /&gt;
</code></pre>
<p>The <code>BoxView</code> uses a custom <code>ProgressToWidth</code> converter to calculate the width based on the download progress. The converter simply takes the width of the view (assigned in the <code>OnSizeAllocated</code> method override) and multiplies it by the progress percentage to get the width of the overlay.</p>
<p>Here it is in action:</p>
<VideoContainer Source=SourceType.File FilePath='/images/posts/bdd-level-3.mp4' Width='400px' Caption='Progress percentage and a progress bar overlay show download progress'>
</VideoContainer>
<p><em>The download progress overlay grows across the thumbnail based on the download progress, and the percentage label shows the current progress. This provides a clear visual indication of how much of the episode has been downloaded.</em></p>
<p>This is a huge improvement in UX: it allows the user to see how much of the episode has been downloaded (and estimate how long it will take to complete). The overlay fills the thumbnail, providing a spatially meaningful representation of the download progress, and the percentage label gives the user a clear indication of how much has been downloaded.</p>
<p>At this stage, we have met all of our UX goals: the user can see that a download is in progress, they can cancel it if they choose to do so, and they can see how much of the episode has been downloaded. This is easily good enough for nearly any app.</p>
<p>...but why stop at 'good enough'? Especially when we can have some fun with it!</p>
<h2 id="level-4-beer-fill-foam-finale">Level 4: Beer Fill &amp; Foam Finale</h2>
<p><em>What if</em>, instead of a simple overlay mimicking your garden variety <code>ProgressBar</code>, we had a beer glass that fills up as the download progresses? That would be a fun and engaging way to show download progress, and it fits the theme of the app perfectly.</p>
<p>I'm going to be honest: this is frankly ridiculous. It's over-the-top, it's completely unnecessary, and it has no real functional benefit. But I don't care. It's cool. And it looks awesome! Better than that, it fits the theme of the Beer Driven Devs app perfectly. So, let's go all out and have some fun with it.</p>
<p>There are probably a handful of ways to implement this, but I think the simplest cross-platform approach is to use <code>SkiaSharp</code>. In levels <code>0</code> through <code>3</code>, we used the <code>BoxView</code> and <code>Label</code> controls to create the overlay, but for this level, we need something more dynamic and visually appealing. So, we'll use <code>SKCanvasView</code> from the SkiaSharp library to draw the beer glass, fill it with beer, and create the foam effect.</p>
<p>The <code>SKCanvasView</code> replaces the <code>BoxView</code> that was used to dim the thumbnail. But, as the progress increases, instead of drawing the translucent gray overlay across the whole thumbnail, we draw it from the top of the thumbnail (<code>y = 0</code>) to <code>y - progress</code>, where <code>progress</code> is the current download progress as a percentage, and from <code>y = progress</code> to the bottom of the thumbnail (<code>y = 1</code>), we draw the beer glass.</p>
<InfoContainer >
<p>The coordinates for the <code>SKCanvasView</code> work similar to a <code>Brush</code> in .NET MAUI, where <code>0,0</code> is the top-left and <code>1,1</code> is the bottom-right.</p>
</InfoContainer>
<p>The beer glass is a gradient from <code>amber400</code> to <code>yellow300</code> (taken from the <a href="https://tailwindcss.com/docs/customizing-colors#default-color-palette">Tailwind CSS palette</a>), and as the progress increases, the beer 'fills the glass'.</p>
<pre><code class="language-csharp">private void OnPaintSurface(object? sender, SKPaintSurfaceEventArgs e)
{
    var canvas = e.Surface.Canvas;
    var info = e.Info;
    canvas.Clear();

    // As the canvas starts at the top, but we want to represent progress from
    // the bottom, we need to invert the Y coordinate. The height part is easy
    // - the info gives us the height of the canvas, so we just multiply it by
    // the progress (which is a fraction) to get the Y coordinate of the top
    // of the beer fill.
    var progressY = (float)(info.Height * (1 - Progress));

    // Gray muted overlay is drawn from the top to the progress point
    using var grayPaint = new SKPaint { Color = new SKColor(128, 128, 128, 38) }; // ~15% opacity
    var grayRect = new SKRect(0, 0, info.Width, progressY);
    canvas.DrawRect(grayRect, grayPaint);


    // Beer gradient overlay is drawn from the progress point to the bottom
    // of the canvas. The gradient is drawn from amber400 to yellow300,
    // defined earlier in the class as the _gradientStart and _gradientEnd fields.
    var beerRect = new SKRect(0, progressY, info.Width, info.Height);
    using var beerPaint = new SKPaint
    {
        Shader = SKShader.CreateLinearGradient(
            new SKPoint(0, beerRect.Top),
            new SKPoint(0, beerRect.Bottom),
            [_gradientStart, _gradientEnd],
            null,
            SKShaderTileMode.Clamp)
    };
    canvas.DrawRect(beerRect, beerPaint);
}
</code></pre>
<p>Note that I faffed around trying to get the alpha right on those two colors, and in the end decided that life's too short so just defined them in the resource dictionary as <code>Amber400pc15</code> and <code>Yellow300pc15</code>. The <code>SKCanvasView</code> is set to fill the thumbnail, and the <code>OnPaintSurface</code> method is called whenever the canvas needs to be redrawn.</p>
<SidenoteContainer >
<p>I've found myself adapting Tailwind to .NET MAUI quite a bit lately, so I build a couple of tools to help with this. One I've released as a dotnet tool called <a href="https://github.com/matt-goldman/TailwindXamlThemeConverter">tailwind2xaml</a>, also available on <a href="https://www.nuget.org/packages/tw2x">NuGet</a>. It converts a Tailwind theme to a XAML resource dictionary (not just for .NET MAUI; you can specify which XAML UI framework you're using), which is super handy for keeping a consistent color palette across your stack. Or, y'know, getting v0 to generate a UI for you and converting it to .NET MAUI...but <em>that's</em> another story too! (watch this space for more on that soon!)</p>
</SidenoteContainer>
<h3 id="adding-the-bubbles">Adding the Bubbles</h3>
<p>This is already a <em>very</em> cool effect, and definitely a step above the progress bar. But it still needs one small touch to make it feel like beer: bubbles! As I've already reinvented one wheel today, I'm going to use an existing tool for this. The <a href="https://mono.github.io/SkiaSharp.Extended/api/ui-maui/skconfettiview.html">SKConfettiView</a> in the <code>SkiaSharp.Extended.UI.Maui</code> library is a particle system that can be used to create confetti effects, which I've actually used in more than one app, but it can also be used to create bubbles. In fact a particle system is exactly what we need to create the bubbles (if you've dabbled with game dev at all you know all about particle systems).</p>
<p>Unfortunately the <code>SKconfettiView</code> can't be used directly in a <code>SKCanvasView</code>, so I added a <code>ContentView</code> that's used to layer the overlay canvas and the bubbles.</p>
<pre><code class="language-xml">&lt;ContentView xmlns=&quot;http://schemas.microsoft.com/dotnet/2021/maui&quot;
             xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;
             xmlns:controls=&quot;clr-namespace:BeerDrivenDevsApp.Controls&quot;
             xmlns:vm=&quot;clr-namespace:BeerDrivenDevsApp.ViewModels&quot;
             xmlns:skia=&quot;clr-namespace:SkiaSharp.Extended.UI.Controls;assembly=SkiaSharp.Extended.UI&quot;
             x:Class=&quot;BeerDrivenDevsApp.Controls.DownloadProgress&quot;&gt;
    &lt;Grid x:DataType=&quot;vm:EpisodeViewModel&quot;&gt;
        &lt;controls:BeerProgressOverlayView Progress=&quot;{Binding DownloadProgress}&quot;
                                          HorizontalOptions=&quot;Fill&quot;
                                          VerticalOptions=&quot;Fill&quot;
                                          x:Name=&quot;BeerOverlay&quot; /&gt;

        &lt;skia:SKConfettiView HorizontalOptions=&quot;Fill&quot;
                             VerticalOptions=&quot;End&quot;
                             IsAnimationEnabled=&quot;{Binding IsDownloading}&quot;
                             x:Name=&quot;Confetti&quot; /&gt;
    &lt;/Grid&gt;
&lt;/ContentView&gt;
</code></pre>
<p>The 'confetti' effect will only play when the episode is downloading - thanks to binding the <code>IsAnimationEnabled</code> property of the <code>SKConfettiView</code> to the <code>IsDownloading</code> property of the episode ViewModel. The height of the view is set to a field in the <code>OnSizeAllocated</code> method:</p>
<pre><code class="language-csharp">protected override void OnSizeAllocated(double width, double height)
{
    base.OnSizeAllocated(width, height);

    if (height &gt; 0)
    {
        _viewHeight = height;
    }
}
</code></pre>
<p>And a method called <code>SetBubblesHeight</code> is used to set the height of the <code>SKConfettiView</code>, and is called whenever the <code>DownloadProgress</code> property changes:</p>
<pre><code class="language-csharp">public void SetBubblesHeight()
{
    Confetti.MaximumHeightRequest = Progress * _viewHeight;
}

private static void OnProgressChanged(BindableObject bindable, object oldValue, object newValue)
{
    if (bindable is DownloadProgress downloadProgress)
    {
        downloadProgress.SetBubblesHeight();
    }
}
</code></pre>
<p>(Note that it is not just set directly in the <code>OnProgressChanged</code> method, because we want it to respond to <code>OnSizeAllocated</code> as well, so we can set the height of the bubbles when the view is first created.)</p>
<p>The <code>SKConfettiView</code> is configured to emit bubbles that rise from the bottom of the screen, and we can adjust the emitter settings to create a bubble effect instead of confetti. Here's how I set it up:</p>
<pre><code class="language-csharp">var _regularBubbleConfettiSystem = new SKConfettiSystem
{
    EmitterBounds   = SKConfettiEmitterBounds.Bottom,
    Emitter         = SKConfettiEmitter.Infinite(100, -1),
    Shapes          = [new SKConfettiCircleShape()],
    Colors          = [new Color(255, 255, 255, 60)],
    Lifetime        = 2,
    Physics         = [new SKConfettiPhysics(10, 50), new SKConfettiPhysics(5, 10), new SKConfettiPhysics(2, 20)]
};

Confetti.Systems = [_regularBubbleConfettiSystem];
</code></pre>
<p>This sets up a bubble emitter that emits bubbles from the bottom of the screen, with a lifetime of 2 seconds. The <code>SKConfettiCircleShape</code> is used to create circular bubbles, and the <code>SKConfettiPhysics</code> settings control the speed and direction of the bubbles as they rise. The colors are set to a semi-transparent white, which helps with the illusion of bubbles rising through the beer.</p>
<p>Want to see what this looks like? Here's a video of the final result in action:</p>
<VideoContainer Source=SourceType.File FilePath='/images/posts/bdd-level-4_1.mp4' Width='400px' Caption='Beer glass fills up as the download progresses, and bubbles rise to the top'>
</VideoContainer>
<p><em>The beer glass fills up as the download progresses, and bubbles rise to the top, creating a fun and engaging download progress microinteraction. The bubbles rise from the bottom of the glass, creating a realistic beer effect.</em></p>
<p>Note that the download is quite slow, so I skipped ahead a couple of times in the video so you can see the progress at different stages.</p>
<p>So, overkill? Absolutely. But it's fun, it fits the theme of the app perfectly, and it's definitely better than a boring old progress bar. Who says you can't combine functional UX with fun UI? If we're all going to be obsessing over our microinteractions this year, we might as well have some fun with them!</p>
<h3 id="but-wait-theres-more">But wait, there's more!</h3>
<p>This already <em>awesome</em>, but what if it were <em>even more awesomer!?</em> What if, when it reaches 100%, it overflows with foam? And the foam bubbles burst away to reveal the full episode thumbnail?</p>
<p>For this, I added a second <code>SKConfettiView</code>. The first one fires an event when the download reaches 100%, and this second one is used to create the foam effect. The foam bubbles are larger than the regular bubbles, and they burst away when they reach the top of the screen, revealing the full episode thumbnail underneath.</p>
<pre><code class="language-xml">&lt;ContentView xmlns=&quot;http://schemas.microsoft.com/dotnet/2021/maui&quot;
             xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;
             xmlns:controls=&quot;clr-namespace:BeerDrivenDevsApp.Controls&quot;
             xmlns:vm=&quot;clr-namespace:BeerDrivenDevsApp.ViewModels&quot;
             xmlns:skia=&quot;clr-namespace:SkiaSharp.Extended.UI.Controls;assembly=SkiaSharp.Extended.UI&quot;
             x:Class=&quot;BeerDrivenDevsApp.Controls.DownloadProgress&quot;&gt;
    &lt;Grid x:DataType=&quot;vm:EpisodeViewModel&quot;&gt;
        &lt;controls:BeerProgressOverlayView Progress=&quot;{Binding DownloadProgress}&quot;
                                          HorizontalOptions=&quot;Fill&quot;
                                          VerticalOptions=&quot;Fill&quot;
                                          x:Name=&quot;BeerOverlay&quot;
                                          AnimationCompleted=&quot;BeerProgressOverlayView_AnimationCompleted&quot; /&gt;  &lt;!-- This event is fired when the download reaches 100% --&gt;

        &lt;skia:SKConfettiView HorizontalOptions=&quot;Fill&quot;
                             VerticalOptions=&quot;End&quot;
                             IsAnimationEnabled=&quot;{Binding IsDownloading}&quot;
                             x:Name=&quot;Confetti&quot; /&gt;

        &lt;!-- This is the second SKConfettiView that creates the foam effect --&gt;
        &lt;skia:SKConfettiView HorizontalOptions=&quot;Fill&quot;
                             VerticalOptions=&quot;Fill&quot;
                             IsAnimationEnabled=&quot;False&quot;
                             IsVisible=&quot;False&quot;
                             x:Name=&quot;Foam&quot; /&gt;
    &lt;/Grid&gt;
&lt;/ContentView&gt;
</code></pre>
<p>The foam confetti is configured slightly differently to the regular bubbles, with larger bubbles that rise more slowly and burst when they reach the top of the screen. Here's how I set it up:</p>
<pre><code class="language-csharp"> _foamConfettiSystem = new SKConfettiSystem
{
    EmitterBounds   = SKConfettiEmitterBounds.Bottom,
    Emitter         = SKConfettiEmitter.Infinite(800, -1),
    Shapes          = [new SKConfettiCircleShape()],
    Colors          = [new Color(255, 255, 255, 200)],
    Lifetime        = 4,
    Physics         = [
        new SKConfettiPhysics(10, 10),
        new SKConfettiPhysics(5, 10),
        new SKConfettiPhysics(2, 10),
        new SKConfettiPhysics(30, 10),
        new SKConfettiPhysics(50, 10),
        new SKConfettiPhysics(20, 10),
        new SKConfettiPhysics(100, 20)]
};

Foam.Systems = [_foamConfettiSystem];
</code></pre>
<p>The event handler enables the foam confetti when the download reaches 100%, and after it has run for a second, it fades everything out and reveals the full episode thumbnail:</p>
<pre><code class="language-csharp">private async void BeerProgressOverlayView_AnimationCompleted(object sender, EventArgs e)
{
    if (Progress &gt;= 1.0)
    {
        Foam.IsVisible = true;
        Foam.IsAnimationEnabled = true;
        await Task.Delay(1000); // allow some foam to be visible
        await BeerOverlay.FadeTo(0, 500, Easing.CubicInOut);
        Confetti.IsVisible = false;
        Foam.FadeTo(0, 500, Easing.CubicInOut);
    }
}
</code></pre>
<p>And without further ado, here's the final result in action:</p>
<VideoContainer Source=SourceType.File FilePath='/images/posts/bdd-level-4_2.mp4' Width='400px' Caption='Foam bubbles burst away to reveal the full episode thumbnail'>
</VideoContainer>
<p><em>The beer glass fills up as the download progresses, and bubbles rise to the top. When the download reaches 100%, the glass overflows with foam, and the foam bubbles burst away to reveal the full episode thumbnail underneath.</em></p>
<p>This is the final level of the download progress microinteraction, and it's definitely the most fun. It takes the concept of a progress bar to a whole new level, and it's a great example of how you can use microinteractions to create a fun and engaging user experience. The foam is...a work in progress, but it's already pretty cool, and will be even better with a few refinements.</p>
<h2 id="explore-the-repo">Explore the Repo</h2>
<p>Each branch (level-0 through main) represents one stage of the progression. Check it out, and keep an eye out for the BDD app on your platform of choice soon!</p>
<p><a href="https://github.com/matt-goldman/BeerDrivenDevsApp">Beer Driven Devs App on GitHub</a></p>
<h2 id="last-orders">Last Orders</h2>
<p>I've always considered myself a poor designer, so I keep my finger on the pulse of UI trends as much as I can. It's an area where I'm always looking to improve. This means that I often hear about the latest or predicted UI trends, and to be honest, half the time I groan and roll my eyes. Granted, the problem here is inevitably me, but sometimes I can immediately see the value, either aesthetically or functionally, and on very rare occasions, I can see both. This is one of those times.</p>
<p>Microinteractions are a powerful way to make your app more fun, more human, and more memorable, and they can still be deeply functional. The Beer Driven Devs app is proof that you can embrace ridiculous ideas and still deliver a great UX. When it comes to design, I’m probably perched somewhere around the Peak of Mount Stupid on the Dunning-Kruger curve. But I'm gaining confidence, and when it comes to using beer to represent download progress, I've realised with absolute certainty that it is objectively awesome, and I love it. I hope you do too!</p>
<p>What microinteractions will you implement to makes your users' lives easier and more fun? Let me know! In the meantime, I'm off to crack open a cold one.</p>
<p>🍻 Cheers!</p>
]]></content:encoded>
      </item>
<item>
        <title>Replicating the Outlook Mobile &#39;Focused/Other&#39; Switch in .NET MAUI</title>
        <link>https://goforgoldman.com/posts/outlook-toggle</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/outlook-toggle</guid>
        <pubDate>Fri, 04 Jul 2025 00:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/outlook-toggle-cover.png" alt="Replicating the Outlook Mobile &#39;Focused/Other&#39; Switch in .NET MAUI" />
          Recreating Outlook mobile&#39;s sophisticated Focused/Other toggle switch in .NET MAUI using SkiaSharp for custom animated UI with sliding highlights and dynamic text colors.]]>
        </description>
        <category>mobile</category>
        <category>maui</category>
        <category>ui</category>
        <category>outlook</category>
        <content:encoded><![CDATA[<p>Over the past three days, I've demonstrated building some pretty cool UI effects in Maui.Graphics, the 2D graphics library that shipped with .NET MAUI back in 2022. Today I'm going to look at its closely related progenitor; SkiaSharp.</p>
<p>A few years ago, I shared a sample <a href="posts/outlook-clone/">replicating the Outlook mobile UI in .NET MAUI</a>. Outlook features a very cool custom toggle for switching between &quot;Focused&quot; and &quot;Other&quot; in your mailbox, but in the sample, an extract from my book, and specifically the chapter on layout, I glossed over this and opted to use the default <code>Switch</code> control instead.</p>
<p>The following screenshot shows what the original looks like in the Outlook app, compared to what we ended up with.</p>
<p><figure><img src="/images/posts/outlookv2-ogvsfinal.png" alt="The original Outlook mobile app compared with the simplified version we created in my previous post"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">The original Outlook mobile app compared with the simplified version we created in my previous post</figcaption></figure></p>
<p>For this year's <a href="/posts/mauiuijuly-25">MAUI UI July</a>, I decided to finally do it properly.</p>
<h2 id="the-problem">The Problem</h2>
<p>The Outlook switch isn’t just a simple toggle. It has two words (&quot;Focused&quot; and &quot;Other&quot;) side by side, with a pill-shaped highlight that slides between them. Text colors shift dynamically as the pill moves:</p>
<ul>
<li>The selected text is blue when inside the pill.</li>
<li>The unselected text remains white outside.</li>
<li>The pill itself blends cleanly over the background pill.</li>
</ul>
<p>But there's another subtle detail -  as the pill animates, the text color changes exactly where it overlaps. You can actually see this if you slow it down in the Outlook app.</p>
<p><figure><img src="/images/posts/outlook-toggle.gif" alt="The Focused switch in Outlook has a cool effect with masking against the text underneath"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">The Focused switch in Outlook has a cool effect with masking against the text underneath</figcaption></figure></p>
<h2 id="why-not-use-a-default-switch">Why Not Use a Default Switch?</h2>
<p>As mentioned above, this originally came from a chapter in the book on layouts - specifically the purpose was to demonstrate how easy it is to achieve nearly any UI using the layout primitives in .NET MAUI. I had intended to add this later, but diving into it at this stage would have been a distraction.</p>
<p>My original intention was to implement this using Maui.Graphics; however, due to space constraints I wasn't able to include it. Additionally, the effect we use here depends on blend modes, which as yet are not implemented in Maui.Graphics. The interface is there, but they don't currently do anything.</p>
<h2 id="skiasharp-to-the-rescue">SkiaSharp to the Rescue</h2>
<p>SkiaSharp has been around for a long time and is well supported, mature, and sophisticated. Maui.Graphics depends on Skia under the hood for much of its functionality.</p>
<p>It's been around since Xamarin (and if you've been following this space you will have seen <a href="https://www.youtube.com/kphillpotts">Kym Phillpotts do mind-blowing things with it</a>) and has all the functionality we need for this. So, I fell back to SkiaSharp, which gives us <a href="https://ssp.impulsetrain.com/porterduff.html">Porter-Duff blend modes</a>, precise control, and real-time drawing.</p>
<h2 id="bindable-properties">Bindable Properties</h2>
<p>Rather than implementing a single-use control, I exposed the following for flexibility:</p>
<ul>
<li>OnText, OffText</li>
<li>IsToggled</li>
<li>SelectedTextColor, UnselectedTextColor</li>
<li>PillColor, PillBackgroundColor</li>
<li>Padding</li>
</ul>
<p>This will allow me to use this toggle (if I want to) in any app, not just my Outlook clone.</p>
<p>I also added a <code>ToggleChanged</code> event, for scenarios not using MVVM (like this Outlook demo, for example).</p>
<h2 id="how-it-works">How It Works</h2>
<p>In a nutshell, the control performs the following steps. I won't go through all the code here (you can see it in the repo, linked at the bottom), but I'll call out the main steps and highlight relevant snippets for each.</p>
<h3 id="get-the-properties-of-the-canvas-and-define-skiapaint-instances-for-all-the-components">1. Get the properties of the canvas and define <code>SkiaPaint</code> instances for all the components</h3>
<pre><code class="language-csharp">//  The control subclasses SKCanvasView, which provides this
//  method for defining what to paint.
protected override void OnPaintSurface(SKPaintSurfaceEventArgs e)
{
    base.OnPaintSurface(e);

    // clear the canvas from the previous frame
    var canvas = e.Surface.Canvas;
    canvas.Clear();

    // get the height and width - these are used for scaling
    // the text and pills
    var info = e.Info;
    var width = info.Width;
    var height = info.Height;

    // Set the background and foreground pill colours from the
    // bindable properties (or their default values)
    using var pillBgPaint = new SKPaint { Color = PillBackgroundColor.ToSKColor(), IsAntialias = true };
    using var pillPaint = new SKPaint { Color = PillColor.ToSKColor(), IsAntialias = true };
    using var textPaint = new SKPaint { IsAntialias = true };

    // currently just uses the default typeface, but this could
    // also be a bindable property
    using var textFont = new SKFont { Size = height * 0.4f, Typeface = SKTypeface.Default };

    // ...
</code></pre>
<h3 id="measure-text-widths-for-each-label-with-padding">2. Measure text widths for each label (with padding).</h3>
<pre><code class="language-csharp">    // Get the widths of the two labels/states, add some padding,
    // and add a small gap between them relative to the height
    // of the control
    var onWidth = textFont.MeasureText(OnText) + Padding * 4;
    var offWidth = textFont.MeasureText(OffText) + Padding * 3;
    var gap = height * 0.025f;

    // ...
</code></pre>
<p><code>onWidth</code> gets slightly more padding than <code>offWidth</code> because <code>onWidth</code> has a gap added after it when calculating positions, while <code>offWidth</code> does not. This balances the total spacing when the pills are drawn side by side.</p>
<h3 id="draw-a-full-background-pill-wide-enough-to-contain-both-words">3. Draw a full background pill, wide enough to contain both words.</h3>
<pre><code class="language-csharp">// Draw static background pill
canvas.DrawRoundRect(bgRect, pillBgPaint);
</code></pre>
<h3 id="draw-the-animated-pill-sliding-between-focused-and-other">4. Draw the animated pill, sliding between &quot;Focused&quot; and &quot;Other&quot;.</h3>
<pre><code class="language-csharp">// Draw animated active pill
canvas.DrawRoundRect(activeRect, pillPaint);
</code></pre>
<h3 id="draw-unselected-text-in-the-base-color-on-top">5. Draw unselected text in the base color on top.</h3>
<pre><code class="language-csharp">// Draw unselected text on top
textPaint.Color = UnselectedTextColor.ToSKColor();
canvas.DrawText(OnText, onStart + Padding, midY + pillRadius / 2f, textFont, textPaint);
canvas.DrawText(OffText, offStart + Padding, midY + pillRadius / 2f, textFont, textPaint);
</code></pre>
<h3 id="save-a-local-layer-draw-the-active-pill-as-a-mask-then-draw-selected-text-using-srcin-blend-mode-so-it-only-shows-inside-the-pill">6. Save a local layer, draw the active pill as a mask, then draw selected text using SrcIn blend mode so it only shows inside the pill.</h3>
<pre><code class="language-csharp">// Masked selected text only inside active pill
canvas.SaveLayer();
textPaint.Color = SelectedTextColor.ToSKColor();
textPaint.BlendMode = SKBlendMode.SrcIn;
canvas.DrawText(OnText, onStart + Padding, midY + pillRadius / 2f, textFont, textPaint);
canvas.DrawText(OffText, offStart + Padding, midY + pillRadius / 2f, textFont, textPaint);
textPaint.BlendMode = SKBlendMode.SrcOver;
canvas.Restore();
</code></pre>
<p>Most of the code here is fairly self-explanatory. If you followed the previous 3 days' posts, you'll recognise much of the logic here. We define shapes, then draw them onto a canvas.</p>
<p>You may have noticed that the first part of that is missing. We're passing shapes to the <code>DrawRoundRect</code> method - specifically <code>bgRect</code> and <code>activeRect</code> - but I haven't shown how to define them. These represent, as you might imagine, the large background pill and the sliding active pill. We'll look at how these are created shortly, but first there's one part here that might not be quite as obvious at first glance.</p>
<p>I mentioned above that we need <em>blend modes</em> to achieve the visual effect we want for the toggle. In <a href="/posts/batmobile-part-1">part 1 of my Batmobile series</a> I mentioned the importance of the order of operations - last-in wins, so if you paint something onto the canvas, anything that was there before gets painted over (although only where you are actually painting).</p>
<p>Blend modes let us control this behavior. We can define approaches to paint only where something exists underneath, only where something doesn't, or several other combinations. The Maui.Graphics docs <a href="https://learn.microsoft.com/dotnet/maui/user-interface/graphics/blendmodes">actually explain them pretty well</a>, even though the functionality is not yet implemented. Otherwise you can read about them in the <a href="https://skia.org/docs/user/api/skblendmode_overview/">Skia docs</a>.</p>
<h3 id="the-tricky-bit">The Tricky Bit</h3>
<p>The big &quot;aha&quot; moment: the <code>SaveLayer</code> call. You may have spotted this in the code above and wondered what it's doing. As mentioned, by default, when we paint onto the canvas, we create a new layer, and anything that gets painted onto that layer obscures anything behind it.</p>
<p>When we use blend modes, we flatten the layers (we blend them). So it's essential to save the background layer first and create a new layer set for the blended text and pill effect.</p>
<p>If you don’t scope it properly, your background pill vanishes. Ask me how I know.</p>
<h2 id="drawing-and-animating-the-pill">Drawing and Animating the Pill</h2>
<p>Having defined how to draw the background, and how to blend the selected item pill with the text, the final piece needed to complete the control is to define <em>where</em> exactly to draw the pill.</p>
<p>We'll break this down into three steps:</p>
<ol>
<li><strong>Drawing the background pill:</strong> This is static. We'll need to re-render it per frame because of the above-mentioned blending, but we only need to calculate the size once.</li>
<li><strong>Triggering and managing the animation:</strong> As this is a toggle, we need to animate in response to the state being switched, and we need something to control the state of the foreground pill frame by frame as it moves between the two.</li>
<li><strong>Rendering the foreground pill:</strong> Not only does this have two distinct states (on and off), each requiring its own size (depending on the text representing that state), but it has to grow and shrink dynamically between those states.</li>
</ol>
<p>Let's walk through each of these.</p>
<h3 id="the-background-pill">The background pill</h3>
<p>The background pill is drawn first, and is defined statically based on the coordinates we extracted at the start:</p>
<pre><code class="language-csharp">// define the total width as the width of the 'on' state
// text, plus the width of the 'off' state text, plus the
// gap.
var totalWidth = onWidth + offWidth + gap;

// define the horizontal start positions of the 'on' state
// text and the 'off' state text.
var startX = (width - totalWidth) / 2f;
var onStart = startX;
var offStart = onStart + onWidth + gap;

// define the height and vertical start positions of the pill
var midY = height / 2f;
var pillHeight = height * 0.6f;
var pillRadius = pillHeight / 2f;
var pillY = midY - pillRadius;

// define the horizontal end position of the pill
var rightEdge = offStart + offWidth;

// Define the background as a rounded rectangle, using the
// horizontal and vertical start positions, horizontal and
// vertical end positions, and a radius defined earlier as
// half the height (to make it perfectly rounded)
var bgRect = new SKRoundRect(new SKRect(onStart, pillY, rightEdge, pillY + pillHeight), pillRadius);
</code></pre>
<h3 id="triggering-and-managing-the-animation">Triggering and Managing the Animation</h3>
<p>.NET MAUI includes some incredible <a href="https://learn.microsoft.com/dotnet/maui/user-interface/animation/basic">built-in animations</a> for animating properties of views, like rotation, scale and position. If this control didn't include any text, and we were just animating the foreground pill to change size and move, we may have been able to use the <code>ScaleXTo</code> and <code>TranslateTo</code> animations to control a <code>Shape</code>. But we can't use those directly with the <code>SKRoundRect</code> <em>within</em> a <code>SKCanvas</code> (we would only be able to apply them to the canvas as a whole).</p>
<p>.NET MAUI gives us flexibility though through <a href="https://learn.microsoft.com/dotnet/maui/user-interface/animation/custom">custom animations</a>. Custom animations are built using the <code>Animation</code> class (which is also under the hood of the built-in animations) which, while primarily intended for animation, essentially lets you control and change a value over time. There are several use-cases we might imagine for this, even outside UI, but in our case, it means that, unlike the built-in animations, which can <em>only</em> be used with classes that inherit <code>VisualElement</code>, we <em>can</em> use it to control our foreground pill.</p>
<p>The <code>Animate</code> class is instantiated with three parameters: a callback for the value to be animated, the start value, and the end value. The animation can then be run by calling the <code>Commit</code> method, which is given an owner. (typically the view being animated, but it doesn't have to be), a name, the number of milliseconds between calls to the value callback, a total duration, and an easing function.</p>
<p>Let's take a look at how it works in the Outlook toggle:</p>
<pre><code class="language-csharp">// define a float to represent the current state
// of the animation; a value between 0 and 1
float animationProgress = 0f;

// Define a method to animate the toggle to its new
// state (0 = off, 1 = on)
private void AnimateToggle(bool newState)
{
    // the animation starts at the current state...
    var start = animationProgress;

    // ...and ends at the new state
    var end = newState ? 1f : 0f;

    // define an instance of the Animation class
    // The callback casts the value to a float and
    // assigns it to animationProgress, then calls
    // InvalidateSurface, which triggers a redraw
    // of the canvas
    // start is the current state
    // end is the new state
    var animation = new Animation(v =&gt; {
        animationProgress = (float)v;
        InvalidateSurface();
    }, start, end);

    // call Commit, assigning the control itself as
    // the owner, with a name of ToggleAnimation,
    // calling back to set the value and redraw every
    // 16 milliseconds, for a total duration of 200
    // milliseconds (62.5 frames per second), using
    // the CubicInOut easing function
    animation.Commit(this, &quot;ToggleAnimation&quot;, 16, 200, Easing.CubicInOut);
}
</code></pre>
<p>In a nutshell, this code defines an <code>animationProgress</code> variable (which also persistently tracks the current state of the foreground pill, even between states of the toggle which is either <code>true</code> or <code>false</code>). We then define an <code>Animation</code>, which will change a value between a given start (current state, and <code>animationProgress</code>, which will be either <code>0</code> or <code>1</code>) and a given end (new state, which will be either <code>1</code> or <code>0</code> respectively). Each time it incrementally sets a value between the start and end state, it calls <code>InvalidateSurface</code>, triggering a redraw of the canvas.</p>
<p>We then <code>Commit</code> (run) that animation, telling it to update the value every 16 milliseconds, over a total duration of 200 milliseconds. The easing makes it speed up at the start and slow down at the finish which gives it a smoother, more natural, feel than something that instantly moves at a single speed.</p>
<InfoContainer >
<p>Note: we could make the duration a bindable property too if we wanted to slow things down a bit. I would derive the rate value from this, with a fixed target FPS, rather than making it a bindable property as well.</p>
</InfoContainer>
<p>The <code>AnimateToggle</code> method defines and commits the animation. In the control's constructor, we add it as a delegate to the touch event on the canvas, with a quick check to ensure the event is of the correct type:</p>
<pre><code class="language-csharp">public OutlookToggle()
{
    EnableTouchEvents = true;
    Touch += (s, e) =&gt; {
        if (e.ActionType == SKTouchAction.Pressed)
        {
            IsToggled = !IsToggled;
            AnimateToggle(IsToggled);
        }
    };
}
</code></pre>
<p>And finally, we call it from the <code>propertyChanged</code> event of the <code>IsToggled</code> bindable property. This results in the pill animating if the user taps it (which correspondingly changes the the value), or when the value is changed via a bound property.</p>
<p>What this gives us, then, is a value that changes between <code>0</code> and <code>1</code> (or <code>1</code> and <code>0</code>) every 16 milliseconds, over the course of 200 milliseconds. The final step is to use this to derive the current position and dimensions of the foreground pill.</p>
<h3 id="the-foreground-pill">The Foreground Pill</h3>
<p>The foreground pill, highlighting the selected state, is a little more complicated as there are two aspects of its state that change over time: it's starting position, and it's width.</p>
<p>This is the thing that really makes this stand out - if all it had were two fixed-width states, that would be cool! But the fact that it slides across, dynamically masks the text, <em>as well as</em> dynamically adjusting width, gives it that next level of 😘👌.</p>
<p>This means we're not just getting the size of the foreground pill for the on state, or the off state, but changing it incrementally as it switches between the two.</p>
<p>As we saw above, we've already got an <code>Animation</code> that controls the current progress between the two states, but we need a way to translate that into a current size and position. Let's take a look at how we do that.</p>
<p>Remember that this code is called every frame (every 16 milliseconds in this case). Just as we defined the background with a <code>SKRoundRect</code>, we use that to define the foreground pill too, but rather than using fixed start and width values that we derive from the properties of the canvas, combined with the size of the state text, we <code>Lerp</code> them using the current value of <code>animationProgress</code>.</p>
<p>Lerp stands for <a href="https://en.wikipedia.org/wiki/Linear_interpolation"><em>linear interpolation</em></a>. The idea is simple: given a start value (from), an end value (to), and a progress factor between 0 and 1, it returns a value somewhere in between.</p>
<p>If you’ve done any game dev (Unity, Unreal, Godot, or any other), you’ve definitely seen this. Lerp is used everywhere to move things smoothly: camera pans, progress bars, even wobbly slime animations.</p>
<p>Game engines typically include built-in Lerp functions (which often also handle smoothing, clamping, and easing under the hood). These are often quite sophisticated, and unfortunately the BCL doesn't include a Lerp function. But rather than import a game engine just for this one function, we can create a barebones version which is more than enough for this pill animation:</p>
<pre><code class="language-csharp">float Lerp(float from, float to, float progress) =&gt; from + (to - from) * progress;
</code></pre>
<p>Linear interpolation is dead simple. Think of it like this: you have a graph with an <code>x=y</code> line (this is what makes it <em>linear</em>). On one axis is <code>animationProgress</code>, on the other axis is the value you want to find (e.g. the desired <code>x</code> position or width). You simply look up the value on one axis that corresponds to the current value on the other axis. This is why we don’t simply set the pill’s <code>x</code> to <code>animationProgress</code>: without mapping, you'd end up with values like 0.37 instead of &quot;X = 187&quot;.</p>
<p>With that, all we have to do is pass <code>animationProgress</code> to our <code>Lerp</code> function, along with the range to Lerp between, and we can get the start and width of the pill every frame.</p>
<pre><code class="language-csharp">// Animate active pill
var animStart = Lerp(offStart, onStart, animationProgress);
var animWidth = Lerp(offWidth, onWidth, animationProgress);
var activeRect = new SKRoundRect(new SKRect(animStart, pillY, animStart + animWidth, pillY + pillHeight), pillRadius);
canvas.DrawRoundRect(activeRect, pillPaint);
</code></pre>
<h2 id="result">Result</h2>
<p>You can see how the whole thing hangs together by checking out the <code>OutlookToggle.cs</code> file, in the <code>Controls</code> folder of the updated Outlook Clone (link to the repo is below). This gives us a final result that's pretty close to the original:</p>
<p><figure><img src="/images/posts/outlook-clone-with-toggle.gif" alt="Out Outlook clone, now incorporating the animated toggle, is almost indistinguishable from the original"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">Out Outlook clone, now incorporating the animated toggle, is almost indistinguishable from the original</figcaption></figure></p>
<p>It's almost pixel perfect, and to take it the rest of the way, we would just need to add the right typeface and tweak the padding.</p>
<h2 id="whats-next">What’s Next</h2>
<p>You can tweak the padding, hook up commands, or integrate haptic feedback for a native feel.</p>
<p>If you're feeling brave, you could also add adaptive colors for dark mode, or expose animation duration as a property.</p>
<p>One thing missing from our Outlook clone (rather than from this control specifically) is that in Outlook, the focused and other inboxes don't simply change like ours is doing here, but slide across from one side to the other, just as the toggle does. This would be very easy to achieve:</p>
<ul>
<li>Set up two <code>CollectionViews</code> instead of one</li>
<li>Use <code>TranslationX</code> to control which one is onscreen</li>
<li>Use the built-in animations to slide between the two <code>CollectionView</code>s.</li>
</ul>
<p>There are lots of ways to spice up the default <code>Switch</code> with something more interesting, and there are ways to enhance this as well, with more bindable properties and more customisation. Liquid glass is the hot topic at the moment - we could add some shader effects to get very close, but at an even simpler level, we could add a small shine effect using a white or blue line at the bottom off the pill (depending on its state; we'd have to blend this as well).</p>
<p>The possibilities are endless!</p>
<h2 id="closing">Closing</h2>
<p>I put this on the back-burner after I finished the book, and I was intending to revisit this when the blend modes got implemented in Maui.Graphics. But I'm glad I finally got around to going back and finishing this off.</p>
<p>Fancy taking up the challenge of animating the collection of messages as well as the toggle?</p>
<p>Will you use this in any projects? Would you want this in a Nuget package? Let me know!</p>
<h2 id="grab-the-code">Grab the code</h2>
<p><a href="https://github.com/matt-goldman/outlook">Link to repo on GitHub</a></p>
]]></content:encoded>
      </item>
<item>
        <title>Holy MauiGraphics Batman! Part 3: Clayface-Level Batmaths</title>
        <link>https://goforgoldman.com/posts/batmobile-part-3</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/batmobile-part-3</guid>
        <pubDate>Thu, 03 Jul 2025 00:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/batmobile-cover-part-3.png" alt="Holy MauiGraphics Batman! Part 3: Clayface-Level Batmaths" />
          Exploring the mathematics behind calculating pointer positions for custom gauges in .NET MAUI, using basic trigonometry to create precise dial movements.]]>
        </description>
        <category>mobile</category>
        <category>maui</category>
        <category>ui</category>
        <content:encoded><![CDATA[<p>Welcome back to MAUI UI July 2025! If you’ve read <a href="/posts/batmobile-part-1">Part 1</a> and <a href="/posts/batmobile-part-2">Part 2</a>, you’ve seen the Batmobile throttle and dashboard controls in action.</p>
<p>Yesterday we saw that we can give the pointer in the RPM gauge <code>endX</code> and <code>endY</code> values to enable it to point to a position on the gauge. In part 3 today we're going to explore the maths behind calculating those values.</p>
<WarningContainer title="Imnportant">
<p>Before we go any further, let me be clear that this is <em>not</em> a post for mathematicians, or even only those with a keen interest in a deep dive into some hardcore maths. This is an &quot;explain like I'm five&quot; (well maybe not <em>five</em> exactly, this is high school maths level) post. And not because I intended it that way, but because <em>I'm</em> not a mathematician, or even a maths aficionado. I haven't formally studied any maths since school, so the ELI5 approach is the thought process I went through to arrive at this solution, and I thought it would be interesting to share.</p>
</WarningContainer>
<p>If like me you haven't thought about any of this since school, you might find it tweaks some memories, but even if not, you won't need to know anything other than what a triangle is and what an angle is. Trust me, this'll be fun!</p>
<h2 id="the-problem-in-context">The Problem in Context</h2>
<p>Initially I had intended to use rotation to control movement of the dial. This would have been better than the current approach for several reasons — chiefly, it would allow us to use animation and easings, which we'll touch on later. But conceptually, I had a problem. Take a look at the following diagram:</p>
<p><figure><img src="/images/posts/batmobile-dial-pivot-1.png" alt="The dial pointer pivots from a point at the end of the line, rather than in the center"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">The dial pointer pivots from a point at the end of the line, rather than in the center</figcaption></figure></p>
<p>Adjusting the rotation of a view in .NET MAUI is as simple as setting the <code>RotationX</code> or <code>RotationY</code> properties, or using animation which is also straightforward (and even simpler with the <a href="https://github.com/jsuarezruiz/AlohaKit.Animations">AlohaKit animations library</a>). But I couldn't quite grasp how to rotate a view around a specific pivot point, rather than the center.</p>
<p>As it happens I was trying to solve an unnecessary problem - which unquestionably represents an alarming proportion of the work we spend our time on in this profession - as there is a very simple way to handle this. But by the time I had made that conceptual leap (and found out it's absolutely a solved problem, and the solution I eventually thought of is very much the standard approach) I had already come up with this approach, so I decided to keep it.</p>
<p>So instead of rotating a pointer, I decided to redraw it from its origin to a point on the gauge.</p>
<h2 id="figuring-out-the-angles">Figuring Out the Angles</h2>
<p>Whether using rotation or redrawing the line, the first thing to determine is the angle. This is the easiest part and is just straight up arithmetic. We know that the RPM is in a range between 0 and 15,000 and it's represented on a gauge that has to be between 0 and 180 degrees. So it's simple to determine that 1 degree represents 15,000 / 180 = 83.333. So I added a const to represent RPM per degree:</p>
<pre><code class="language-csharp">private const float rpmDegrees = 84;
</code></pre>
<p>Now any time the control receives a new RPM value, the angle the gauge needs to be rotated to or pointed at is just the RPM divided by this constant:</p>
<pre><code class="language-csharp">var degrees = Rpm / rpmDegrees;
</code></pre>
<p>Now all we need to do is draw a line from the origin (centre of the bottom of the dial) at that angle for the length that we want to draw the line.</p>
<p>Simple right?</p>
<p>Well, not exactly. Because you can't literally just say &quot;Draw a line from this point at this angle with this length&quot;. In MauiGraphics we need to specify two points in 2D space to draw the line to and from.</p>
<SidenoteContainer >
<p>Quick aside, remember turtles from school? Those little robots that you could program to draw shapes for you? Those were programmed with LOGO, and with LOGO you <em>could</em> give it instructions like that. Instructions were always relative to its own position and orientation. E.g. <code>right 67</code>, <code>forward 100</code>. And that's it - rotate, move forward, and the turtle draws a line (there are also pen up and pen down instructions). Modern graphics APIs don't use this approach though, and in fairness while it would be cool for this one use case, using absolute coordinate systems makes most other things much more manageable.</p>
</SidenoteContainer>
<p>We already know the &quot;from&quot; - that won't change - so we need a way to figure out the &quot;to&quot;.</p>
<h2 id="picturing-the-dial-as-triangles">Picturing the Dial as Triangles</h2>
<p>To determine the <code>x</code> and <code>y</code> coordinates for the end of the pointer, we can imagine a right-angle triangle, with the pivot point at the origin, and an imaginary vertical line from the bottom of the gauge to the end of the pointer. The pointer itself forms the hypotenuse, as in the following diagram:</p>
<p><figure><img src="/images/posts/batmobile-dial-triangle1.png" alt="If we project an imaginary vertical line connecting the tip of the pointer to the base of the gauge, the base, line, and pointer form a right-angle triangle, with the pointer as the hypotenuse"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">If we project an imaginary vertical line connecting the tip of the pointer to the base of the gauge, the base, line, and pointer form a right-angle triangle, with the pointer as the hypotenuse</figcaption></figure></p>
<p>Fortunately, this simplifies things for our use case. Calculating lengths and angles in triangles is an entire field within geometry; namely trigonometry, so making the cognitive leap to picture this as a triangle means that working out the coordinates we need is a solved problem (one that was solved thousands of years ago, in fact).</p>
<h2 id="enter-sohcahtoa">Enter SOHCAHTOA</h2>
<p>Remember <a href="https://www.mathsisfun.com/algebra/sohcahtoa.html">SOHCAHTOA</a>? From school? One of those things you were <em>absolutely</em> certain you would never, ever use or even think about ever again? Don't worry if you don't - we'll go through it now. And if you do, feel free to skip over this, or read through it with a fine-toothed comb and let me know how horribly wrong I got everything.</p>
<p>Anyway, it turns out you can use trigonometry for building UI 🤷</p>
<p>For a right-angle triangle, SOHCAHTOA are formulas we can use to calculate the other two angles, without measuring them directly, using the lengths of the sides.</p>
<p>As a quick recap, there are specific names given to the sides in a right-angle triangle, relative to the angle you are trying to calculate, as shown in the following diagram.</p>
<p><figure><img src="/images/posts/batmobile-maths-sohcachtoa-triangle.png" alt="A right-angle triangle, with the opposite, adjacent, and hypotenuse labelled, as well as the the angle being calculated - theta (θ)"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">A right-angle triangle, with the opposite, adjacent, and hypotenuse labelled, as well as the the angle being calculated - theta (θ)</figcaption></figure></p>
<p>The side that does not form part of the right-angle is always called the hypotenuse; the side touching the angle you want to calculate is called the adjacent, and the side not touching it is called the opposite. The angle you are trying to calculate is denoted by the Greek letter theta(θ).</p>
<p>The SOHCAHTOA formulas let you calculate θ using only the lengths of two of the other sides. As a recap, the formulas are:</p>
<ul>
<li><strong>S</strong>in(θ) = <strong>O</strong>pposite / <strong>H</strong>ypotenuse</li>
</ul>
<p><figure><img src="/images/posts/batmobile-maths-soh.png" alt="sine theta equals opposite over hypotenuse"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">sine theta equals opposite over hypotenuse</figcaption></figure></p>
<ul>
<li><strong>C</strong>os(θ) = <strong>A</strong>djacent / <strong>H</strong>ypotenuse</li>
</ul>
<p><figure><img src="/images/posts/batmobile-maths-cah.png" alt="cosine theta equals adjacent over hypotenuse"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">cosine theta equals adjacent over hypotenuse</figcaption></figure></p>
<ul>
<li><strong>T</strong>an(θ) = <strong>O</strong>pposite / <strong>A</strong>djacent</li>
</ul>
<p><figure><img src="/images/posts/batmobile-maths-toa.png" alt="tangent theta equals opposite over adjacent"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">tangent theta equals opposite over adjacent</figcaption></figure></p>
<p>Sine, cosine, and tangent are logarithmic functions, meaning they are calculated using values in a table. That's outside of scope of this post, but any basic scientific calculator has buttons for them, so you don't need to know how to derive them. More importantly for us, the .NET BCL has them built in too, and we'll see how to use them shortly.</p>
<p>While the SOHCAHTOA formulas are typically used for calculating the angle based on the lengths, in our case we've already got the angle, and we're trying to calculate the <em>x</em> and <em>y</em> position of the intersection between the opposite and hypotenuse. Let's look at how we do that.</p>
<h2 id="rearranging-the-formulae">Rearranging the Formulae</h2>
<p>So far we've got θ which we derive from the RPM. The hypotenuse is also a fixed length, as the length of the pointer doesn't change, so this can go in a <code>const</code> just as we did with <code>rpmDegrees</code>:</p>
<pre><code class="language-csharp">// hypotenuse
private const float pointerLength = 125;
</code></pre>
<p>Now that we've got the angle and the hypotenuse, we can calculate the lengths of both of the other sides. To do this, we need to rearrange the SOHCAHTOA formulae - currently, they have θ on the left side of the equals sign, and the lengths on the right side. We need θ on the right and the length we're trying to calculate on the left.</p>
<p>One easy way to do this is to use a formula triangle. You may have seen these for <em>speed</em> = <em>distance</em> x <em>time</em>, or <em>V</em> = <em>I</em> x <em>R</em>. For the SOHCAHTOA formulas they look like this:</p>
<p><figure><img src="/images/posts/triangle-soh.png" alt="The formula triangle for SOH"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">The formula triangle for SOH</figcaption></figure></p>
<p>From here, we can easily see that the formula we already have for deriving θ can be rearranged to find the hypotenuse from θ and the opposite:</p>
<p><figure><img src="/images/posts/batmobile-maths-host.png" alt="Hypotenuse equals opposite divided by sine theta"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">Hypotenuse equals opposite divided by sine theta</figcaption></figure></p>
<p>Or more importantly, in our case, to find the opposite from θ and the hypotenuse:</p>
<p><figure><img src="/images/posts/batmobile-maths-osth.png" alt="Opposite equals sine theta times hypotenuse"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">Opposite equals sine theta times hypotenuse</figcaption></figure></p>
<p>We can do the same thing with cosine to find the adjacent:</p>
<p><figure><img src="/images/posts/triangle-cah.png" alt="The formula triangle for CAH"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">The formula triangle for CAH</figcaption></figure></p>
<p>Which easily lets us see:</p>
<p><figure><img src="/images/posts/batmobile-maths-acosth.png" alt="Adjacent equals cosine theta times hypotenuse"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">Adjacent equals cosine theta times hypotenuse</figcaption></figure></p>
<InfoContainer >
<p>We can do the same for TOA as well, but that's not particularly useful in our case, given it depends on the two sides we're trying to find.</p>
</InfoContainer>
<p>Now that we know how to get the lengths of the other two sides, we're finally ready to use these to figure out the <em>x</em> and <em>y</em> coordinates we need for the end of our pointer.</p>
<h2 id="getting-to-the-pointy-end">Getting to the Pointy End</h2>
<p>The length of the hypotenuse is fixed, we know the angle, so using SOHCAHTOA (well, SOHCAH to be precise) we can find the length of the opposite and adjacent sides:</p>
<p><figure><img src="/images/posts/batmobile-length-of-sides.png" alt="The lengths of the opposite and adjacent sides can be calculated using the hypotenuse, which is fixed, and the angle, which is derived from the RPM"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">The lengths of the opposite and adjacent sides can be calculated using the hypotenuse, which is fixed, and the angle, which is derived from the RPM</figcaption></figure></p>
<p>These are relative to the pointer's origin though, which is not the canvas' origin. The canvas starts at <em>0,0</em>, in the top left, and the pointer starts at <em>155,155</em>. We've got <em>x</em> and <em>y</em> relative to the pointer's origin, so to find the end of the pointer relative to the canvas, we can simply subtract <em>x</em> and <em>y</em> from <em>155</em>.</p>
<p><figure><img src="/images/posts/batmobile-mathsendxy.png" alt="The x and y values we have are relative to the pointer's origin, which at 155,155, so we subtract x and y from 155 to get the position relative to the canvas"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">The x and y values we have are relative to the pointer's origin, which at 155,155, so we subtract x and y from 155 to get the position relative to the canvas</figcaption></figure></p>
<p>With these, we can now draw our pointer, but there's a catch: this will <em>only</em> work if the RPM is less than <em>7,500</em>. To form an acute angle (less than 90 degrees), the pointer must remain on the left side of the gauge.</p>
<p><figure><img src="/images/posts/batmobile-no-rightangle.png" alt="With an angle greater than 90 degrees, we don't form a right-angle"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">With an angle greater than 90 degrees, we don't form a right-angle</figcaption></figure></p>
<p>Fortunately, unit circle mathematics and the rules for sine, cosine, and tangent work in full 360 degrees. SOHCAHTOA works for right-angle triangles, but there are other arrangements that work the whole way around.</p>
<p>But, even more fortunately, we can avoid all that by flipping the triangle (conceptually) and calculating the angles from the other side:</p>
<p><figure><img src="/images/posts/batmobile-dial-triangle2.png" alt="Just flip the triangle to the other side and we get our right-angle back"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">Just flip the triangle to the other side and we get our right-angle back</figcaption></figure></p>
<p>We can subtract the angle calculated with the RPM from 180 to get the angle for this portion of the gauge, which means we're always working with a right-angle triangle. This means the formulas don't change, the <em>endY</em> position doesn't change, and for <em>endX</em> we can just add it to 155 instead of subtracting it. No need to dig out our school textbooks (or, realistically, Google) to remind ourselves how to work with oblique triangles (and totally remember that they are called oblique triangles without having to look it up).</p>
<p>And that's it! We're finally ready to draw the line.</p>
<h2 id="putting-it-all-together">Putting it All Together</h2>
<p>As we saw in Part 2 yesterday, calculating all this is the responsibility of the <code>Dashboard</code>. It calculates the <em>endX</em> and <em>endY</em> values any time the RPM changes, and sends those to the pointer to be redrawn.</p>
<p>As we've been through the steps here, I'll just show the code rather than stepping through it, with some comments to help tie it to what we've already seen.</p>
<pre><code class="language-csharp">// Called from the propertyChanged handler
// of the Rpm bindable property
public void DrawPointer()
{
    // theta
    float degrees;

    // Rpm is 0 to 15,000
    // 0 to 180 degrees
    // 0 to 7500 is 0 to 90 degrees (opposite on the left side of the gauge)
    // 7500 to 15,000 is 90 to 180 degrees (opposite on the right side of the gauge)
    if (Rpm &gt;= 7500)
    {
        degrees = 180 - (Rpm / rpmDegrees);
    }
    else
    {
        degrees = Rpm / rpmDegrees;
    }

    // Annoyingly, even though Sin and Cos are formally defined
    // with degrees, the BCL expects us to provide radians to
    // the functions in the Math namespace.
    var radians = degrees * Math.PI / 180;

    var sin = Math.Sin(radians);
    var cos = Math.Cos(radians);

    // opposite = y
    var y = sin * pointerLength;

    // adjacent = x
    var x = cos * pointerLength;

    // We'll have to determine whether to add or subtract
    // this to the pointer origin based on RPM
    float endX;

    // Y doesn't invert based on RPM so we can just calculate it
    var endY = 155 - (float)y;

    if (Rpm &lt; 7500)
    {
        // if RPM is less than 7500, x will be on the left
        // side of the gauge
        endX = 155 - (float)x;
    }
    else
    {
        // if RPM is greater than 7500, x will be on the
        // right side of the gauge
        endX = 155 + (float)Math.Abs(x);
    }

    Pointer.Drawable = new Pointer(endX, endY);
}
</code></pre>
<p>While this may not be the cleanest approach, or the most efficient, or even the best looking, I think it's cool to see how we can use pointless arcane maths we learned in school to build a Batman themed UI. I don't remember much of school, but I can confidently say I enjoyed re-learning these concepts this time more than I did the first time around!</p>
<h2 id="cleaner-approaches">Cleaner Approaches</h2>
<p>While there's nothing technically wrong with what I've done here (as far as I know - any mathematicians reading this are welcome to correct me), there are a couple of approaches that would in theory at least be a bit better.</p>
<h3 id="unit-circle-definitions">Unit circle definitions</h3>
<p>I won't go into these here, but technically the triangle flip wasn't necessary. The Law of Sines and Law of Cosines work with any triangles, oblique or right-angle. We still need the logic to check whether the RPM is above or below 7,500. This is necessary to determine whether to add or subtract the length of the adjacent from the pointer's origin, to position it relative to the canvas origin. But using these formulae would let us have one <code>if</code> condition rather than two.</p>
<h3 id="a-rotating-pointer">A rotating pointer</h3>
<p>I've mentioned this a few times across these posts, but if I were building a gauge for an actual product, I wouldn't do this. I would use a rotating graphic instead of redrawing a line. As well as drawing a more interesting pointer, it also allows for animation and easings.</p>
<p>You can only rotate around the center point, which is what tripped me up initially, but that's actually not a problem. Simply render the pointer on only one half of your <code>IDrawable</code> - and it turns out this is in fact the actual approach to this, and another common hack I rediscovered.</p>
<p><figure><img src="/images/posts/batmobile-maths-PIVOT.png" alt="By drawing the pointer from the center of the view, we can still rotate the whole view by the required angle, and keep the pointer pivoting around the correct point"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">By drawing the pointer from the center of the view, we can still rotate the whole view by the required angle, and keep the pointer pivoting around the correct point</figcaption></figure></p>
<p>This is the best approach:</p>
<ul>
<li>Better pointer graphic</li>
<li>Smoother rotation with animation and easings</li>
<li>No maths (just give it the angle)</li>
</ul>
<h2 id="wrap-up">Wrap-up</h2>
<p>This brings us to the end of the MAUI UI July Batmobile series. There's one more post to come in which we'll look at the gRPC implementation, the technical debt, and some options to improve the architecture and code.</p>
<p>In the meantime, there's one last UI challenge to take away. One last feature I've always wanted to add to this is audio - I'd love to have a throaty engine noise with a pitch that changes relative to the RPM. I've got a few ideas about how to implement that - none of them particularly easy - but all very doable.</p>
<p>Is that something you think you could take on? What other feature would you like to see (or do you think Batman needs)? And, perhaps most importantly of all, do you suddenly care about maths again?</p>
<p>Stay tuned for the rest of MAUI UI July 2025, we've got some great content coming!</p>
]]></content:encoded>
      </item>
<item>
        <title>Holy MauiGraphics Batman! Part 2: The RPM Gauge</title>
        <link>https://goforgoldman.com/posts/batmobile-part-2</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/batmobile-part-2</guid>
        <pubDate>Wed, 02 Jul 2025 00:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/batmobile-cover-part-2.png" alt="Holy MauiGraphics Batman! Part 2: The RPM Gauge" />
          Creating a real-time RPM dashboard for the Batcave using .NET MAUI Graphics with custom gauge backgrounds, moving dials, and telemetry data visualization.]]>
        </description>
        <category>mobile</category>
        <category>maui</category>
        <category>ui</category>
        <content:encoded><![CDATA[<p>Welcome back to MAUI UI July 2025. In <a href="/posts/batmobile-part-1">Part 1</a>, we built a custom throttle control for the Batmobile. Today, we’re heading into the Batcave to build a live RPM dashboard that visualises the data stream in real time.</p>
<h2 id="dashboard-overview">Dashboard Overview</h2>
<p>The dashboard is composed of three layers:</p>
<ol>
<li><strong>A fixed gauge background</strong></li>
<li><strong>A moving dial (the pointer)</strong></li>
<li><strong>Telemetry bindings</strong></li>
</ol>
<p>Let’s walk through how each part is drawn, building on the same MauiGraphics principles introduced in Part 1 — using <code>IDrawable.Draw</code> and <code>ICanvas</code> to create custom visual elements.</p>
<h2 id="drawing-the-gauge">Drawing the Gauge</h2>
<p>The gauge is rendered with a combination of arcs and a redline segment. We start by drawing a semi-circle and overlaying a red wedge to indicate the danger zone. We can see how these are achieved in the <code>Draw</code> method of the <code>RpmGauge</code> control in the <code>Batcave</code> project. First, the wedge:</p>
<pre><code class="language-csharp">// File: Controls/RpmGauge.cs
canvas.StrokeSize = 4;
var path = new PathF();
path.MoveTo(155, 155);
path.LineTo(305, 155);
path.LineTo(305, 155);
path.CurveTo(new PointF(305, 155), new PointF(305, 140), new PointF(290, 90));
path.LineTo(155, 155);
path.Close();
canvas.FillColor = Colors.Red;
canvas.FillPath(path);
</code></pre>
<InfoContainer >
<p>Note: The duplicate line (<code>path.LineTo(305,155</code>) is not a mistake. This is a workaround for an <a href="https://github.com/dotnet/maui/issues/5691">open issue</a>.</p>
</InfoContainer>
<p>Most of this code is similar to what we've already seen.</p>
<p>Note that on the curve the first control point is the same as the start point. This creates a smooth, rounded arc that curves toward the second control point and finishes at the end point. Technically this is a misuse of Bezier curves, where each control point is used to steer the curve. <em>Technically</em> <code>DrawArc</code>  is the correct way to construct this geometry. But <code>DrawArc</code> creates a distinct primitive from our <code>path</code>, meaning we can't fill the whole shape. We will use it shortly for something else, but using Bezier curves with one control point at the start or end is a handy (and common) technique.</p>
<pre><code class="language-csharp">// File: Controls/RpmGauge.cs
canvas.StrokeColor = Colors.Black;
canvas.DrawArc(5, 5, 300, 300, 0, 180, false, false);
</code></pre>
<p>We set the stroke to black and then use <code>DrawArc</code>. An arc is different to a curve - a curve uses control points to create arbitrary shapes and angles, whereas an arc is a portion of an ellipse.</p>
<p>We specify the start x and y points (<code>5,5</code> in this case), the width and height of the ellipse (<code>300</code> and <code>300</code> in this case - and as they are equal that makes this ellipse a circle), the start and end angle, and whether the arc is drawn clockwise, and whether it is closed.</p>
<p>With 0 degrees pointing right (3 o’clock) and 180 to the left (9 o’clock), setting <code>IsClockwise</code> to false draws the arc over the top. Setting it to <code>true</code> would draw the arc under the bottom - but you could still draw it clockwise correctly over the top by reversing the start and end angles.</p>
<p>Finally, we define the <code>Closed</code> property as false; if we made it <code>true</code>, it would draw a line between the start and end points to create a closed semi-circle.</p>
<p>This gives us the top arc and red-zone wedge for the gauge:</p>
<p><figure><img src="/images/posts/batcave-gauge.png" alt="The completed gauge arc and red-zone"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">The completed gauge arc and red-zone</figcaption></figure></p>
<h2 id="drawing-the-pointer">Drawing the Pointer</h2>
<p>The pointer is about as simple as it gets - it's just a line. It's another <code>IDrawable</code> defined in the <code>Pointer.cs</code> file. It's got public <code>endX</code> and <code>endY</code> properties, and the <code>Draw</code> method simply draws a line from the center of the arc (<code>155,155</code>) to the end points:</p>
<pre><code class="language-csharp">// File: Controls/Pointer.cs
canvas.StrokeLineCap = LineCap.Round;
canvas.StrokeColor = Colors.Black;
canvas.StrokeSize = 8;
canvas.DrawLine(155, 155, endX, endY);
</code></pre>
<p>This does couple it to the gauge/dial, but that's the intent here so that's ok. We will look at some alternative approaches later, but this is suitable for our needs. We've also defined the line cap as round rather than square, which works a bit better for the pointer.</p>
<p><figure><img src="/images/posts/batcave-pointer.png" alt="The simple pointer from the Batcave's RPM gauge is just a line with a round cap"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">The simple pointer from the Batcave's RPM gauge is just a line with a round cap</figcaption></figure></p>
<p>The challenging part is calculating what the <code>endX</code> and <code>endY</code> values should be - but that's not a concern of this control. That's handled in the <code>Dashboard</code> <code>ContentView</code>, which assembles the two <code>IDrawables</code> as well.</p>
<p>The start and end points are calculated with some very straightforward trigonometry - but <em>don't run away</em>! It's actually <em>very</em> easy (believe me, I'm no mathematician!), and we're not going to cover it here anyway, I've saved that for tomorrow.</p>
<h3 id="assembling-the-control">Assembling the Control</h3>
<p>We layer the gauge and pointer in a shared <code>Grid</code> inside a <code>ContentView</code>:</p>
<pre><code class="language-xml">&lt;!-- File: Controls/Dashboard.xaml --&gt;
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;ContentView xmlns=&quot;http://schemas.microsoft.com/dotnet/2021/maui&quot;
             xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;
             xmlns:controls=&quot;clr-namespace:Batcave.Controls&quot;
             x:Class=&quot;Batcave.Controls.Dashboard&quot;&gt;
    &lt;ContentView.Resources&gt;
        &lt;controls:RpmGauge x:Key=&quot;Gauge&quot;/&gt;
        &lt;controls:Pointer x:Key=&quot;Pointer&quot;/&gt;
    &lt;/ContentView.Resources&gt;
    &lt;ContentView.Content&gt;
        &lt;Grid&gt;
            &lt;GraphicsView Drawable=&quot;{StaticResource Gauge}&quot;
                          HorizontalOptions=&quot;Center&quot;
                          WidthRequest=&quot;305&quot;
                          HeightRequest=&quot;300&quot;/&gt;

            &lt;GraphicsView HorizontalOptions=&quot;Center&quot;
                          Drawable=&quot;{StaticResource Pointer}&quot;
                          WidthRequest=&quot;305&quot;
                          HeightRequest=&quot;300&quot;
                          x:Name=&quot;Pointer&quot;/&gt;

            &lt;Label x:Name=&quot;MathCheck&quot;
                   VerticalOptions=&quot;End&quot;
                   HorizontalOptions=&quot;Start&quot;
                   TextColor=&quot;Green&quot;
                   MaximumWidthRequest=&quot;600&quot;/&gt;
        &lt;/Grid&gt;
    &lt;/ContentView.Content&gt;
&lt;/ContentView&gt;
</code></pre>
<p>The label was added as a dev tool to surface the calculated angle, but I liked the way it looked, like streaming telemetry, so kept it in.</p>
<h3 id="bindings">Bindings</h3>
<p>In addition to layout, <code>Dashboard</code> exposes a bindable property called <code>Rpm</code>. In the <code>MainPage</code> we subscribe to RPM updates over gRPC and assign them to a binding source for this control.</p>
<p>The <code>propertyChanged</code> delegate calculates the start and end points (using <a href="https://www.mathsisfun.com/algebra/sohcahtoa.html">SOHCAHTOA</a>, which we will dive into tomorrow) and assigns a new instance of the <code>Pointer</code> passing the <code>x</code> and <code>y</code> values via constructor.</p>
<p>Every time the RPM updates (via GRPC), this results in the line being redrawn, always from the centre to the defined end points we calculate.</p>
<h2 id="assembling-in-the-page">Assembling in the page</h2>
<p>The <code>MainPage</code> does a little more than just plonk the <code>Dashboard</code> on the screen. It also renders a 'screen', using a <code>Border</code> and a <code>RadialGradientBrush</code>. It also has some labels (for context as well as the RPM) and a switch that toggles subscription to the gRPC screen.</p>
<pre><code class="language-xml">&lt;!-- File: MainPage.xaml --&gt;
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;ContentPage xmlns=&quot;http://schemas.microsoft.com/dotnet/2021/maui&quot;
             xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;
             xmlns:controls=&quot;clr-namespace:Batcave.Controls&quot;
             BackgroundColor=&quot;Gray&quot;
             x:Class=&quot;Batcave.MainPage&quot;&gt;
    &lt;Grid RowDefinitions=&quot;7*, 1*&quot;&gt;
        &lt;Border Grid.Row=&quot;0&quot;
                Stroke=&quot;White&quot;
                StrokeThickness=&quot;5&quot;
                Margin=&quot;0,20,0,0&quot;
                WidthRequest=&quot;1000&quot;
                HorizontalOptions=&quot;Center&quot;&gt;
            &lt;Border.StrokeShape&gt;
                &lt;RoundRectangle CornerRadius=&quot;40&quot;/&gt;
            &lt;/Border.StrokeShape&gt;
            &lt;Border.Background&gt;
                &lt;RadialGradientBrush Center=&quot;0.75,0.25&quot;&gt;
                    &lt;GradientStop Color=&quot;{StaticResource ScreenGradientStart}&quot;
                                  Offset=&quot;0.1&quot;/&gt;
                    &lt;GradientStop Color=&quot;{StaticResource ScreenGradientStop}&quot;
                                  Offset=&quot;1.0&quot;/&gt;
                &lt;/RadialGradientBrush&gt;
            &lt;/Border.Background&gt;
        &lt;/Border&gt;

        &lt;VerticalStackLayout Grid.Row=&quot;0&quot;
                             Margin=&quot;100&quot;
                             VerticalOptions=&quot;Center&quot;
                             HorizontalOptions=&quot;Center&quot;&gt;
            &lt;Label HorizontalOptions=&quot;Center&quot;
                   FontSize=&quot;24&quot;
                   Text=&quot;RPM:&quot;
                   Margin=&quot;20&quot;/&gt;

            &lt;Label HorizontalOptions=&quot;Center&quot;
                   FontSize=&quot;48&quot;
                   Text=&quot;{Binding Rpm}&quot;
                   Margin=&quot;20&quot;/&gt;

            &lt;controls:Dashboard Rpm=&quot;{Binding Rpm, Mode=TwoWay}&quot;/&gt;

        &lt;/VerticalStackLayout&gt;

        &lt;HorizontalStackLayout Grid.Row=&quot;1&quot;
                               HorizontalOptions=&quot;CenterAndExpand&quot;&gt;
            &lt;Label
               Margin=&quot;350,30,200,30&quot;
               FontSize=&quot;24&quot;
               HorizontalOptions=&quot;CenterAndExpand&quot;
               VerticalOptions=&quot;Center&quot;
               FontFamily=&quot;Batman&quot;
               TextColor=&quot;White&quot;
               Text=&quot;BatComputer&quot;/&gt;

            &lt;Switch
                Margin=&quot;0,30&quot;
                HorizontalOptions=&quot;EndAndExpand&quot;
                ThumbColor=&quot;White&quot;
                VerticalOptions=&quot;Center&quot;
                IsToggled=&quot;{Binding IsComputerOn}&quot;/&gt;
        &lt;/HorizontalStackLayout&gt;
    &lt;/Grid&gt;
&lt;/ContentPage&gt;
</code></pre>
<p>It also handles the gRPC RPM client, which it sets as the binding context, allowing the <code>RPM</code> property to be bound to the dashboard.</p>
<p>And this gives us the completed BatComputer!</p>
<h2 id="wrap-up">Wrap-up</h2>
<p>And there you have it — a retro-futuristic RPM gauge using nothing but .NET MAUI and a little bit of maths. It’s performant, responsive, and really satisfying to see it animate live.</p>
<p><figure><img src="/images/posts/batcave-finished-screen.jpeg" alt="The finished RPM dashboard in the Batcave"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">The finished RPM dashboard in the Batcave</figcaption></figure></p>
<p>If you haven’t yet, check out Part 1 for the throttle. The full source is also on <a href="https://github.com/matt-goldman/MauiBatmobile">GitHub</a>. Feel free to run it yourself, or make some changes (I cover some potential improvements in the last part of this series).</p>
<p>Check back in tomorrow for a dive into the trigonometry behind calculating the start and end points, and at the end we'll explore some improvements and additional features we could include.</p>
<p>Will the BatNeedle hold up under the pressure of real-time rendering?
Will our trigonometric tricks stand firm when RPMs rise?
Or will the quadrant-quibbling and fill-path-fudging finally catch up with our caped coder?</p>
<p>Can the dashboard survive without easing? Will gradients cause graphical gridlock?</p>
<p>Stay tuned, Batfans — tomorrow we descend even deeper into the swirling vortex of circular logic, animated arcs, and the unspeakable evil that is… <strong>Clayface-level trigonometry!</strong></p>
<p>Same Bat-time!
Same Bat-channel!</p>
<p>I'll be waiting in the Batcave.</p>
]]></content:encoded>
      </item>
<item>
        <title>Holy MauiGraphics Batman! Part 1: Batmobile Throttle Control</title>
        <link>https://goforgoldman.com/posts/batmobile-part-1</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/batmobile-part-1</guid>
        <pubDate>Tue, 01 Jul 2025 00:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/batmobile-cover-part-1.png" alt="Holy MauiGraphics Batman! Part 1: Batmobile Throttle Control" />
          Building a custom Batmobile throttle control using .NET MAUI Graphics and IDrawable to create retro-futuristic UI elements with interactive touch controls.]]>
        </description>
        <category>mobile</category>
        <category>maui</category>
        <category>ui</category>
        <content:encoded><![CDATA[<p><strong>Here's what we'll build</strong></p>
<p><figure><img src="/images/posts/batmobile-muij2025.gif" alt="Here's what we're going to build"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">Here's what we're going to build</figcaption></figure></p>
<p>Welcome to <a href="https://goforgoldman.com/posts/mauiuijuly-25/">MAUI UI July 2025</a>! In this post, we're building a custom throttle control using .NET MAUI and <code>IDrawable</code> from MauiGraphics. This is part of a retro-futuristic Batmobile telemetry system that includes both input (throttle) and output (RPM dashboard), connected over gRPC. In part 1 we'll focus the input side: the throttle UI Batman uses to control the beast. Tomorrow we'll dive into the output side: an RPM gauge rendered on the BatComputer.</p>
<p>This project was originally developed as part of my book but didn’t make the final cut, so I've resurrected it here with some upgrades and insights.</p>
<p>Stick around for parts 2 and 3 covering the rest of the UI, and a bonus part 4 covering the gRPC aspects (not part of MAUI UI July). If you can't wait, and just want to see the code, the full solution <a href="https://github.com/matt-goldman/MauiBatmobile">is on GitHub</a>. The code contains detailed comments reflecting the detail provided here.</p>
<h2 id="mauigraphics-basics">MauiGraphics Basics</h2>
<p>The main MauiGraphics interface we use is <code>IDrawable</code>, which defines the <code>Draw</code> method used to render graphics on screen.</p>
<pre><code class="language-csharp">public class MyDrawable : IDrawable
{
    public void Draw(ICanvas canvas, RectF dirtyRect)
    {

    }
}
</code></pre>
<p>The <code>Draw</code> method accepts two parameters: <code>ICanvas</code> and <code>RectF</code>. The <code>ICanvas</code> represents the surface we're going to render our graphics onto. The <code>RectF</code> provides information about the surface that canvas is on (like size and location) which can be used to adjust what we draw. In this series I only use the <code>canvas</code> and not the <code>dirtyRect</code>.</p>
<p><code>ICanvas</code> exposes properties and methods for drawing on screen — like setting stroke color, defining paths, and rendering shapes. I'm not covering the full API here, just what I used to build the Batmobile. You can refer to the <a href="https://learn.microsoft.com/en-us/dotnet/maui/user-interface/graphics/?view=net-maui-9.0">documentation</a> for more — or better yet, browse the <a href="https://github.com/dotnet/maui-samples/tree/main/10.0/UserInterface/Views/GraphicsViewDemos">sample code</a>, which shows several use cases as well as how to use them.</p>
<h2 id="the-throttle-ui">The Throttle UI</h2>
<p>The throttle consists of three parts:</p>
<ol>
<li>Two vertical rails</li>
<li>A sliding handle</li>
<li>Drag logic and RPM binding</li>
</ol>
<p>Each component is rendered using <code>IDrawable</code> objects and combined in a <code>ContentView</code>.</p>
<p>The rails are rendered using an <code>IDrawable</code> (in the <code>ThrottleRails</code> class), the handle is another <code>IDrawable</code> (in the <code>ThrottleHandle</code> class), and a <code>ContentView</code> (the <code>Throttle</code> class) combines them and handle the logic for dragging the handle and a bindable property for the RPM value.</p>
<p>Let’s break it down.</p>
<h3 id="drawing-the-rails">Drawing the Rails</h3>
<p>In the <code>Draw</code> method, we begin by defining the stroke color and size:</p>
<pre><code class="language-csharp">// File: Controls/ThrottleRails.cs
canvas.StrokeColor = Colors.Black;
canvas.StrokeSize = 2;
</code></pre>
<p>Graphically, this control is two vertical rails, each defined as a simple rectangle path. So, we add a <code>PathF</code> object and use that to describe a rectangle, then pass it to the <code>DrawPath</code> method of the <code>ICanvas</code>:</p>
<pre><code class="language-csharp">// File: Controls/ThrottleRails.cs
path.MoveTo(60, 40);
path.LineTo(60, 410);
path.LineTo(70, 410);
path.LineTo(70, 40);
path.Close();
canvas.DrawPath(path);

path.MoveTo(430, 40);
path.LineTo(430, 410);
path.LineTo(440, 410);
path.LineTo(440, 40);
path.Close();
canvas.DrawPath(path);
</code></pre>
<p>This draws two rectangles:</p>
<p><figure><img src="/images/posts/batmobile-throttle-rails.png" alt="The paths we've defined create two vertically oriented rectangles"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">The paths we've defined create two vertically oriented rectangles</figcaption></figure></p>
<p>If you think of it like a robot holding a pen, <code>MoveTo</code> is used to move the pen to a position without drawing anything. This is how we're able to use the same <code>path</code> object for two disconnected rails. Note also that <code>LineTo</code> (and other methods that create drawn geometry) don't actually render on the canvas; the whole <code>path</code> object only <em>describes</em> the geometry while the <code>ICanvas</code> renders it itself.</p>
<p>If you've ever peeked under the hood of an SVG file (or you know how the format works), it's very similar; in fact the <code>MoveTo</code>, <code>LineTo</code>, and <code>CurveTo</code> (which we'll see next) are directly analogous to the <code>M</code>, <code>L</code>, and <code>C</code> SVG commands.</p>
<InfoContainer >
<p>Note: it would have been much simpler to draw rectangles than paths, and all of the above code could be achieved in two lines. But I used this long-hand approach to demonstrate the concepts of moving and drawing.</p>
</InfoContainer>
<h3 id="drawing-the-handle">Drawing the Handle</h3>
<p>The handle is a rounded capsule shape filled with a vertical gradient. Rather than define the gradient in the <code>Draw</code> method we can define it as a static property of the class. This saves it being instantiated in every frame and is a little more GC friendly.</p>
<pre><code class="language-csharp">// File: Controls/ThrottleHandle.cs
private readonly LinearGradientPaint gradient = new LinearGradientPaint
{
    StartColor = Color.FromRgb(103, 103, 103),
    EndColor = Color.FromHsv(226, 18, 100),
    StartPoint = new Point(0.5, 1),
    EndPoint = new Point(0.5, 0)
};
</code></pre>
<p>In the <code>Draw</code> method we start out by defining the stroke and outline:</p>
<pre><code class="language-csharp">// File: Controls/ThrottleHandle.cs
canvas.StrokeColor = Colors.Black;
canvas.StrokeSize = 5;

var path = new PathF();

path.MoveTo(50, 50);
path.LineTo(450, 50);
path.CurveTo(new PointF(470, 50), new PointF(470, 100), new PointF(450, 100));
path.LineTo(50, 100);
path.CurveTo(new PointF(30, 100), new PointF(30, 50), new PointF(50, 50));
path.Close();
</code></pre>
<p>This time, instead of just using lines, we've added curves to the mix too. The <code>CurveTo</code> method let's us define a <a href="https://pomax.github.io/bezierinfo/#introduction">Bézier curve</a> with two control points and the end point, with the start at the current location on the path (in these examples, the coordinates defined in the preceding <code>LineTo</code> calls).</p>
<p>Next we define a rectangle to hold the gradient background:</p>
<pre><code class="language-csharp">// File: Controls/ThrottleHandle.cs
var fillRect = new RectF(30, 50, 440, 50);
canvas.SetFillPaint(Gradient, fillRect);
</code></pre>
<p>Here we're defining a rectangle to hold our gradient. You can see it extends from the leftmost tip of the curve on the left to the same on the other side - this would leave some corners sticking out, but we can use <code>ClipPath</code> to trim it down to the geometry we want before using a fill method (in this case <code>FillRoundedRectangle</code>) to paint the gradient.</p>
<pre><code class="language-csharp">// File: Controls/ThrottleHandle.cs
canvas.ClipPath(path);
canvas.FillRoundedRectangle(fillRect, 12);
</code></pre>
<p>Probably worth pausing here to reflect on the importance of the order of operations. There's a reason we use the canvas concept - every operation paints a layer on top of what's already there. Operations like clipping don't affect what's already on the canvas.</p>
<p>Finally we draw the outline path - again, following the layering concept, this has to be done after the gradient, otherwise the gradient would cover it.</p>
<pre><code class="language-csharp">// File: Controls/ThrottleHandle.cs
canvas.DrawPath(path);
canvas.SetShadow(new SizeF(10, -10), 4, Colors.Grey);
</code></pre>
<p>We also set a small shadow which helps the handle appear to be above the rails. This gives us the final result for the handle:</p>
<p><figure><img src="/images/posts/batmobile-throttle-handle.png" alt="The throttle handle is an elongated capsule shape with an outline and gradient filling and a thick black outline"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">The throttle handle is an elongated capsule shape with an outline and gradient filling and a thick black outline</figcaption></figure></p>
<h3 id="layout-and-gesture">Layout and Gesture</h3>
<p>Here’s how we compose the full control in XAML:</p>
<pre><code class="language-xml">&lt;!-- file: Controls/Throttle.xaml --&gt;
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;ContentView xmlns=&quot;http://schemas.microsoft.com/dotnet/2021/maui&quot;
             xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;
             x:Class=&quot;Batmobile.Controls.Throttle&quot;
             xmlns:draw=&quot;clr-namespace:Batmobile.Controls&quot;&gt;
    &lt;ContentView.Resources&gt;
        &lt;draw:ThrottleHandle x:Key=&quot;Handle&quot;/&gt;
        &lt;draw:ThrottleRails x:Key=&quot;Rails&quot;/&gt;
    &lt;/ContentView.Resources&gt;
    &lt;ContentView.Content&gt;
        &lt;Grid HorizontalOptions=&quot;Center&quot;&gt;
            &lt;GraphicsView Drawable=&quot;{StaticResource Rails}&quot;
                          x:Name=&quot;rails&quot;
                          HorizontalOptions=&quot;Center&quot;
                          WidthRequest=&quot;500&quot;
                          HeightRequest=&quot;600&quot;/&gt;

            &lt;GraphicsView Drawable=&quot;{StaticResource Handle}&quot;
                          x:Name=&quot;handle&quot;
                          VerticalOptions=&quot;Start&quot;
                          HorizontalOptions=&quot;Center&quot;
                          WidthRequest=&quot;500&quot;
                          HeightRequest=&quot;200&quot;&gt;
                &lt;GraphicsView.GestureRecognizers&gt;
                    &lt;PanGestureRecognizer PanUpdated=&quot;ThrottlePanUpdated&quot;/&gt;
                &lt;/GraphicsView.GestureRecognizers&gt;
            &lt;/GraphicsView&gt;
        &lt;/Grid&gt;
    &lt;/ContentView.Content&gt;
&lt;/ContentView&gt;
</code></pre>
<p>It's fairly self-explanatory - the handle and rails are imported as resources and placed into a <code>Grid</code> so that they share the same 2D space (with no rows or columns defined, they're both in the default of <code>0,0</code>). <code>Grid</code> has the same conceptual layering as <code>ICanvas</code>, so adding the handle last renders it over the rails. A <code>PanGestureRecognizer</code> is attached so the user can drag it vertically.</p>
<h3 id="calculating-rpm">Calculating RPM</h3>
<p>In the event handler for the <code>PanGestureRecogniser</code>, we do two things. First, we adjust the position of the <code>handle</code>. We've got some guardrails (pun intended) to ensure it doesn't move below the bottom or above the top of the rails, and we ignore the horizontal (x) component altogether.</p>
<pre><code class="language-csharp">// File: Controls/Throttle.xaml.cs
private void ThrottlePanUpdated(object sender, PanUpdatedEventArgs e)
{
  if (e.TotalY &gt; 0 &amp;&amp; e.TotalY &lt; 300 &amp;&amp; IsEnabled)
  {
      handle.TranslationY = e.TotalY;
      Rpm = (int)e.TotalY * 50;  // 300px * 50 = 15000 max RPM
  }

  if (e.StatusType == GestureStatus.Completed || e.StatusType == GestureStatus.Canceled)
      Rpm = 0;
}
</code></pre>
<p>We calculate the RPM by mapping the Y translation directly to a value between 0 and 15,000 (the arbitrarily chosen max RPM of the Batmobile). As this is exposed by a bindable property, the main page gets notified of updates in realtime and streams the values over gRPC to the BatCave (more on this in part 4; note that part 4 is a bonus and not part of MAUI UI July).</p>
<h2 id="final-layout">Final layout</h2>
<p>The throttle control is added to the main page, along with some other controls for enabling and disabling the gRPC stream (the 'ignition') and displaying information about the app (the title label) and the current RPM. The final result looks like this:</p>
<p><figure><img src="/images/posts/batmobile-final-layout.png" alt="Batmobile final layout"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">Batmobile final layout</figcaption></figure></p>
<p>The full code is in the repo, but it's fairly vanilla - just standard .NET MAUI layouts and controls, with the <code>Throttle</code> control added to a <code>VerticalStackLayout</code>.</p>
<h2 id="whats-next">What's Next</h2>
<p>In Part 2, we’ll flip to the receiving end and build a dashboard-style RPM gauge that uses the same graphics primitives. If you enjoy trigonometry, custom drawing, and real-time telemetry, stay tuned.</p>
<p>If you can't wait, you can find the full code <a href="https://github.com/matt-goldman/MauiBatmobile">on GitHub</a>. Feel free to remix it, reskin it, or strap it into your own Bat-themed side project - and say tuned for a discussion of some of these in parts 3 and 4!</p>
]]></content:encoded>
      </item>
<item>
        <title>.NET MAUI UI July - 2025</title>
        <link>https://goforgoldman.com/posts/mauiuijuly-25</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/mauiuijuly-25</guid>
        <pubDate>Thu, 01 May 2025 00:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/maui-ui-july-bg.png" alt=".NET MAUI UI July - 2025" />
          Announcing .NET MAUI UI July 2025, a month-long community-driven event where developers share their passion and expertise for building beautiful .NET MAUI user interfaces.]]>
        </description>
        <category>mobile</category>
        <category>maui</category>
        <category>ui</category>
        <content:encoded><![CDATA[<p>It's time for #MAUIUIJuly again!</p>
<p>Based on an idea <a href="https://thewissen.io/introducing-xamarin-ui-july/">originally started for Xamarin by Steven Thewissen</a>, MAUI UI July is a month-long, community-driven event where anyone gets to share some of their enthusiasm and passion for .NET MAUI.</p>
<p>This will be the fourth year running this event, and in previous years we've had fantastic contributions from the community, covering an incredible range of things to do with .NET MAUI. You can check out previous years' contributions here:</p>
<ul>
<li><a href="/posts/maui-ui-july">MAUI UI July (2022)</a></li>
<li><a href="/posts/maui-ui-july-23">MAUI UI July (2023)</a></li>
<li><a href="/posts/mauiuijuly-24/">MAUI UI July (2024)</a></li>
</ul>
<p>Each day in July, we'll add a blog post or video to the calendar below, showcasing something cool you can do with .NET MAUI. Be sure to bookmark/favourite this post and check back every day for new content!</p>
<p>And if you want to participate and contribute something, even better! Keep reading to see what's involved.</p>
<h2 id="how-to-get-involved">How to Get Involved</h2>
<p>MAUI UI July is open to community contributions, and is an opportunity to share your passion and knowledge with the world. All you have to do is pick a topic and create a blog post or video, and pick a day in July to release it. If you want to participate, comment below, shout out on socials using the hashtags #dotnetmaui and #MAUIUIJuly or ping me directly (I'm on Twitter/&quot;X&quot;, LinkedIn, and Mastodon - links are in the sidebar on the left), saying which day of the month you want to release your post or video on. Once you've picked a date I'll add your name to the list below to reserve your spot.</p>
<p>From there, just get started on your content! Keep the following in mind:</p>
<ol>
<li>The topic must be related to UI in .NET MAUI</li>
<li>Your blog must have an English version (if you want to do a non-English version, that's great, but it must be in addition to the English version), if you're doing a video it must be in English or have English subtitles</li>
<li>Your content should indicate what level it is pitched at (e.g., beginner or advanced)</li>
<li>Link back to this post in your blog post or in the description of your video</li>
<li>Publish your blog post or video on the date according to the list below</li>
<li>Share your video or blog post on socials, using the hashtags #dotnetmaui and #MAUIUIJuly</li>
</ol>
<p>That's it! Looking forward to seeing what you all come up with. :)</p>
<h2 id="what-should-my-content-cover">What should my content cover?</h2>
<p>Completely up to you! As long as it's related to .NET MAUI UI, feel free to be as creative as you like. Some common topics people like for this kind of thing include:</p>
<ul>
<li>Replicate the UI of a well known app (see <a href="/posts/outlook-clone">this post</a> for example)</li>
<li>Pick a fun or interesting design from <a href="https://dribbble.com">Dribbble</a> and show how you can build it with .NET MAUI</li>
<li>Deep dive into a .NET MAUI UI feature</li>
<li>Build a popular UI control that doesn't come in the box (like a <a href="https://blogs.xgenoapps.com/post/2022/07/23/maui-bottom-sheet">bottom sheet</a> for example)</li>
</ul>
<p>These are just examples. If you think something is interesting, there's a good chance the rest of the community will want to see you explain it.</p>
<h2 id="net-maui-ui-july-schedule">.NET MAUI UI July Schedule</h2>
<table class="table">
<thead>
<tr>
<th>Date</th>
<th>Person</th>
<th>Content</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Matt Goldman</td>
<td><a href="/posts/batmobile-part-1/">Holy MauiGraphics Batman! Part 1: Batmobile Throttle Control</a></td>
</tr>
<tr>
<td>2</td>
<td>Matt Goldman</td>
<td><a href="/posts/batmobile-part-2">Holy MauiGraphics Batman! Part 2: Batcave RPM Gauge</a></td>
</tr>
<tr>
<td>3</td>
<td>Matt Goldman</td>
<td><a href="/posts/batmobile-part-3">Holy MauiGraphics Batman! Part 3: Clayface Level Trigonometry</a></td>
</tr>
<tr>
<td>4</td>
<td>Matt Goldman</td>
<td><a href="/posts/outlook-toggle">Replicating Outlook's 'Focused/Other' toggle in .NET MAUI</a></td>
</tr>
<tr>
<td>5</td>
<td>Ed Schimmel</td>
<td><a href="https://byte217.com/net-maui-managing-screen-sizes/">Managing Screen Sizes</a></td>
</tr>
<tr>
<td>6</td>
<td>Ed Schimmel</td>
<td><a href="https://byte217.com/net-maui-scrolling-text-display/">Scrolling Text Display</a></td>
</tr>
<tr>
<td>7</td>
<td>Ed Schimmel</td>
<td><a href="https://byte217.com/net-maui-tab-control-with-underlinement/">Custom Tab Control</a></td>
</tr>
<tr>
<td>8</td>
<td>François Raminosona</td>
<td><a href="https://blog.francois.raminosona.com/sensors-in-net-maui-mauiuijuly/">Sensors in .NET MAUI</a></td>
</tr>
<tr>
<td>9</td>
<td>François Raminosona</td>
<td><a href="https://blog.francois.raminosona.com/sensor-based-parallax-in-net-maui-using-the-gyroscope-mauiuijuly/">Gyroscope Parallax</a></td>
</tr>
<tr>
<td>10</td>
<td>Almir Vuk</td>
<td>TBC</td>
</tr>
<tr>
<td>11</td>
<td>Ali Raza</td>
<td><a href="https://mauiwithali.hashnode.dev/building-a-dynamic-milestone-journey-tracker-with-skiasharp-in-net-maui">Milestone Journey Tracker</a></td>
</tr>
<tr>
<td>12</td>
<td>Matt Goldman</td>
<td><a href="/posts/bdd-app-downloads">Beer-Driven Downloads &amp; Microinteractions in .NET MAUI</a></td>
</tr>
<tr>
<td>13</td>
<td>Adolfo Marinucci</td>
<td><a href="https://github.com/adospace/reactor-theme/blob/main/net_maui_july2025_article.md">Introduction to Reactor Theme</a></td>
</tr>
<tr>
<td>14</td>
<td>John Bijsterbosch</td>
<td><a href="https://blog.johndotnet.nl/creating-your-very-first-net-maui-skiasharp-component-step-by-step/">Creating your first .NET MAUI SkiaSharp Component</a></td>
</tr>
<tr>
<td>15</td>
<td>Nick Alonge</td>
<td><a href="https://dev.to/nick_alonge/reusable-views-in-net-maui-4n3c">Introduction to Reusable Views and Controls </a></td>
</tr>
<tr>
<td>16</td>
<td>Sebastian Jensen</td>
<td><a href="https://medium.com/@@tsjdevapps/building-an-animated-countdown-control-in-net-maui-0b1faff7ed76">Building an Animated Countdown Control in .NET MAUI</a></td>
</tr>
<tr>
<td>17</td>
<td>Calin Ciurariu</td>
<td><a href="https://medium.com/@@clinciurariu/calin-ciurariu-c153c8ceb9dd">Scrolling Label</a></td>
</tr>
<tr>
<td>18</td>
<td>Farshad Momtaz</td>
<td>TBC</td>
</tr>
<tr>
<td>19</td>
<td>Leomaris Reyes</td>
<td>TBC</td>
</tr>
<tr>
<td>20</td>
<td>Vladislav Antonyuk</td>
<td><a href="https://vladislavantonyuk.github.io/articles/Turn-any-phone-into-an-IP-Camera-in-30-Minutes-using-.NET-MAUI/">Turn any phone into an IP Camera in 30 minutes using .NET MAUI</a></td>
</tr>
<tr>
<td>21</td>
<td>Shaun Lawrence</td>
<td><a href="https://blog.bijington.com/2025/07/21/wheel-of-names.html">Create a Wheel of Names clone</a></td>
</tr>
<tr>
<td>22</td>
<td>Héctor Uriel Pérez Rojas</td>
<td><a href="https://devs.school/create-viral-videos-with-sora-in-net-maui/">Create Viral Videos with SORA in .NET MAUI</a></td>
</tr>
<tr>
<td>23</td>
<td>David Nsai</td>
<td><a href="https://medium.com/@@nsaidave/building-a-pedometer-fitness-tracker-using-net-maui-8723ad041c1d">Building a pedometer fitness tracker</a></td>
</tr>
<tr>
<td>24</td>
<td>Luis Antonio Beltran Prieto</td>
<td><a href="https://dev.to/icebeam7/joystick-navigation-ui-in-net-maui-5974">Joystick Navigation in .NET MAUI</a></td>
</tr>
<tr>
<td>25</td>
<td>Nick Kovalsky</td>
<td><a href="https://taublast.github.io/posts/Breakout/">Build Cross-Platform Games in .NET MAUI with DrawnUI</a></td>
</tr>
<tr>
<td>26</td>
<td>Johan Smarius</td>
<td><a href="https://www.youtube.com/watch?v=T69XFmhjdzQ">Exploring the Syncfusion .NET MAUI Toolkit</a></td>
</tr>
<tr>
<td>27</td>
<td>Steven Thewissen</td>
<td><a href="https://thewissen.io/maui-ui-july-crosswind-experiment/">The Crosswind Experiment</a></td>
</tr>
<tr>
<td>28</td>
<td>Gulam Ali H.</td>
<td><a href="https://medium.com/@@freakyali/coach-marks-but-beautiful-in-net-maui-7cd861dc1058">Coach Marks, but Beautiful in .NET MAUI</a></td>
</tr>
<tr>
<td>29</td>
<td>Ed Gomez</td>
<td><a href="https://www.linkedin.com/pulse/why-your-net-maui-app-should-absolutely-support-desktop-ed-gomez-jaekf">Why your .NET MAUI App Should Absolutely Support Desktop</a></td>
</tr>
<tr>
<td>30</td>
<td>David Ortinau</td>
<td><a href="https://dev.to/davidortinau/my-top-5-ui-moments-of-2025-so-far-1h14">My top 5 UI Moments of 2025 (So Far)</a></td>
</tr>
<tr>
<td>31</td>
<td>Roman Jasek</td>
<td><a href="https://www.riganti.cz/en/blog/maui-managing-accessibility-chapter-01">Accessibility in .NET MAUI - Chapter 1 - Introduction &amp; Motivation</a> (note remaining chapters are online and linked from the post)</td>
</tr>
</tbody>
</table>
<p>I hope you enjoy .NET MAUI UI July!</p>
]]></content:encoded>
      </item>
<item>
        <title>Fixing Docker Performance in Aspire on Windows</title>
        <link>https://goforgoldman.com/posts/aspire-docker-perf</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/aspire-docker-perf</guid>
        <pubDate>Fri, 28 Feb 2025 01:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/aspire-docker-performance.png" alt="Fixing Docker Performance in Aspire on Windows" />
          Improving Docker container performance in .NET Aspire on Windows by leveraging WSL 2 for better filesystem access and overall container efficiency.]]>
        </description>
        <category>docker</category>
        <category>aspire</category>
        <category>wsl</category>
        <category>windows</category>
        <category>performance</category>
        <category>wsl2</category>
        <content:encoded><![CDATA[<p>If you're building .NET Aspire projects on Windows, you might be getting frustrated with the performance of your Docker containers. As a cross-platform developer, I switch between Windows and macOS frequently, and I've noticed a significant performance gap between the two platforms. Fortunately, there's a simple solution to give your Docker containers a performance boost.</p>
<h2 id="background-are-macs-just-faster">Background - are Macs just faster?</h2>
<p>Yes and no. I've come across this performance discrepancy between code running on macOS and code running on Windows before, specifically in Node applications. I don't develop them, but I do run them sometimes. For example, this blog is built with Jekyll, a Ruby-based static site generator. Being able to run it locally and preview posts before I publish them is fairly important, but the performance on Windows is so bad that it makes it almost impossible. This was frustrating, especially considering how snappily it ran on my M1 MacBook. I've since upgraded to a newer machine, but I mention this to highlight that it's not just a hardware issue. My Windows machine is an i9 with 32GB of RAM, but would get smoked by my 8GB M1. I didn't think it could be purely a hardware issue, and I also figured that Node developers can't exclusively be using macOS, so I did some digging.</p>
<p>While Node does feature some optimisations for ARM processors, it's not just the hardware that makes a difference, it's the OS too - lowish spec Linux machines can run Node without any trouble, in fact even a Raspberry Pi can run a Node server without breaking a sweat. (Note that I'm talking about development builds - production builds don't tend to have this problem on Windows).</p>
<p>Diving into the nuts and bolts of why Node has such a hard time on Windows compared to macOS and Linux is beyond the scope of this post, but it's enough to know that Linux can run Node efficiently, and that means that my Windows hardware can at least in principle do it as well.</p>
<p>Fortunately, you don't need to switch to Linux. With WSL, you can get the best of both worlds.</p>
<h2 id="wsl-2">WSL 2</h2>
<p>If you're reading this post, you almost certainly know what Windows Subsystem for Linux (WSL) 2 is, but in case you don't, it's a way to run a Linux kernel on Windows. It's not a hardware-emulated VM, but rather a translation layer, which provides a lightweight way to run Linux binaries on Windows. With WSL 2, you can even install your favourite Linux distro from the Microsoft Store. I tend to use Ubuntu, purely because its popularity means that it's well supported and has a large community, so when I encounter issues, I can usually find a solution quickly.</p>
<p>When you set up WSL, you get access to your Windows filesystem as a mounted drive, and your Linux filesystem is accessible from Windows too. At first, I tried navigating in my bash terminal to the folder where my Node project was stored, and running from there. But this would often not work at all, and when it did, it was at best still slow, and at worst riddled with countless errors. There's a simple fix for this though, and that's to run your project from the Linux filesystem.</p>
<p>Instead of navigating to my repo in the Windows filesystem, I just cloned it to the WSL filesystem instead, and ran it from there.</p>
<p>Once I did this, I got performance that was on par with macOS. Well, to be fair, I haven't actually benchmarked these, but the difference between running natively from Windows is night and day, and to be honest I'm not really fussed about the specifics. The point is, it's a usable solution for me, and that's really all that matters. As there's no perceptible difference for me now between running Node on WSL 2 or macOS, I haven't felt the need to run any benchmarks.</p>
<h2 id="docker">Docker</h2>
<p>As with WSL, if you're reading this then you also already know what Docker is. But an important point to note is that, like with WSL, Docker isn't a hypervisor, and containers aren't VMs. This means that you can potentially be limited from running certain containers on Windows, especially if they're Linux-based (the reverse is also true). This is where WSL 2 comes in handy, as it allows you to run Linux containers on Windows.</p>
<p>When you install Docker, you can choose between using WSL 2 as the backend, or the Windows Hypervisor Platform (the same service that runs Hyper-V). WSL 2 is the recommended option, by Docker and Microsoft, for good reasons which I won't go into here (but in short it's much lower overhead - with WHP, you're running a full hardware-emulated VM, with WSL 2, you're running a lightweight Linux kernel).</p>
<p>Most of the time, this runs buttery smooth. As I mentioned, this is the recommended setup and usually results in pretty good performance.</p>
<h2 id="aspire">Aspire</h2>
<p>I often describe .NET Aspire as &quot;docker compose in C#&quot;. This is a gross oversimplification - it's <em>way</em> more than that, and it's a bit of a disservice to describe it that way. But it's also not inaccurate - .NET Aspire <em>does</em> allow you to define your services in C#, and it <em>does</em> run them in Docker containers.</p>
<p>What this means is that your Aspire services run as Docker containers, and generally they run pretty well. However, if you're running them on Windows, you might occasionally run into some performance issues. I wouldn't describe these as showstoppers, and in fact it was only when I switched a particular project to macOS that I noticed the difference. But it's there, and it's noticeable, and this became important for a client project where I needed to frequently run demos. The performance was fine for my developer experience, but some of the delays in the demos were not conducive to convincing the client that the solution was adequate.</p>
<h2 id="the-fix">The Fix</h2>
<p>It turns out, you can't just run your Aspire projects from WSL. This is a shame - I think a lot of people would like to see this. If you look on the Aspire repo, you can see it's a popular request. But it turns out it's not as simple as it seems - <a href="https://github.com/dotnet/aspire/issues/1368">this issue</a> provides some insight into some of the challenges, and <a href="https://github.com/dotnet/aspire/discussions/6813">this discussion</a> contains a link to the filtered list of WSL issues on the repo, highlighting the problems faced by developers trying to run Aspire projects from WSL.</p>
<p>But, it turns out, you can still gain performance improvements in Docker without running your Aspire project from your WSL filesystem. The fix, it turns out, is actually to limit the memory and CPU usage of your Docker containers. <a href="https://stackoverflow.com/questions/62154016/docker-on-wsl2-very-slow">This StackOverflow question</a> (and the replies) provide the fix. As you can expect, a popular answer (although not the accepted one) recommends running from your Linux filesystem. This is what I've always done, but as mentioned, this doesn't work for Aspire projects.</p>
<p>The accepted answer states that you can create a <code>.wslconfig</code> file in your user profile, shut down Docker desktop (essentially you have to make sure the <code>VMMem</code> process is not running; you may have to kill it manually), and then restart Docker. This will apply the settings in the <code>.wslconfig</code> file, which can limit the memory and CPU usage of your Docker containers. You may have to tweak it to figure out what works best for you, but for me I simply left the default of one processor, and set the RAM limit to 6GB:</p>
<pre><code class="language-bash">[wsl2]
memory=6GB    #Limits VM memory in WSL 2 to 6GB
processors=1    #Makes the WSL 2 VM use one virtual processors
</code></pre>
<p>Depending on your workload you may need to adjust this. I wanted to start with these and tweak as needed, but in my case I found this worked well enough.</p>
<p>I must admit I was sceptical, but it really does work. Again, I haven't done any benchmarks here, but let me give you an anecdote. A solution I am currently working on for a client involves importing documents to be used as templates for reports. In my Aspire infrastructure, I'm running the Cosmos DB emulator for persistence and Azurite for blob storage. In the UI, you can select a file for upload, and once it's uploaded it will process in the background. Once the file has been processed, the UI updates to show the file.</p>
<p>On macOS, when I upload a file, it appears in the UI straight away. On Windows it would take several seconds. Since making this change, I've noticed a significant performance improvement. It's still not instant, but that's because I've introduced another step in the process (uploading to SharePoint rather than Azurite), so I will need to run it again on macOS to compare, and in this case I may need to actually run the benchmarks.</p>
<p>Even so, it's been a huge improvement and, counter-intuitive as it may be, it works and I'm happy with the results.</p>
<h2 id="why-does-this-work">Why does this work?</h2>
<p>As I said, this seemed counter-intuitive. As others noted in response to that answer, the issue isn't with Windows performance, it's with container performance. I would understand if the issue was that when running Docker containers, my Windows machine was struggling to keep up, but that didn't seem to be the case.</p>
<p>But it turns out that actually <em>was</em> the problem. Without a <code>.wslconfig</code> file, WSL will consume all available CPU and memory (the same thing happens with SQL Server and Exchange Server, which is why they're not recommended to run on the same machine). As Docker runs on top of WSL, when the containers are running, WSL consumes all available resources and starves the OS. Since WSL doesn't release memory back to Windows easily, it forces the OS to use disk-based virtual memory (<a href="https://www.geeksforgeeks.org/swapping-in-operating-system/">swapping</a>), which is much slower than RAM.</p>
<p>Where this sneaks under the radar for developers like me, is that while this is happening, you're typically debugging code running in a container. When you stop, things usually go back to normal (but not always - sometimes you have to kill WSL to get it to release the resources), and you don't notice any performance issues in your OS. This is why it <em>seems</em> like the issue is just with Docker - and in a sense, it is, but the problem <em>does</em> in fact impact the whole OS. I just wasn't noticing.</p>
<h2 id="conclusion">Conclusion</h2>
<p>If you're running Aspire projects on Windows and you're noticing performance issues, try limiting the memory and CPU usage of your Docker environment through a <code>.wslconfig</code> file. It's a simple fix that can make a big difference. In fact, even if you're not running Aspire, you might find this useful for anything where you're using Docker on WSL 2, or even anything with WSL 2 in general.</p>
<p>I'm probably quite late to the party with this one, but it made a huge difference for me, and I hope it does for you too.</p>
<p>Do you have any other performance improvement suggestions for Aspire on Windows? Let me know in the comments below!</p>
]]></content:encoded>
      </item>
<item>
        <title>Cosmic Aspirations: A Workaround for the Cosmos DB Emulator Explorer in Aspire</title>
        <link>https://goforgoldman.com/posts/cosmos-aspire-workaround</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/cosmos-aspire-workaround</guid>
        <pubDate>Fri, 06 Dec 2024 01:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/cosmic-aspirations.png" alt="Cosmic Aspirations: A Workaround for the Cosmos DB Emulator Explorer in Aspire" />
          Workaround for the Cosmos DB Emulator Explorer dashboard bug in Aspire by using the vnext-preview image tag until the fix is promoted to latest.]]>
        </description>
        <category>mobile</category>
        <category>maui</category>
        <category>ui</category>
        <category>di</category>
        <content:encoded><![CDATA[<p>If you've been struggling to get the Cosmos DB Emulator's Explorer Dashboard working in Aspire, hopefully this will help. Recently, I encountered a frustrating issue where the dashboard refused to work, resulting in a deep dive into the emulator’s configuration, Aspire's abstraction, and containerised environments. After hours of digging, I discovered that the root cause lies in the emulator image itself.</p>
<p>Here’s how I worked around the issue and got everything running smoothly.</p>
<h2 id="the-problem">The Problem</h2>
<p>The Cosmos DB Emulator Docker image currently tagged as <code>latest</code> has a bug preventing the Explorer Dashboard from functioning. The problem isn’t related to Aspire or any misconfiguration—it’s a bug in the emulator image itself.</p>
<p>After some digging, I came across an <a href="https://github.com/Azure/azure-cosmos-db-emulator-docker/issues/135">open issue on GitHub</a> that confirms the problem. Fortunately, the issue has been fixed, and a new emulator image with the <code>vnext-preview</code> tag includes the fix. However, until the fix is promoted to the <code>latest</code> tag, we’ll need to explicitly configure Aspire to use the <code>vnext-preview image</code>.</p>
<h2 id="the-workaround">The Workaround</h2>
<p>Here’s how to configure Aspire to use the fixed emulator image:</p>
<pre><code class="language-csharp">
var cosmos = builder.AddAzureCosmosDB(&quot;cosmos&quot;)
    .WithHttpEndpoint(51234, 1234, &quot;explorer-port&quot;) // Enable the Explorer on a custom port
    .WithExternalHttpEndpoints()                   // Expose the ports externally
    // TECH DEBT: Workaround for Explorer dashboard not working in emulator. See: https://github.com/Azure/azure-cosmos-db-emulator-docker/issues/135.
    .RunAsEmulator(cfgContainer =&gt;
    {
        cfgContainer
        .WithImageRegistry(&quot;mcr.microsoft.com&quot;)        // Set the registry
        .WithImage(&quot;cosmosdb/linux/azure-cosmos-emulator&quot;) // Use the emulator image
        .WithImageTag(&quot;vnext-preview&quot;);                // Use the preview tag with the fix
    });
</code></pre>
<h2 id="breaking-it-down">Breaking It Down</h2>
<h3 id="set-the-http-endpoint">1. Set the HTTP Endpoint:</h3>
<p>The <code>WithHttpEndpoint</code> method specifies the Explorer port (in this case, <code>1234</code>) and exposes it locally (within the Aspire network).</p>
<h3 id="expose-external-endpoints">2. Expose External Endpoints:</h3>
<p>Use <code>.WithExternalHttpEndpoints()</code> to ensure that the emulator’s ports can be accessed from your host environment (proxied via Aspire)</p>
<h3 id="override-the-emulator-image">3. Override the Emulator Image:</h3>
<p>The <code>RunAsEmulator</code> configuration lets us specify the <code>vnext-preview</code> image tag, which includes the fix for the Explorer Dashboard.</p>
<p>Et voila!</p>
<p><figure><img src="/images/posts/aspire-cosmos-screenshot.png" alt="The Cosmos DB Emulator explorer dashboard running in Aspire"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">The Cosmos DB Emulator explorer dashboard running in Aspire</figcaption></figure>
<em>The Cosmos DB Emulator explorer dashboard running in Aspire</em></p>
<h2 id="why-this-matters">Why This Matters</h2>
<p>For developers leveraging Aspire to emulate Azure Cosmos DB locally, this workaround ensures you can:</p>
<ul>
<li>Access the Cosmos DB Emulator Explorer Dashboard for easier debugging and data exploration</li>
<li>Continue to use Aspire's abstractions without needing to manually manage Docker configurations</li>
</ul>
<p>This is critical, as the Cosmos DB emulator has some quirks that make it operate ever-so-slightly differently from the real thing, particularly around case-sensitivity. Having access to the Explorer is an essential troubleshooting tool in any case, but particularly in light of these gotchas.</p>
<h2 id="when-will-this-be-fixed">When Will This Be Fixed?</h2>
<p>The Cosmos DB Emulator team has already fixed this issue in the <code>vnext-preview</code> image. Once this image is promoted to <code>latest</code>, you’ll no longer need this workaround. Keep an eye on the <a href="https://github.com/Azure/azure-cosmos-db-emulator-docker/issues/135">GitHub</a> issue for updates.</p>
<h2 id="final-thoughts">Final Thoughts</h2>
<p>I've come to love .NET Aspire and use it as the default for most projects now, but debugging this issue highlighted both the strengths and challenges of using tools like Aspire and the Cosmos DB Emulator. While it simplifies the setup of complex distributed systems, this abstraction can sometimes make diagnosing edge cases tricky. Thanks to the open-source nature of nearly every component involved, however, it's always possible to dig deeper and find solutions (with enough determination).</p>
<p>Have you run into similar roadblocks with Aspire or Cosmos DB Emulator? Share your experiences in the comments below—I’d love to hear about them!</p>
]]></content:encoded>
      </item>
<item>
        <title>PageResolver Updates – The Missing Piece of .NET MAUI, Now Ready for .NET 9!</title>
        <link>https://goforgoldman.com/posts/page-resolver-updates</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/page-resolver-updates</guid>
        <pubDate>Mon, 11 Nov 2024 01:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/page-resolver-updates.png" alt="PageResolver Updates – The Missing Piece of .NET MAUI, Now Ready for .NET 9!" />
          Latest improvements to PageResolver for .NET MAUI, making MVVM setup easier with automatic view and ViewModel resolution through dependency injection.]]>
        </description>
        <category>mobile</category>
        <category>maui</category>
        <category>ui</category>
        <category>di</category>
        <content:encoded><![CDATA[<h2 id="introduction">Introduction</h2>
<p>With the launch of .NET 9, now is the perfect time to introduce the latest improvements to PageResolver! While it's aligned with .NET LTS releases, PageResolver remains fully compatible with .NET 9, ready to support developers exploring the latest features. Designed to be the easiest way to set up MVVM in .NET MAUI, PageResolver pairs perfectly with the MVVM CommunityToolkit and MAUI CommunityToolkit to provide a solid baseline for any app, without the need for a heavyweight MVVM framework.</p>
<h2 id="what-is-pageresolver">What is PageResolver?</h2>
<p>PageResolver simplifies hierarchical navigation in .NET MAUI apps, providing automatic view and ViewModel resolution with dependency injection, enabling you to leverage the MVVM pattern without abandoning the default navigation patterns. It's a productivity booster for developers who want to avoid boilerplate and focus on building great features.</p>
<p>As an example, let's say you have a view called <code>ProfilePage</code> and a corresponding ViewModel called <code>ProfileViewModel</code>. With PageResolver, you can navigate to <code>ProfilePage</code> and have <code>ProfileViewModel</code> automatically resolved and injected into the page, including the ViewModel's dependencies as well (e.g. an <code>IProfileService</code> abstraction). This eliminates the need for manual wiring and makes your code cleaner and more maintainable.</p>
<p>These might be setup like this:</p>
<pre><code class="language-csharp">public class ProfilePage : ContentPage
{
    public ProfilePage(ProfileViewModel viewModel)
    {
        BindingContext = viewModel;
    }
}

public class ProfileViewModel
{
    public ProfileViewModel(IProfileService profileService)
    {
        profileService = profileService;
    }

    public IProfileService profileService { get; }
}

public class ProfileService : IProfileService
{
    // Implementation
}
</code></pre>
<p>If you're using Shell, this will work out of the box. But for apps using hierarchical navigation, or even if you're using modals or popups (more on this later), you would have to instantiate your views and pass your dependencies to them in the caller, or use a service locator to resolve your view models. This is obviously riddled with code smells and anti-patterns, but with PageResolver, you can simply navigate by type instead of by instance, and let PageResolver handle the rest.</p>
<pre><code class="language-csharp">await Navigation.PushAsync&lt;ProfilePage&gt;();
</code></pre>
<h2 id="new-features-in-pageresolver">New Features in PageResolver</h2>
<p>PageResolver has added several powerful features to further streamline the MVVM setup in .NET MAUI, even for more complex setups like popups, modals, or custom navigation patterns.</p>
<h3 id="parameterized-constructors">Parameterized Constructors</h3>
<p>Sometimes you need to pass data to your pages (or to their binding context). In Shell, you can use a combination of query parameters or the navigation state dictionary. With PageResolver, you can use parameterised constructors in your pages and view models, making it straightforward to pass values alongside injected dependencies directly as part of the navigation call.</p>
<pre><code class="language-csharp">public class ProfilePage : ContentPage
{
    // In this example userId is a Page parameter
    // But it works the same way for ViewModels
    public ProfilePage(ProfileViewModel viewModel, string userId)
    {
        BindingContext = viewModel;
    }
}

/// Navigate with parameters:

await Navigation.PushAsync&lt;ProfilePage&gt;(&quot;123&quot;);
</code></pre>
<p>PageResolver automatically injects registered dependencies into your Pages and ViewModels, so you don't need to pass these as navigation arguments. Other values are passed to either the Page or ViewModel, matched based on constructor parameters.</p>
<h3 id="xaml-markup-extensions-for-dependency-resolution">XAML Markup Extensions for Dependency Resolution</h3>
<p>With XAML markup extensions, you can now resolve dependencies directly within your XAML, allowing you to declare view models with dependencies in a more expressive way. This might align better with your coding style, but is especially useful for complex views or custom controls.</p>
<pre><code class="language-xml">&lt;ContentPage xmlns:local=&quot;clr-namespace:MyApp&quot;
             xmlns:resolver=&quot;clr-namespace:Maui.Plugins.PageResolver;assembly=Maui.Plugins.PageResolver&quot;
             xmlns:vm=&quot;clr-namespace:MyApp.ViewModels&quot;
             BindingContext=&quot;{resolver:ResolveViewModel x:TypeArguments=vm:ProfileViewModel}&quot;&gt;
    &lt;!-- Page Content --&gt;
&lt;/ContentPage&gt;
</code></pre>
<p>This page (or any other view) will have its ViewModel resolved and injected automatically, without the need for manual wiring, and set as the binding context.</p>
<h3 id="automatic-dependency-registration">Automatic Dependency Registration</h3>
<p>Dependency Injection is a core part of any modern app, but it requires a lot of boilerplate to set up. PageResolver uses a source generator to automatically register your pages, ViewModels, and services and remove the need for this boilerplate. Using a conventions-based approach, PageResolver scans your assemblies for classes that match specific criteria and registers them with the dependency injection container. Unlike with reflection-based approaches, this is done at compile time, so there's no performance overhead. This eliminates the need for manual registration, making your code cleaner and more maintainable.</p>
<p><strong>Before:</strong></p>
<pre><code class="language-csharp">namespace MyApp
{
    public static class MauiProgram
    {
        public static MauiApp CreateMauiApp()
        {
            var builder = MauiApp.CreateBuilder();
            builder
            .UseMauiApp&lt;App&gt;()
            .ConfigureFonts(fonts =&gt;
            {
                fonts.AddFont(&quot;OpenSans-Regular.ttf&quot;, &quot;OpenSansRegular&quot;);
            })
            .UsePageResolver();

            builder.Services.AddSingleton&lt;IMyService, MyService&gt;();
            builder.Services.AddTransient&lt;MyViewModel&gt;();
            builder.Services.AddTransient&lt;MyPage&gt;();
            builder.Services.UsePageResolver();

            // etc.

            return builder.Build();
        }
    }
}
</code></pre>
<p><strong>After:</strong></p>
<pre><code class="language-csharp">namespace MyApp
{
    public static class MauiProgram
    {
        public static MauiApp CreateMauiApp()
        {
            var builder = MauiApp.CreateBuilder();
            builder
            .UseMauiApp&lt;App&gt;()
            .ConfigureFonts(fonts =&gt;
            {
                fonts.AddFont(&quot;OpenSans-Regular.ttf&quot;, &quot;OpenSansRegular&quot;);
            })
            .UseAutodependencies();

            return builder.Build();
        }
    }
}
</code></pre>
<h3 id="explicit-registration-with-attributes">Explicit Registration with Attributes</h3>
<p>Customise how your components are registered with attributes. Dependency registration commonly follows a familiar pattern, so the PageResolver conventions are intended as &quot;sensible defaults,&quot; but they may not be appropriate for every scenario. You can override these by using attributes to specify the lifetime of your dependencies, or even prevent them from being registered at all.</p>
<pre><code class="language-csharp">// Services are registered as singletons by default
// This service will be registered as a transient service
[Transient]
public class ProfileService : IProfileService
{
    // Implementation
}

// ViewModels are registered as transient by default
// This ViewModel will be registered as a singleton
[Singleton]
public class ProfileViewModel
{
    public ProfileViewModel(IProfileService profileService)
    {
        profileService = profileService;
    }

    public IProfileService profileService { get; }
}

// Pages are registered as transient by default
// This page will not be registered
// Note this would break if combined with the above example
[Ignore]
public class ProfilePage : ContentPage
{
    public ProfilePage(ProfileViewModel viewModel)
    {
        BindingContext = viewModel;
    }
}
</code></pre>
<p>There is no need to use these attributes in most cases, but they are available if you need them. The default conventions should work for most scenarios.</p>
<InfoContainer >
<p><strong>Note:</strong> <code>Scoped</code> is not supported by either the conventions or the attributes, as it doesn't make sense in the context of a mobile app. There's no request pipeline to scope to, so it's not a useful concept in this context.</p>
</InfoContainer>
<h3 id="mopups-integration">Mopups Integration</h3>
<p>PageResolver now has extensions available for use with the popular Mopups library, making it simple to integrate popups. While you could previously use the XAML markup extensions to support your popups, the new Mopups integration provides a more streamlined approach and allows you to call your popups directly from your ViewModels.</p>
<pre><code class="language-csharp">return MopupService.Instance.PushAsync&lt;MyPopup&gt;();

// or with a parameter
return MopupService.Instance.PushAsync&lt;MyPopup&gt;(&quot;It's alive!&quot;);
</code></pre>
<h3 id="community-contributions">Community Contributions</h3>
<p>While PageResolver started as an experiment to see whether navigation could work in .NET MAUI the way I personally believed it should, it seems to have resonated with the community. Many people are using it to simplify their MVVM setup, and many have contributed to its growth, through feedback, bug reports, discussions, and even code contributions. This has been instrumental in keeping the momentum going and ensuring that PageResolver remains a valuable tool for the community, especially during the past year when I've been unable to dedicate as much time to it as I would have liked.</p>
<p>A huge thank you to everyone who has contributed to PageResolver, whether through code, discussions, feedback, or even simply using it in your projects!</p>
<h2 id="looking-ahead">Looking Ahead</h2>
<p>With .NET 10 on the horizon, there are some changes coming to look out for. These will be breaking changes, but by aligning these with LTS releases, and announcing these now, I hope to give you plenty of time to prepare for them.</p>
<ul>
<li><strong>.NET 10 Support:</strong> PageResolver will continue to support the latest .NET LTS releases, including .NET 10. With the LTS release the minimum version will be changed.</li>
<li><strong>Manually triggered source generation:</strong> The source generator is designed to be seamless and automatic, but there are scenarios where you might want to trigger it manually. As an immediate workaround, you can use a <code>[NoAutoDependencies]</code> attribute on your <code>MauiProgram</code> class to prevent it from generating the dependency registrations. I think this should work the other way around, but didn't want to introduce a breaking change at this stage. So, for .NET 10, ths will be reversed. You'll still need to chain <code>UseAutoDependencies()</code> to your <code>MauiAppBuilder</code> as this passes the service registrations to the DI container, but you'll also need to add a <code>[AutoDependencies]</code> attribute to your <code>MauiProgram</code> class. This allows a more explicit intentionality, which is more of a 'sensible default' approach.</li>
<li><strong>Potential name and namespace change:</strong> The namespace will be updated to align with .NET MAUI plugin conventions. PageResolver was created before the first version of .NET MAUI was released, and name reservations on NuGet were still unclear (and in fairness I was overeager to publish it). The in-code namespace will change from <code>Maui.Plugins.PageResolver</code> to <code>Plugin.Maui.PageResolver</code> which is the standard. Additionally, I'm also considering renaming the package. &quot;PageResolver&quot; clearly reflects what it does at its core, but I feel like it's too narrow in scope. Even putting aside the extra functionality, without at the very least including something about navigation, the name has low discoverability. I don't know what the new name will be yet, but I'm open to suggestions. If you have any ideas, please let me know!</li>
<li><strong>Package name update:</strong> Hopefully come .NET 10 I'll have gotten over my naming woes! The package name will be updated to reflect the new name (and possibly namespace).</li>
</ul>
<TipContainer >
<p>I'll be opening a discussion on the GitHub repository to gather feedback on the name change. If you have any thoughts on this, please share them there. I'm open to any suggestions, and I want to make sure the new name is something that resonates with the community.</p>
</TipContainer>
<h2 id="why-choose-pageresolver-for-mvvm-in.net-maui">Why Choose PageResolver for MVVM in .NET MAUI?</h2>
<p>.NET MAUI uses the familiar host builder pattern, including built-in dependency injection. While .NET MAUI provides a way to use this with Shell, not all apps are a good fit for Shell, and many developers prefer to use hierarchical navigation. PageResolver provides a way to use the built-in dependency injection with hierarchical navigation.</p>
<p>This offers a simple, lightweight way to consumer dependencies in your views, without the need for an opinionated MVVM framework. PageResolver is certainly opinionated, but only about the things it's designed to do. It doesn't dictate how you structure your app, or how you write your ViewModels, or even whether you use the MVVM pattern, MVU, or just raw dog your code-behind. It simply provides a way to resolve your dependencies in your views, and that's it.</p>
<h2 id="getting-started">Getting Started</h2>
<ol>
<li><p>Install PageResolver via NuGet</p>
</li>
<li><p>Configure PageResolver in your app's startup to handle view model resolutions automatically</p>
</li>
<li><p>Start building your app simplified navigation and minimal boilerplate</p>
</li>
<li><p>...profit?</p>
</li>
</ol>
<p>To find out more, visit the <a href="https://github.com/matt-goldman/Maui.Plugins.PageResolver">PageResolver GitHub repository</a>. Check out the wiki for more detailed information on how to use PageResolver in your projects, and explore the demo project. Use the issues and discussions to ask questions, provide feedback, or report bugs. And if you like what you see, please consider starring the repository to show your support.</p>
<h2 id="conclusion">Conclusion</h2>
<p>.NET 9 opens exciting new possibilities, and PageResolver is ready to support your projects. If you're looking for a simplified, effective way to manage consume dependencies in views in .NET MAUI apps, now's the time to give PageResolver a try. With the latest updates, including parameterised constructors, XAML markup extensions, automatic dependency registration, and Mopups integration, the killer trifecta of the MVVM and MAUI toolkits plus PageResolver gives you everything you need to set your apps up for success.</p>
]]></content:encoded>
      </item>
<item>
        <title>Parallax CollectionView in .NET MAUI</title>
        <link>https://goforgoldman.com/posts/parallax-collection</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/parallax-collection</guid>
        <pubDate>Mon, 01 Jul 2024 00:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/parallax-collection.png" alt="Parallax CollectionView in .NET MAUI" />
          Step-by-step tutorial for creating an engaging parallax scrolling effect in .NET MAUI CollectionView to add visual depth to your mobile app interfaces.]]>
        </description>
        <category>mobile</category>
        <category>maui</category>
        <category>ui</category>
        <content:encoded><![CDATA[<p>Parallax is one of those effects that is dangerously easy to overuse in your apps, but equally, when done right, can add an extra &quot;wow!&quot; factor that elevates an otherwise flat app to give it some depth.</p>
<TipContainer title="What is parallax?">
<p>Parallax is the term given when things in the foreground appear to move quicker than things in the background. It was a <a href="https://www.youtube.com/watch?v=FIqpX4L5w2c">neat trick used in 16-bit games</a> to give a sense of depth of a 3D environment, and has recently become a <a href="https://www.wix.com/blog/what-is-parallax-scrolling-explained-with-examples">trend in web design</a>. And perhaps most interestingly, it's one of the <a href="https://lco.global/spacebook/distance/parallax-and-distance-measurement/">methods used to estimate the distance of stars</a> and other objects in space.</p>
</TipContainer>
<h2 id="getting-started">Getting started</h2>
<p>Let's start with a basic app with a <code>CollectionView</code>. The app we will build is a simple superheroes information app, that shows a series of cards with a picture and some text. I've downloaded some images and placed them into the <code>Resources/images/posts/</code> folder, and I've installed the <a href="https://learn.microsoft.com/dotnet/communitytoolkit/mvvm/">MVVM Community Toolkit</a> and <a href="https://github.com/rrmanzano/maui-bindableproperty-generator">MAUI Bindable Property Generator</a> to reduce boilerplate.</p>
<p>The code is available on <a href="https://github.com/matt-goldman/ParallaxCollection">GitHub</a>, I won't walk through the code here as it should be self-explanatory (and if not is outside the scope of this post, but if you want to learn more about this code you can check out the <a href="https://dotnet.microsoft.com/en-us/apps/maui">official documentation</a> or my book <a href="https://www.manning.com/books/dot-net-maui-in-action?utm_source=goforgoldman&utm_medium=affiliate&utm_campaign=book_goldman_dot_5_10_22&a_aid=goforgoldman&a_bid=38933097"><em>.NET MAUI in Action</em></a>). For convenience I've also added it below; it's collapsed so click on <code>Details</code> to unhide it.</p>
<details>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;ContentPage xmlns=&quot;http://schemas.microsoft.com/dotnet/2021/maui&quot;
            xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;
            xmlns:vm=&quot;clr-namespace:ParallaxCollection.ViewModels;assembly=ParallaxCollection&quot;
            x:DataType=&quot;vm:MainViewModel&quot;
            x:Class=&quot;ParallaxCollection.MainPage&quot;&gt;
    &lt;Grid&gt;
        &lt;CollectionView ItemsSource=&quot;{Binding Heroes}&quot;
                                    VerticalOptions=&quot;Center&quot;
                                    x:Name=&quot;HeroesCollection&quot;&gt;
            &lt;CollectionView.ItemTemplate&gt;
                &lt;DataTemplate x:DataType=&quot;vm:HeroCardViewModel&quot;&gt;
                    &lt;controls:HeroCard Background=&quot;{Binding Background}&quot;
                                HeroName=&quot;{Binding Name}&quot;
                                SecretIdentity=&quot;{Binding SecretIdentity}&quot;
                                HeroImage=&quot;{Binding HeroImage}&quot;
                                HeroLogo=&quot;{Binding LogoImage}&quot;/&gt;
                &lt;/DataTemplate&gt;
            &lt;/CollectionView.ItemTemplate&gt;
        &lt;/CollectionView&gt;
    &lt;/Grid&gt;
&lt;/ContentPage&gt;
</code></pre>
<p>file=&quot;MainPage.xaml</p>
<p>It's just got a simple binding in the code behind:</p>
<pre><code class="language-csharp">using ParallaxCollection.ViewModels;

namespace ParallaxCollection;

public partial class MainPage : ContentPage
{
    private MainViewModel _viewModel;

    public MainPage()
    {
        InitializeComponent();
        _viewModel = new MainViewModel();
        BindingContext = _viewModel;
    }
}
</code></pre>
<p>file=&quot;MainPage.xaml</p>
<p>The ViewModel contains the collection of heroes and a method to seed the collection:</p>
<pre><code class="language-csharp">using CommunityToolkit.Mvvm.ComponentModel;
using System.Collections.ObjectModel;

namespace ParallaxCollection.ViewModels;

public partial class MainViewModel : ObservableObject
{
    public ObservableCollection&lt;HeroCardViewModel&gt; Heroes { get; set; } =
    [
        new HeroCardViewModel
        {
            Name = &quot;Superman&quot;,
            SecretIdentity = &quot;Clark Kent&quot;,
            HeroImage = &quot;superman.png&quot;,
            LogoImage = &quot;superman_logo.png&quot;,
            Background = Colors.Blue
        },
        new HeroCardViewModel
        {
            Name = &quot;Batman&quot;,
            SecretIdentity = &quot;Bruce Wayne&quot;,
            HeroImage = &quot;batman.png&quot;,
            LogoImage = &quot;batman_logo.png&quot;,
            Background = Colors.DarkGray
        },
        new HeroCardViewModel
        {
            Name = &quot;Wonder Woman&quot;,
            SecretIdentity = &quot;Diana Prince&quot;,
            HeroImage = &quot;wonderwoman.png&quot;,
            LogoImage = &quot;wonderwoman_logo.png&quot;,
            Background = Colors.Gold
        },
        new HeroCardViewModel
        {
            Name = &quot;The Flash&quot;,
            SecretIdentity = &quot;Barry Allen&quot;,
            HeroImage = &quot;theflash.png&quot;,
            LogoImage = &quot;theflash_logo.png&quot;,
            Background = Colors.Red
        },
        new HeroCardViewModel
        {
            Name = &quot;Green Lantern&quot;,
            SecretIdentity = &quot;Hal Jordan&quot;,
            HeroImage = &quot;greenlantern.png&quot;,
            LogoImage = &quot;greenlantern_logo.png&quot;,
            Background = Colors.Green
        },
        new HeroCardViewModel
        {
            Name = &quot;Shazam&quot;,
            SecretIdentity = &quot;Billy Batson&quot;,
            HeroImage = &quot;shazam.png&quot;,
            LogoImage = &quot;shazam_logo.png&quot;,
            Background = Colors.Red
        }
    ];
}
</code></pre>
<p>file=&quot;ViewModels/MainViewModel.cs</p>
<p>You can see that it's using a <code>HeroCardViewModel</code>.</p>
<pre><code class="language-csharp">using ParallaxCollection.Models;

namespace ParallaxCollection.ViewModels;

public class HeroCardViewModel
{
    public string Name { get; set; } = hero.Name;
    public string SecretIdentity { get; set; } = hero.SecretIdentity;
    public string HeroImage { get; set; } = hero.HeroImage;
    public string LogoImage { get; set; } = hero.LogoImage;
    public Color Background { get; set; } = hero.Background;
}
</code></pre>
<p>file=&quot;ViewModels/HeroCardViewModel.cs</p>
<p>Finally the <code>HeroCard</code> view itself which is used as the data template in the collection:</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;

&lt;ContentView x:Class=&quot;ParallaxCollection.Controls.HeroCard&quot;
            xmlns=&quot;http://schemas.microsoft.com/dotnet/2021/maui&quot;
            xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;&gt;
    &lt;Grid&gt;
        &lt;Border x:Name=&quot;Card&quot;
                Margin=&quot;30&quot;
                StrokeShape=&quot;RoundRectangle 30&quot;&gt;
            &lt;Border.Shadow&gt;
                &lt;Shadow Brush=&quot;Black&quot;
                        Offset=&quot;20,20&quot;
                        Radius=&quot;40&quot;
                        Opacity=&quot;0.8&quot; /&gt;
            &lt;/Border.Shadow&gt;
            &lt;Grid Padding=&quot;20&quot;
                    ColumnDefinitions=&quot;2*,3*&quot;
                    RowDefinitions=&quot;4*,*&quot;&gt;

                &lt;Image x:Name=&quot;HeroLogoImage&quot;
                        Grid.Row=&quot;1&quot;
                        Grid.Column=&quot;0&quot;
                        VerticalOptions=&quot;Center&quot;
                        WidthRequest=&quot;75&quot;&gt;
                    &lt;Image.Shadow&gt;
                        &lt;Shadow Brush=&quot;Black&quot;
                                Offset=&quot;20,20&quot;
                                Radius=&quot;40&quot;
                                Opacity=&quot;0.8&quot; /&gt;
                    &lt;/Image.Shadow&gt;
                &lt;/Image&gt;

                &lt;VerticalStackLayout Grid.Row=&quot;1&quot;
                                        Grid.Column=&quot;1&quot;
                                        VerticalOptions=&quot;Center&quot;&gt;
                    &lt;Label x:Name=&quot;HeroNameLabel&quot;
                            Margin=&quot;10,0,0,0&quot;
                            FontAttributes=&quot;Bold&quot;
                            FontSize=&quot;Title&quot;
                            TextColor=&quot;White&quot; /&gt;

                    &lt;Label x:Name=&quot;SecretIdentityLabel&quot;
                            Margin=&quot;10,0,0,0&quot;
                            FontSize=&quot;Body&quot;
                            TextColor=&quot;White&quot; /&gt;
                &lt;/VerticalStackLayout&gt;
            &lt;/Grid&gt;
        &lt;/Border&gt;

        &lt;Image x:Name=&quot;HeroImageImage&quot;
                VerticalOptions=&quot;Center&quot;
                HorizontalOptions=&quot;Center&quot;
                Aspect=&quot;AspectFit&quot;
                HeightRequest=&quot;400&quot; /&gt;
    &lt;/Grid&gt;
&lt;/ContentView&gt;
</code></pre>
<p>file=&quot;Controls/HeroCard.xaml</p>
<pre><code class="language-csharp">using Maui.BindableProperty.Generator.Core;

namespace ParallaxCollection.Controls;

public partial class HeroCard : ContentView
{
    public HeroCard()
    {
        InitializeComponent();
        BindingContext = this;
    }

    [AutoBindable(OnChanged = nameof(heroNameChanged))]
    private string heroName;
    private void heroNameChanged(string value)
    {
        HeroNameLabel.Text = value;
    }

    [AutoBindable(OnChanged = nameof(secretIdentityChanged))]
    private string secretIdentity;
    private void secretIdentityChanged(string value)
    {
        SecretIdentityLabel.Text = value;
    }

    [AutoBindable(OnChanged = nameof(heroLogoChanged))]
    private string heroLogo;
    private void heroLogoChanged(string value)
    {
        HeroLogoImage.Source = value;
    }

    [AutoBindable(OnChanged = nameof(heroImageChanged))]
    private string heroImage;
    private void heroImageChanged(string value)
    {
        HeroImageImage.Source = value;
    }

    [AutoBindable(OnChanged = nameof(backgroundChanged))]
    private Color background;
    private void backgroundChanged(Color value)
    {
        Card.Stroke = new SolidColorBrush(value);
        Card.BackgroundColor = value;
    }
}
</code></pre>
<p>file=&quot;Controls/HeroCard.xaml.cs</p>
</details>
<br/>
If you run and build the app now, you should see something like this:
<p><figure><img src="/images/posts/parallax-collection-basic.gif" alt="The app with a standard "  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">The app with a standard </figcaption></figure>
<em>The app with the standard <code>CollectionView</code></em></p>
<p>You can see I've added a shadow here which already adds a little depth, but we can add a bit more by adding a parallax effect.</p>
<h2 id="the-logic">The logic</h2>
<p>Before we get into the code, let's briefly discuss the logic of how this effect will work. We're going to manipulate the position of the images relative to the card, so that as we scroll, it appears the images are moving faster than the cards. This makes the image appear closer than the background, which creates the illusion of depth. To achieve this, every time the <code>OnScrolled</code> event of the <code>CollectionView</code> is fired, we'll check the center of the image and adjust the <code>Y</code> (vertical) position proportionally to the difference between the image's center and the screen's center. The further from the center of the screen it is, the more we'll offset it.</p>
<p><figure><img src="/images/posts/parallax-logic-1.png" alt="As the center of the view moves further from the center of the screen, the vertical position of the image is offset from the background proportionally, giving it the sense that it is moving quicker and appears closer"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">As the center of the view moves further from the center of the screen, the vertical position of the image is offset from the background proportionally, giving it the sense that it is moving quicker and appears closer</figcaption></figure>
<em>As the center of the view moves further from the center of the screen, the vertical position of the image is offset from the background proportionally, giving it the sense that it is moving quicker and appears closer</em></p>
<h2 id="adding-the-controls">Adding the controls</h2>
<p>I'm going to create two custom controls - a <code>ParallaxItemView</code>, which will expose a method that can be called when the <code>CollectionView</code> is scrolled, and a <code>ParallaxCollectionView</code>, which will call this event on its children when a scroll occurs.</p>
<p>As the implementation of this effect is going to be different for each platform, I'm going to use partial classes, with the implementations in the relevant <code>Platforms</code> folders. For now the <code>ParallaxItemView</code> will just outline the required functionality. In a folder called <code>Controls</code>, I've added a file called <code>ParallaxItemView.cs</code></p>
<pre><code class="language-csharp">namespace ParallaxCollection.Controls;

public abstract partial class ParallaxItemView : ContentView
{
    private int _platformY;
    private int _denominator;
    protected double ParallaxOffsetY;
    private double ThisCenter;
    private double CenterY;

    public ParallaxItemView()
    {
        ConfigurePlatform();
    }

    public virtual void OnScrolled()
    {
        if (Height == -1)
            return;

        CalculateCentre();
        var diff = ThisCenter - CenterY;
        ParallaxOffsetY = diff / _denominator;
    }

    partial void ConfigurePlatform();
    partial void CalculateCentre();
}
</code></pre>
<p>Let's talk through the variables in this class:</p>
<ul>
<li><code>_platformY</code>: This will represent the current vertical position of the view.</li>
<li><code>ThisCenter</code>: This is going to represent the center of the item which we are offsetting.</li>
<li><code>CenterY</code>: This represents the center of the screen.</li>
<li><code>ParallaxOffsetY</code>: This is the main property we are going to manipulate to control the vertical position of the parallax item. Based on how far <code>ThisCenter</code> is from <code>CenterY</code>, we're going to adjust this to offset the item and create the parallax effect.</li>
</ul>
<p>Let's also talk about the methods (and method declarations):</p>
<ul>
<li><code>ConfigurePlatform</code>: This is called from the constructor and will set up the necessary platform specific pieces to make this work.</li>
<li><code>CalculateCenter</code>: This will be called to calculate where on the screen the center of the item is, so that we know how far from the center of the screen it is and consequently how much it should be offset.</li>
<li><code>OnScrolled</code>: This will be called when the item is scrolled so that the offset can be calculated. It's <code>virtual</code> because it will need to be overridden, so that the child class can apply the <code>ParallaxOffsetY</code> to whatever view it needs to after the calculations have completed.</li>
</ul>
<p>Note also the <code>_denominator</code> field. This is used as a scaling factor to control the extent of the effect. It will be set in the <code>ConfigurePlatform</code> method as it will be different on each platform, but we could make this a configurable value to make the pronouncement of the effect controllable.</p>
<p>With the <code>ParallaxItemView</code> done, the next thing is to create the <code>ParallaxCollectionView</code>, also in the <code>Controls</code> folder:</p>
<pre><code class="language-csharp">namespace ParallaxCollection.Controls;

public class ParallaxCollectionView : CollectionView
{
    protected override void OnScrolled(ItemsViewScrolledEventArgs e)
    {
        base.OnScrolled(e);

        var vte = (IVisualTreeElement)this;

        var visualItems = vte.GetVisualChildren();

        foreach (var item in visualItems)
        {
            if (item is ParallaxItemView parallaxItem)
            {
                parallaxItem.OnScrolled();
            }
        }
    }
}
</code></pre>
<p>This is fairly straightforward. It subclasses <code>CollectionView</code> and overrides the <code>OnScrolled</code> method. Every time the <code>CollectionView</code> is scrolled, it will cast itself to <code>IVisualTreeElement</code> so that it can get the child views. Then, each of these is checked to see if it's an instance of <code>ParallaxItemView</code>, and if so, the <code>OnScrolled</code> method is called.</p>
<p>That's all the shared functionality complete, so with that out the way, we can take a look at the platform specifics.</p>
<h2 id="android">Android</h2>
<p>In the <code>Platforms/Android</code> folder, create a folder called <code>Controls</code>, and in here, add the partial implementation of the <code>ParallaxItemView</code>. I've put mine in a file called <code>ParallaxItemView.Android.cs</code>, but it's important to ensure it uses the same class name and namespace:</p>
<pre><code class="language-csharp">using Microsoft.Maui.Handlers;

namespace ParallaxCollection.Controls;

public partial class ParallaxItemView
{
    partial void ConfigurePlatform()
    {
    }

    partial void CalculateCentre()
    {
        ThisCenter = _platformY + (Height / 2);
    }
}
</code></pre>
<p>You can see here that we've started with partial implementations of the methods defined in the shared class. The <code>CalculateCenter</code> method is easy - it calculates the value for the center of the view as the <code>_platformY</code> position plus half the height of the view. The Y position is the distance from the top of the screen to the top of the view, so adding half the height of the view gives us the center of the view.</p>
<p><figure><img src="/images/posts/parallax-android1.png" alt="platformY is the distance from the top of the screen to the top of the view, and ThisCenter (the center of the view) is calculated by adding half the height of the view"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">platformY is the distance from the top of the screen to the top of the view, and ThisCenter (the center of the view) is calculated by adding half the height of the view</figcaption></figure>
_<em>platformY is the distance from the top of the screen to the top of the view, and ThisCenter (the center of the view) is calculated by adding half the height of the view</em></p>
<p>Now we need to flesh out the <code>ConfigurePlatform</code> method, so let's start with two easy things: setting the values for <code>_denominator</code> and <code>CenterY</code>.</p>
<pre><code class="language-csharp">partial void ConfigurePlatform()
{
    _denominator = 10;
    CenterY = DeviceDisplay.MainDisplayInfo.Height / DeviceDisplay.MainDisplayInfo.Density / 2;

}
</code></pre>
<p>These are straightforward - <code>_denominator</code> is an arbitrary value (worked out in my case by trial and error, but could be whatever works for you on Android). We'll set a different value for iOS as it behaves differently, and talk about it a little more in the Challenges section at the end.</p>
<p>The next line sets the <code>CenterY</code> value, which represents the center of the screen, using the cross-platform <code>DeviceDisplay.MainDisplayInfo</code> API from .NET MAUI (see <a href="https://learn.microsoft.com/dotnet/maui/platform-integration/device/display?view=net-maui-8.0">the docs</a>) to get the height and density of the screen. <code>Height</code> gives the total pixels, and dividing it by the <code>Density</code> (pixels per unit), gets the height of the display in <a href="https://learn.microsoft.com/previous-versions/xamarin/xamarin-forms/creating-mobile-apps-xamarin-forms/summaries/chapter05#pixels-points-dps-dips-and-dius">device independent units (DIUs)</a>.</p>
<p>The last step is to get the position of the view to set the <code>_platformY</code> value. Unfortunately we can't just use the <code>Y</code> property of the view, as this will be relative to the parent (in this case the <code>ParallaxCollectionView</code>) and not the screen. But as the view is derived from <code>ContentView</code>, which maps to the <code>View</code> type on Android, there are some useful platform APIs we can use instead. First, we can use the <a href="https://developer.android.com/reference/android/view/View#getLocationOnScreen(int[])"><code>GetLocationOnScreen</code></a> method to get the view's position relative to the screen. And second, we can use the <a href="https://developer.android.com/reference/android/view/View#getViewTreeObserver()"><code>ViewTreeObserver</code></a> to subscribe to the <code>ScrollChanged</code> event, and update <code>_platformY</code> whenever the position changes.</p>
<p><code>GetLocationOnScreen</code> returns an array of <code>int</code> with two values - one for <code>x</code> and one for <code>y</code>. So all we need to do is grab the <code>y</code> value and set <code>_platformY</code>. You can see the full code for the <code>ConfigurePlatform</code> method here:</p>
<pre><code class="language-csharp">partial void ConfigurePlatform()
{
    _denominator = 10;
    CenterY = DeviceDisplay.MainDisplayInfo.Height / DeviceDisplay.MainDisplayInfo.Density / 2;

    ContentViewHandler.Mapper.AppendToMapping(&quot;parallax&quot;, (handler, view) =&gt;
    {
        if (view is ParallaxItemView pView)
        {
            handler.PlatformView.ViewTreeObserver!.ScrollChanged += (s, e) =&gt;
            {
                int[] location = new int[2];
                handler.PlatformView.GetLocationOnScreen(location);
                int y = location[1];

                pView._platformY = y;
            };
        }
    });
}
</code></pre>
<p>The <code>CalculateCenter</code> and <code>OnScrolled</code> methods already do the rest of the work - once we've got the correct value for <code>_platformY</code>, we call <code>CalculateCenter()</code> to get the correct value for the center. And then the rest of the <code>OnScrolled</code> method calculates and sets the <code>OffsetParallaxY</code> value.</p>
<p>Which means that this is all the code we need on Android, so with that done we can move on to iOS.</p>
<h2 id="ios">iOS</h2>
<p>iOS works a little differently than Android, but we can start the same way but adding the partial implementation to the <code>Platforms/iOS/Controls</code> folder:</p>
<pre><code class="language-csharp">using Microsoft.Maui.Handlers;

namespace ParallaxCollection.Controls;

public partial class ParallaxItemView
{

    partial void ConfigurePlatform()
    {
        _denominator = 3;
        CenterY = 160;
    }

    partial void CalculateCentre()
    {
    }
}
</code></pre>
<p>Be sure to use the same namespace and class name. In the <code>ConfigurePlatform</code> method, we've set a value for <code>_denominator</code>, but rather than obtaining the center of the screen programmatically, we're using a fixed value. For iOS, this is much easier than trying to get the value from the API, and iOS provides a fixed set of device specific resolutions (in points or DIUs). You can read more about these in the documentation, although I found <a href="https://www.appmysite.com/blog/the-complete-guide-to-iphone-screen-resolutions-and-sizes/">a nice write-up here</a> too.</p>
<p>To improve this, we would want to get the device model and set this accordingly (see Challenges section below), but for now this works for our limited use case.</p>
<p>The next step is to obtain the position of the view. This is not as straightforward as on Android; on iOS, <code>ContentView</code> maps to <code>UIView</code>, and its position is only ever relative to the parent view, and not the screen. But we can use the <a href="https://learn.microsoft.com/dotnet/api/uikit.uiview.convertpointtoview?view=xamarin-ios-sdk-12">iOS API</a> to obtain the position on-screen using the <code>ConvertPointToView</code> method. <code>ConvertPointToView</code> (on the <code>UIView</code> class) returns a <code>CGPoint</code> which contains <code>X</code> and <code>Y</code> values (<code>CGPoint</code> can be considered similar to a <code>Vector2</code> in .NET, although they are conceptually different).</p>
<p>To use this, we need to cast the view to the native <code>UIView</code>, then call the <code>ConvertPointToView</code> method, passing the view's location bounds (which is also a <code>CGPoint</code>) as a parameter. This will convert the position from the view's coordinate system to the screen's coordinate system. From here we can get the <code>Y</code> value, and divide it by the density to get the position in DIUs.</p>
<p>The complete code for the iOS implementation is here:</p>
<pre><code class="language-csharp">using CoreGraphics;
using UIKit;

namespace ParallaxCollection.Controls;

public partial class ParallaxItemView
{
    private readonly double _density = DeviceDisplay.MainDisplayInfo.Density;

    partial void ConfigurePlatform()
    {
        _denominator = 3;
        CenterY = DeviceDisplay.MainDisplayInfo.Height / DeviceDisplay.MainDisplayInfo.Density / 2;
    }

    partial void CalculateCentre()
    {
        CalculatePosition();
        ThisCenter = _platformY + (Height / 2);
    }

    private void CalculatePosition()
    {
        var location = new CGPoint();
        if (this.Handler?.PlatformView is UIView platformView)
        {
            location = platformView.ConvertPointToView(platformView.Bounds.Location, null);
        }

        _platformY = (int)(location.Y / _density);
    }
}
</code></pre>
<p>This completes the implementation, so with both the iOS and Android implementations complete, we can update our UI to use the new controls.</p>
<h2 id="result">Result</h2>
<p>Now that we've got an implementation for <code>ParallaxItemVeiw</code> on iOS and Android, we can update the hero card to inherit this instead of <code>ContentView</code> directly, and override the <code>OnScrolled</code> method to adjust the position of the image.</p>
<pre><code class="language-csharp">using Maui.BindableProperty.Generator.Core;

namespace ParallaxCollection.Controls;

public partial class HeroCard : ParallaxItemView
{
    public HeroCard()
    {
        InitializeComponent();
        BindingContext = this;
    }

    public override void OnScrolled()
    {
        base.OnScrolled();
        HeroImageImage.TranslationY = ParallaxOffsetY;
    }

    /// ..
}
</code></pre>
<p>Remember that the <code>ParallaxCollectionView</code> will check all its children to see if they are an instance of <code>ParallaxItemView</code>, and if they are will call this method. The platform implementations we've just created will set a value for <code>ParallaxOffsetY</code> when we call the <code>base</code> method, and here assign that offset to the <code>HeroImageImage</code> (note there's a <code>HeroLogoImage</code> and a <code>HeroImageImage</code> - we could apply an offset to both - see Challenges section).</p>
<p>All that remains is to replace the <code>CollectionView</code> in <code>MainPage</code> with our new <code>ParallaxCollectionView</code>. As <code>ParallaxCollectionView</code> subclasses <code>CollectionView</code>, it's just a straight swap.</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;ContentPage xmlns=&quot;http://schemas.microsoft.com/dotnet/2021/maui&quot;
             xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;
             xmlns:vm=&quot;clr-namespace:ParallaxCollection.ViewModels;assembly=ParallaxCollection&quot;
             xmlns:controls=&quot;clr-namespace:ParallaxCollection.Controls;assembly=ParallaxCollection&quot;
             x:DataType=&quot;vm:MainViewModel&quot;
             x:Class=&quot;ParallaxCollection.MainPage&quot;&gt;

    &lt;Grid&gt;
        &lt;controls:ParallaxCollectionView ItemsSource=&quot;{Binding Heroes}&quot;
                                         VerticalOptions=&quot;Center&quot;
                                         x:Name=&quot;HeroesCollection&quot;&gt;
            &lt;controls:ParallaxCollectionView.ItemTemplate&gt;
                &lt;DataTemplate x:DataType=&quot;vm:HeroCardViewModel&quot;&gt;
                    &lt;controls:HeroCard Background=&quot;{Binding Background}&quot;
                                       HeroName=&quot;{Binding Name}&quot;
                                       SecretIdentity=&quot;{Binding SecretIdentity}&quot;
                                       HeroImage=&quot;{Binding HeroImage}&quot;
                                       HeroLogo=&quot;{Binding LogoImage}&quot;/&gt;
                &lt;/DataTemplate&gt;
            &lt;/controls:ParallaxCollectionView.ItemTemplate&gt;
        &lt;/controls:ParallaxCollectionView&gt;
    &lt;/Grid&gt;

&lt;/ContentPage&gt;
</code></pre>
<TipContainer >
<p><strong>Note</strong><br/> It's actually not necessary to use <code>controls:ParallaxCollectionView</code> inside the view (i.e. for the <code>ItemTemplate</code> as I've done here). <code>CollectionView</code> works fine too, but I think it helps keep it more consistent to do it this way.</p>
</TipContainer>
<p>The changes here are minimal - the <code>ParallaxItemView</code> and <code>ParallaxCollectionView</code> do all the heavy lifting, so all we've done here is include the <code>controls</code> namespace and switch the references from <code>CollectionView</code> to <code>ParallaxCollectionView</code> (we didn't have to change anything on <code>HeroCard</code> because we've already updated it to inherit <code>ParallaxItemView</code>).</p>
<p>If we run the app now, we see the scrolling effect we're after:</p>
<p><figure><img src="/images/posts/android-parallax.gif" alt="The parallax effect on Android"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">The parallax effect on Android</figcaption></figure>
<em>The parallax effect on Android</em></p>
<p><figure><img src="/images/posts/ios-parallax.gif" alt="The parallax effect on iOS"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">The parallax effect on iOS</figcaption></figure>
<em>The parallax effect on iOS</em></p>
<h2 id="challenges">Challenges</h2>
<p>This is a neat effect that we can use (while being careful not to overuse) to add some depth to our apps. This is very much a demo though; if you wanted to use this in a production app, there are some improvements you should consider. If you like this and want to take it a little further, here are some challenges you can take on to take this to the next level.</p>
<ul>
<li><strong>Other OSes:</strong> This currently only works on iOS and Android. See if you can get it working on macOS and Windows.</li>
<li><strong>Shadows:</strong> To add an extra dimension to the depth, we could create a shadow of the image and insert it as a layer between the image and the card.</li>
<li><strong>Configurable offset:</strong> With this approach, if I wanted to adjust the offset, I would use a modifier on the <code>ParallaxOffsetY</code> (more on this below), but we could consider making denominator configurable.</li>
<li><strong>Multiple layers:</strong> Right now there are two layers - the foreground and the background. We could add more - an easy way would be to add a modifier to <code>ParallaxOffsetY</code> before applying it to a view, a harder way would be to make it reusable by adding some kind of layer property to the <code>ParallaxItemView</code> which already has the modifier. This could result in unnecessary calculations if the layers aren't in use, but the bigger challenge for us as developers is more likely keeping the effect subtle. When implementing a cool effect like this, it's tempting to make it pronounced so the whole world can see, but for something like this it's important to keep it barely noticeable. If in doubt, consult with your friendly neighbourhood UI expert 😉.</li>
<li><strong>Better handling for <code>CenterY</code> on iPhone:</strong> This is currently using an arbitrary value, but we could get the device model and retrieve the center from a dictionary of known pixel heights for each device.</li>
<li><strong>Find and implement your own:</strong> Find and implement a cool design on Dribble, or replicate the effect from another app you like.</li>
</ul>
]]></content:encoded>
      </item>
<item>
        <title>Passthrough Behavior: Attaching things where they don&#39;t belong</title>
        <link>https://goforgoldman.com/posts/passthrough-behavior</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/passthrough-behavior</guid>
        <pubDate>Mon, 01 Jul 2024 00:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/passthrough-behavior.jpeg" alt="Passthrough Behavior: Attaching things where they don&#39;t belong" />
          Implementing a passthrough behavior pattern in .NET MAUI to attach validation functionality to custom controls that wrap Entry and Editor elements.]]>
        </description>
        <category>mobile</category>
        <category>maui</category>
        <category>ui</category>
        <content:encoded><![CDATA[<h2 id="introduction">Introduction</h2>
<p>I spent some time over the last year helping <a href="https://trashmob.eco">TrashMob</a> build their mobile app. TrashMob is an initiative designed to allow people to self-organise community cleanup events - it's a wonderful initiative and you should definitely check it out if you haven't already. Like most mobile apps, they have their own <a href="https://uxplanet.org/design-language-system-d438f4aa30e0">design language system</a> and wanted to implement their consistent, branded look-and-feel across the mobile app. This involved customising the appearance of the out of the box controls, including the <code>Entry</code> and <code>Editor</code> controls.</p>
<p>Often you can use <a href="https://learn.microsoft.com/dotnet/maui/user-interface/styles/xaml">styles</a> to customise controls in .NET MAUI apps, but these don't always give you full control over all the aspects you need to modify. In this case you need to use <a href="https://learn.microsoft.com/dotnet/maui/user-interface/handlers">handlers</a> to change the way .NET MAUI renders controls on the target platforms.</p>
<p>There are a couple of approaches you can take here. One is to fully customise the platform view - this was a common approach with the renderer architecture in Xamarin.Forms. Another, and my preferred approach, is instead to <a href="https://github.com/matt-goldman/MauiMaterialEntry">strip away the platform styling and then wrap the control in a <code>ContentView</code></a>. Using the rich styling capabilities in .NET MAUI makes it much easier create a consistent cross-platform custom experience than manipulating platform APIs directly. But this approach comes with some trade-offs.</p>
<p>In the case of the <code>Entry</code> and <code>Editor</code> controls, bindable properties like <code>Text</code> and <code>Placeholder</code> need to be reproduced, and sometimes events (although this approach also makes it trivial to create your own bindable commands). If you're using this approach for a control library, you probably need to expose pretty much all of the properties and events of a control when you &quot;wrap&quot; it like this, although for an internal control as in my scenario this is usually not necessary. In any case, using a source generator like those in the <a href="https://learn.microsoft.com/dotnet/communitytoolkit/mvvm/">MVVM Community Toolkit</a> and the <a href="https://github.com/rrmanzano/maui-bindableproperty-generator">bindable property generator</a> make it a cinch.</p>
<h2 id="the-challenge">The challenge</h2>
<p>Speaking of community toolkits, the TrashMob mobile app uses the <a href="https://learn.microsoft.com/dotnet/communitytoolkit/maui/">MAUI Community Toolkit</a> extensively including, among other things, for <a href="https://learn.microsoft.com/dotnet/communitytoolkit/maui/behaviors/text-validation-behavior">validation on user input</a>. As these are <a href="https://learn.microsoft.com/dotnet/maui/fundamentals/behaviors">.NET MAUI behaviors rather than attached behaviors</a>, adding them to a custom control isn't a problem, but consuming the functionality in a meaningful way is.</p>
<p>I considered a few options:</p>
<ul>
<li>Customise <code>Entry</code> and <code>Editor</code> entirely through handlers. This would have been a lot more work and would require maintaining different sets of styling per platform.</li>
<li>Manually replicate all the validation functionality myself. Also a lot of work and re-inventing the wheel.</li>
<li>Add every conceivable validator to the <code>Editor</code> and <code>Entry</code> and then expose properties on the wrapper control to enable them. Would also require bindable properties for certain things like valid patterns or number ranges. Also a lot of work and hard to maintain, and likely would include lot's of things that wouldn't be necessary.</li>
</ul>
<p>None of these seemed like particularly good ideas, so I decided on a different approach,</p>
<h2 id="my-solution">My solution</h2>
<p>I opted instead to create a simple, reusable &quot;passthrough behavior&quot; attachment. Rather than add the behavior directly to a control, I wanted to pass it through - give it to the wrapper control which would in turn add it to the wrapped control.</p>
<p>What this means is that I can provide the behavior I want to the wrapper control and it will pass it through to the wrapped <code>Entry</code> (<code>Editor</code> too but in this demo I'm only showing <code>Entry</code> - although if you want to see the full solution you can check out the <a href="https://github.com/TrashMob-eco/TrashMob">TrashMob repo on GitHub</a> - and feel free to contribute to them too!).</p>
<p>Before we look at the passthrough behavior, let's take a quick look at the custom entry control:</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;ContentView xmlns=&quot;http://schemas.microsoft.com/dotnet/2021/maui&quot;
             xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;
             xmlns:controls=&quot;clr-namespace:PassthroughBehaviorDemo.Controls&quot;
             x:Class=&quot;PassthroughBehaviorDemo.Controls.CustomEntry&quot;&gt;
    &lt;Border Stroke=&quot;Gold&quot;
            StrokeShape=&quot;RoundRectangle 10&quot;&gt;
        &lt;controls:BorderlessEntry x:Name=&quot;WrappedEntry&quot;
                                  TextChanged=&quot;WrappedEntry_TextChanged&quot;/&gt;
    &lt;/Border&gt;
&lt;/ContentView&gt;
</code></pre>
<p>We can see that this control itself is called <code>CustomEntry</code>, and it's simply a <code>Border</code> around a <code>BorderlessEntry</code>. <code>BorderlessEntry</code> is just a subclass of <code>Entry</code>, and I'm using the <code>TextChanged</code> event here to bubble up the <code>Text</code> property to the wrapper control.</p>
<pre><code class="language-csharp">public partial class CustomEntry : ContentView
{
	public CustomEntry()
	{
		InitializeComponent();
	}

    private void WrappedEntry_TextChanged(object sender, TextChangedEventArgs e)
    {
        if (Text != e.NewTextValue)
        {
            Text = e.NewTextValue;
        }
    }

    [AutoBindable(DefaultBindingMode = &quot;TwoWay&quot;, OnChanged = nameof(TextPropertyChanged))]
    private string _text;
    private void TextPropertyChanged(string newValue)
    {
        if (WrappedEntry.Text != newValue)
        {
            WrappedEntry.Text = newValue;
        }
    }
}
</code></pre>
<p>I'm using the bindable property generator linked above here to automatically generate the <code>Text</code> property.</p>
<NoteContainer >
<p>Don't use names like <code>CustomEntry</code>. I just used it here for this demo but it's a terrible name. Use something meaningful like <code>BorderlessEntry</code> or <code>RoundedEntry</code>. Or if it's branded something like <code>TMEntry</code> (TM for TrashMob, which is what I actually used in this case), although while this works for a control library, a name that is descriptive of the customisation is probably better.</p>
</NoteContainer>
<p>The <code>BorderlessEntry</code> as mentioned is just a subclass of <code>Entry</code>, but with a handler mapping to remove the default borders:</p>
<pre><code class="language-csharp">public class BorderlessEntry : Entry
{
    public BorderlessEntry()
    {
        Microsoft.Maui.Handlers.EntryHandler.Mapper.AppendToMapping(&quot;Borderless&quot;, (handler, view) =&gt;
        {
            if (view is BorderlessEntry)
            {
#if ANDROID
                handler.PlatformView.Background = null;
                handler.PlatformView.SetBackgroundColor(Android.Graphics.Color.Transparent);
                handler.PlatformView.BackgroundTintList =
                    Android.Content.Res.ColorStateList.ValueOf(Android.Graphics.Color.Transparent);
#elif IOS
                handler.PlatformView.BackgroundColor = UIKit.UIColor.Clear;
                handler.PlatformView.Layer.BorderWidth = 0;
                handler.PlatformView.BorderStyle = UIKit.UITextBorderStyle.None;
#endif
            }
        });

        var transparentBackgroundSetter = new Setter
        {
            Property = BackgroundColorProperty,
            Value = Colors.Transparent
        };

        var focusedTrigger = new Trigger(typeof(Entry));
        focusedTrigger.Property = IsFocusedProperty;
        focusedTrigger.Value = true;
        focusedTrigger.Setters.Add(transparentBackgroundSetter);

        Triggers.Add(focusedTrigger);
    }
}
</code></pre>
<p>With the custom controls now set up, let's take a look at the code to pass through validation behaviors from the MAUI Community Toolkit:</p>
<pre><code class="language-csharp">public static class BehaviorAttachment
{
    public static readonly BindableProperty PassthroughBehaviorProperty =
        BindableProperty.CreateAttached(
            &quot;PassthroughBehavior&quot;,
            typeof(Behavior),
            typeof(BehaviorAttachment),
            null,
            propertyChanged: OnBehaviorChanged);

    public static void SetPassthroughBehavior(BindableObject view, Behavior value)
    {
        view.SetValue(PassthroughBehaviorProperty, value);
    }

    public static Behavior GetPassthroughBehavior(BindableObject view)
    {
        return (Behavior)view.GetValue(PassthroughBehaviorProperty);
    }

    static void OnBehaviorChanged(BindableObject bindable, object oldValue, object newValue)
    {
        if (newValue is Behavior newBehavior)
        {
            if (bindable is CustomEntry customEntry)
            {
                var entry = customEntry.FindByName&lt;Entry&gt;(&quot;WrappedEntry&quot;);
                if (entry != null)
                {
                    entry.Behaviors.Add(newBehavior);
                }
            }
        }
    }
}
</code></pre>
<p>This is an <a href="https://learn.microsoft.com/dotnet/maui/fundamentals/behaviors#attached-behaviors">attached behavior</a> that essentially takes any other behavior and adds it to the wrapped <code>Entry</code> control.</p>
<p>It implements the get and set methods required for an attached behavior (named by convention), and for the property changed event of the bindable property, first checks to see if the value being bound is a behavior, then checks to see if the bindable object is an instance of the wrapper control (<code>CustomEntry</code> in this case). If both these things are true, the behavior that is being attached gets added to the wrapped <code>Entry</code> control, or &quot;passed through&quot;.</p>
<p>This is an incredibly simple yet powerful addition that enables me to keep my simplified approach and still benefit from the awesome validators in the community toolkit. Let's take a look at it in action:</p>
<pre><code class="language-xml">&lt;ContentPage xmlns=&quot;http://schemas.microsoft.com/dotnet/2021/maui&quot;
             xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;
             xmlns:controls=&quot;clr-namespace:PassthroughBehaviorDemo.Controls&quot;
             xmlns:mct=&quot;http://schemas.microsoft.com/dotnet/2022/maui/toolkit&quot;
             x:Class=&quot;PassthroughBehaviorDemo.MainPage&quot;&gt;
    &lt;ContentPage.Resources&gt;
        &lt;Style x:Key=&quot;InvalidEntryStyle&quot; TargetType=&quot;Entry&quot;&gt;
            &lt;Setter Property=&quot;TextColor&quot; Value=&quot;Red&quot; /&gt;
        &lt;/Style&gt;
        &lt;Style x:Key=&quot;ValidEntryStyle&quot; TargetType=&quot;Entry&quot;&gt;
            &lt;Setter Property=&quot;TextColor&quot; Value=&quot;Green&quot; /&gt;
        &lt;/Style&gt;
    &lt;/ContentPage.Resources&gt;

    &lt;ScrollView&gt;
        &lt;VerticalStackLayout
            Padding=&quot;30,0&quot;
            Spacing=&quot;25&quot;&gt;
            &lt;!-- ... --&gt;

            &lt;controls:CustomEntry&gt;
                &lt;controls:BehaviorAttachment.PassthroughBehavior&gt;
                    &lt;mct:EmailValidationBehavior
                         InvalidStyle=&quot;{StaticResource InvalidEntryStyle}&quot;
                         ValidStyle=&quot;{StaticResource ValidEntryStyle}&quot;
                         Flags=&quot;ValidateOnValueChanged&quot; /&gt;
                &lt;/controls:BehaviorAttachment.PassthroughBehavior&gt;
            &lt;/controls:CustomEntry&gt;
        &lt;/VerticalStackLayout&gt;
    &lt;/ScrollView&gt;

&lt;/ContentPage&gt;
</code></pre>
<p>You can see here I have brought in namespaces for my control and for the community toolkit, and then simply dropped in an instance of <code>CustomEntry</code>, just as I would a regular entry. Using my <code>PassthroughBehavior</code> I've added an email validator from the CommunityToolkit, using a couple of styles I've defined in the page to highlight valid and invalid inputs.</p>
<p>Easy right? Let's take a look at the result:</p>
<p><figure><img src="/images/posts/passthrough-behavior.gif" alt="The passthrough behavior in action on Windows"  style="max-width:100%;height:auto;" /><figcaption style="margin-left:auto;margin-right:auto;font-style:italic;text-align:center;">The passthrough behavior in action on Windows</figcaption></figure>
<em>The passthrough behavior in action on Windows</em></p>
<p>You can see here that this is using a custom <code>Entry</code> control - it has a rounded gold border, and email validation is working, relying on the functionality from the community toolkit with barely any extra effort. And of course this is reusable and can be used with any instance of the custom entry control and any behavior.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Using this passthrough behavior you can have your cake and eat it! You get all the flexibility of building custom controls using cross-platform .NET MAUI APIs while retaining the ability to use extensions intended for built-in controls.</p>
<p>Will you use this in your projects? Do you have a better approach? Let me know your feedback in the comments!</p>
<p>Check out the <a href="https://github.com/matt-goldman/PassthroughBehaviorDemo">full code sample here</a>.</p>
]]></content:encoded>
      </item>
<item>
        <title>.NET MAUI UI July - 2024</title>
        <link>https://goforgoldman.com/posts/mauiuijuly-24</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/mauiuijuly-24</guid>
        <pubDate>Sun, 19 May 2024 00:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/maui-ui-july-bg.png" alt=".NET MAUI UI July - 2024" />
          Announcing .NET MAUI UI July 2024, the third year of this community-driven event where developers share their passion for building beautiful .NET MAUI user interfaces.]]>
        </description>
        <category>mobile</category>
        <category>maui</category>
        <category>ui</category>
        <content:encoded><![CDATA[<p>It's time for #MAUIUIJuly again!</p>
<p>Based on an idea <a href="https://thewissen.io/introducing-xamarin-ui-july/">originally started for Xamarin by Steven Thewissen</a>, MAUI UI July is a month-long, community-driven event where anyone gets to share some of their enthusiasm and passion for .NET MAUI.</p>
<p>This will be the third year running this event, and in previous years we've had fantastic contributions from the community, covering an incredible range of things to do with .NET MAUI. You can check out previous years' contributions here:</p>
<ul>
<li><a href="/posts/maui-ui-july">MAUI UI July (2022)</a></li>
<li><a href="/posts/maui-ui-july-23">MAUI UI July (2023)</a></li>
</ul>
<p>Each day in July, we'll add a blog post or video to the calendar below, showcasing something cool you can do with .NET MAUI. Be sure to bookmark/favourite this post and check back every day for new content!</p>
<p>And if you want to participate and contribute something, even better! Keep reading to see what's involved.</p>
<h2 id="how-to-get-involved">How to Get Involved</h2>
<p>MAUI UI July is open to community contributions, and is an opportunity to share your passion and knowledge with the world. All you have to do is pick a topic and create a blog post or video, and pick a day in July to release it. If you want to participate, comment below, shout out on socials using the hashtags #dotnetmaui and #MAUIUIJuly or ping me directly (I'm on Twitter/&quot;X&quot;, LinkedIn, and Mastodon - links are in the sidebar on the left), saying which day of the month you want to release your post or video on. Once you've picked a date I'll add your name to the list below to reserve your spot.</p>
<p>From there, just get started on your content! Keep the following in mind:</p>
<ol>
<li>The topic must be related to UI in .NET MAUI</li>
<li>Your blog post or video must be in English</li>
<li>Your content should indicate what level it is pitched at (e.g., beginner or advanced)</li>
<li>Link back to this post in your blog post or in the description of your video</li>
<li>Publish your blog post or video on the date according to the list below</li>
<li>Share your video or blog post on socials, using the hashtags #dotnetmaui and #MAUIUIJuly</li>
</ol>
<p>That's it! Looking forward to seeing what you all come up with. :)</p>
<h2 id="what-should-my-content-cover">What should my content cover?</h2>
<p>Completely up to you! As long as it's related to .NET MAUI UI, feel free to be as creative as you like. Some common topics people like for this kind of thing include:</p>
<ul>
<li>Replicate the UI of a well known app (see <a href="/posts/outlook-clone">this post</a> for example)</li>
<li>Pick a fun or interesting design from <a href="https://dribbble.com">Dribbble</a> and show how you can build it with .NET MAUI</li>
<li>Deep dive into a .NET MAUI UI feature</li>
<li>Build a popular UI control that doesn't come in the box (like a <a href="https://blogs.xgenoapps.com/post/2022/07/23/maui-bottom-sheet">bottom sheet</a> for example)</li>
</ul>
<p>These are just examples. If you think something is interesting, there's a good chance the rest of the community will want to see you explain it.</p>
<h2 id="net-maui-ui-july-schedule">.NET MAUI UI July Schedule</h2>
<table class="table">
<thead>
<tr>
<th>Date</th>
<th>Person</th>
<th>Content</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Matt Goldman</td>
<td>📰 <a href="/posts/parallax-collection/">Adding a parallax effect to CollectionView</a></td>
</tr>
<tr>
<td>2</td>
<td>David Ortinau</td>
<td>📰 <a href="https://dev.to/davidortinau/all-the-lists-in-net-maui-33bd">All the lists in .NET MAUI</a></td>
</tr>
<tr>
<td>3</td>
<td>Luis Beltran</td>
<td>📰 <a href="https://dev.to/icebeam7/animated-splash-screen-in-net-maui-android-2ipg">Animated splash screen in .NET MAUI Android</a></td>
</tr>
<tr>
<td>4</td>
<td>Vladislav Antonyuk</td>
<td>📰 <a href="https://vladislavantonyuk.github.io/articles/Various-methods-for-barcode-scanning-in-.NET-MAUI/">Barcode scanning with .NET MAUI</a></td>
</tr>
<tr>
<td>5</td>
<td>David Platt</td>
<td>📺 <a href="https://www.youtube.com/watch?v=PGdihJt1pzA">The Joy of UX in .NET MAUI: An MBTA Case Study</a></td>
</tr>
<tr>
<td>6</td>
<td>Available</td>
<td></td>
</tr>
<tr>
<td>7</td>
<td>Sebastian Jensen</td>
<td>📰 <a href="https://medium.com/@@tsjdevapps/create-a-gauge-control-using-skiasharp-in-net-maui-ce418e6320fb">Creating a Gauge Control with SkiaSharp in .NET MAUI</a></td>
</tr>
<tr>
<td>8</td>
<td>Roman Jasek</td>
<td>📰 <a href="https://www.riganti.cz/en/blog-posts/maui-environment-ribbon-intro-and-basic-ui-part-1">MAUI Environment Ribbon Part 1 (links to parts 2 &amp; 3)</a></td>
</tr>
<tr>
<td>9</td>
<td>Mark Allibone</td>
<td>📰 <a href="https://mallibone.com/post/maui-reactor-fit">Getting fit with MAUIReactor</a></td>
</tr>
<tr>
<td>10</td>
<td>Daniel Quintero Henao</td>
<td>📺 <a href="https://www.youtube.com/watch?v=bw5APWXf1AI">Custom animations in .NET MAUI</a> (Spanish)</td>
</tr>
<tr>
<td>11</td>
<td>Matthew Robbins &amp; SSW TV</td>
<td>📺 <a href="https://youtu.be/CfodwPUSfSg?si=qmKwSkAnVhynGnuX">Building Red Point - Unity + .NET MAUI Rock CLimbing app</a></td>
</tr>
<tr>
<td>12</td>
<td>Anton Polkanov</td>
<td>📺 <a href="https://www.youtube.com/watch?v=KaRMUa3Sg38">Getting started with Android bindings in .NET MAUI</a></td>
</tr>
<tr>
<td>13</td>
<td>Michael Stonis</td>
<td>📰 <a href="https://www.ston.is/what-is-this-sheet-a-bottom-sheet-for-maui/">What is this sheet? A bottom sheet for .NET MAUI</a></td>
</tr>
<tr>
<td>14</td>
<td>Michael Stonis</td>
<td>📰 <a href="https://www.ston.is/componentizer4k-in-page-navigation-for-.net-maui/">In-page Navigation for .NET MAUI</a></td>
</tr>
<tr>
<td>15</td>
<td>Nick Kovalsky</td>
<td>📰 <a href="https://taublast.github.io/posts/MauiJuly/">The Quest to Create Drawn .NET MAUI Apps</a></td>
</tr>
<tr>
<td>16</td>
<td>Roman Jasek</td>
<td>📰 <a href="https://www.riganti.cz/en/blog-posts/maui-environment-ribbon-ui-customization-part-4">MAUI Environment Ribbon Part 4 (links to parts 5 &amp; 6)</a></td>
</tr>
<tr>
<td>17</td>
<td>Diego Rivero</td>
<td>📰 <a href="https://grialkit.com/blog/emojis-in-net-maui">Emojis in .NET MAUI</a></td>
</tr>
<tr>
<td>18</td>
<td>Julian Ewers-Peters</td>
<td>📰 <a href="https://blog.ewers-peters.de/white-labeling-net-maui-apps">White-labelling .NET MAUI apps</a></td>
</tr>
<tr>
<td>19</td>
<td>Matt Goldman</td>
<td>📰 <a href="https://goforgoldman.com/posts/passthrough-behavior/">Passing through attached behaviors to a child control</a></td>
</tr>
<tr>
<td>20</td>
<td>Shaun Lawrence</td>
<td>📰 <a href="https://blog.bijington.com/2024/07/31/creating-a-sprite-editor.html">Creating a Sprite editor in .NET MAUI</a></td>
</tr>
<tr>
<td>21</td>
<td>Nick Alonge</td>
<td>📰 <a href="https://dev.to/nick_alonge/using-local-browser-storage-in-net-maui-blazor-hybrid-3loe">Using browser local storage with .NET MAUI Blazor hybrid</a></td>
</tr>
<tr>
<td>22</td>
<td>Sam Basu</td>
<td>📰 <a href="https://www.telerik.com/blogs/web-styles-native-apps">Web Styles in Native Apps</a></td>
</tr>
<tr>
<td>23</td>
<td>David Nsai</td>
<td>📰 <a href="https://medium.com/@@nsaidave/creating-an-engaging-onboarding-experience-in-net-maui-using-devexpress-a948592df09e">Creating engaging onboarding experiences with DevExpress</a></td>
</tr>
<tr>
<td>24</td>
<td>Héctor Pérez</td>
<td>📰 <a href="https://devs.school/net-maui-data-template-selector/">Apply Different Item Templates in One CollectionView</a></td>
</tr>
<tr>
<td>25</td>
<td>Pavle Davitković</td>
<td>TBA</td>
</tr>
<tr>
<td>26</td>
<td>Farshad Momtaz</td>
<td>📰 <a href="https://dev.to/fdmomtaz/my-journey-in-making-a-game-with-net-maui-4hjk">Building a Sudoku game in .NET MAUI</a></td>
</tr>
<tr>
<td>27</td>
<td>Adolfo Marinucci</td>
<td>📺 <a href="https://www.youtube.com/watch?v=q-oM2PO0ZtU">Building a task management app with MAUIReactor</a></td>
</tr>
<tr>
<td>28</td>
<td>Daniel Monettelli</td>
<td>📰 <a href="https://danielmonettelli.github.io/posts/rantiy-mobile-app-with-dotnetmaui-part-1/">Rantiy Mobile app with .NET MAUI, Part 1</a></td>
</tr>
<tr>
<td>29</td>
<td>David Ortinau</td>
<td>📰 <a href="https://dev.to/davidortinau/chasing-curiosity-4ip2">Chasing Curiosity</a></td>
</tr>
<tr>
<td>30</td>
<td>Tanaka Mawere</td>
<td>Making an InDrive/Uber clone using MAUI</td>
</tr>
<tr>
<td>31</td>
<td>Brandon Minnick</td>
<td>📰 <a href="https://codetraveler.io/2024/07/29/upgrading-from-xamarin-communitytoolkit-markup-to-communitytoolkit-maui-markup/">Upgrading from Xamarin.CommunityToolkit.Markup to CommunityToolkit.Maui.Markup</a></td>
</tr>
</tbody>
</table>
<p>I hope you enjoy .NET MAUI UI July!</p>
]]></content:encoded>
      </item>
<item>
        <title>The Status Quo Bias and Overcorrection</title>
        <link>https://goforgoldman.com/posts/status-quo-overcorrection</link>
        <guid isPermaLink="true">https://goforgoldman.com/posts/status-quo-overcorrection</guid>
        <pubDate>Sat, 13 Apr 2024 00:00:01 GMT</pubDate>
        <description>
          <![CDATA[<img align="left" hspace="5" src="https://goforgoldman.com/images/posts/the-status-quo-bias.png" alt="The Status Quo Bias and Overcorrection" />
          Exploring the status quo bias in decision-making and the risks of overcorrection when trying to avoid this cognitive bias in business and technology choices.]]>
        </description>
        <category>management</category>
        <category>leadership</category>
        <category>architecture</category>
        <category>design</category>
        <content:encoded><![CDATA[<p>In my <a href="/posts/platinum-hammer/">last post</a> I discussed cognitive biases in decision making and introduced the concept of the platinum hammer. An extension of the well-known golden hammer, the platinum hammer is a predilection for the latest new thing as opposed to the familiar. None of us are immune to cognitive biases, but the more we know about them, the more we can avoid them through careful reflection and self-awareness, and in this post I want to discuss a related cognitive bias - the Status Quo Bias.</p>
<h2 id="the-status-quo-bias">The Status Quo Bias</h2>
<p>Research has shown that people disproportionately favour the 'do nothing' approach, in everything from business strategy to personal finance and health. This phenomenon is known as <a href="https://scholar.harvard.edu/files/rzeckhauser/files/status_quo_bias_in_decision_making.pdf">The Status Quo Bias</a> and is, in a sense, closely related to the golden hammer - it's about a predilection for sticking with the comfortable and well-known. The topic is well researched and discussed, and consequently well understood by many people. There is a wealth of information about how to spot this tendency in yourself, and how to mitigate it.</p>
<h2 id="mitigating-the-status-quo-bias">Mitigating the Status Quo Bias</h2>
<p>As with any cognitive bias, the first and most important step is recognising it - without self-awareness there is no hope, but there are strategies for avoiding over-reliance on our comfortable defaults. A common approach is to <a href="https://time.com/45995/want-to-succeed-you-should-seriously-consider-do-nothing/">frame 'do nothing' as a choice</a>, thereby making choosing to maintain the status quo an active decision rather than a passive one. This can often motivate people to more rigorously pursue a better option.</p>
<p>This is why 'do nothing' is often included in business cases, something I always do, as it forces us to evaluate the costs of this approach. The costs (often <a href="https://www.investopedia.com/terms/o/opportunitycost.asp">opportunity cost</a>) associated with the status quo are not immediately apparent, but by weighing them against the alternatives, these hidden costs can be surfaced. I have been involved in organisations where changes that were initially dismissed were later pursued after this approach.</p>
<p>Another common approach is to <a href="https://online.wharton.upenn.edu/blog/status-quo-bias/">consider 'do nothing' as a default negative</a>. The Status Quo Bias is fuelled by <a href="https://thedecisionlab.com/biases/loss-aversion">loss aversion</a>, meaning that the perceived potential loss associated with change carries more weight than the perceived potential gain, so inherently considering 'do nothing' as a loss can help to overcome this.</p>
<h2 id="overcorrection">Overcorrection</h2>
<p>While this is a valuable strategy, there is a problem with this approach. I mentioned above that the Status Quo Bias is well known and understood by many people. A consequence of this is that some people can have a tendency to over-correct, favouring change as the default and dismissing the status quo as a viable option altogether. The problem here is that sometimes when we frame 'do nothing' as an active choice, we forget to frame it as a <em>viable</em> choice.</p>
<blockquote class="blockquote">
<p>Doing something is better than doing nothing.</p>
</blockquote>
<p><em>An actual quote from a real executive I have worked with</em></p>
<p>There are several problems associated with this overcorrection. The most obvious is that it can lead to regression - the new solution could be worse than the status quo. This is often not the case however; more often, it leads to an outcome that is only slightly less sub-optimal than the status quo, an improvement that is also often completely disproportionate to the investment made in the change. While this is obviously inherently wasteful, it also results in greater opportunity cost.</p>
<p>I have seen this play out multiple times in my career; in fact, I have worked for two companies that spent <em>millions</em> on huge software projects and associated organisational change management, simply because the current solution wasn't up to scratch. In both cases, the new solution was inarguably superior, but orders of magnitude less superior than the associated cost. And more importantly, it closed the door on better opportunities.</p>
<h2 id="conclusion">Conclusion</h2>
<p>When considering all available courses of action, it's critical to mitigate the Status Quo Bias by evaluating the 'do nothing' option objectively and critically, rather than letting it take priority as a comfortable default. This means treating it with equal consideration as other options, and arguably dismissing it out of hand is as bad as ignoring the Status Quo Bias altogether.</p>
<p>While the Status Quo Bias needs to be avoided, there are certainly situations, where upon careful consideration of all available courses of action, the status quo or 'do nothing' approach is the right choice. That doesn't mean it has to be the right choice forever - note my use of &quot;<em>all available</em> courses of action&quot;; if there are no better options than the status quo at the time, that doesn't mean that better options may not become available in the future. The very fact that alternatives have been considered suggests there is a problem or area for improvement, and if a thorough analysis indicates that the status quo is the best option, this calls for vigilance and looking out for new opportunities. This is inherently a valid strategy for mitigating the Status Quo Bias, and a better one than leaping to a potentially worse decision purely for the sake of change.</p>
<p>I'm sure we've all been involved in projects driven more by the desire for change than by an objective improved outcome. Do you have any stories to share about change for change's sake? What methods have you found effective in avoiding overcorrection?</p>
]]></content:encoded>
      </item>
</channel>
</rss>
